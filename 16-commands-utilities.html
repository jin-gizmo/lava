
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS based distributed scheduler and job runner">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="15-lava-and-docker.html">
      
      
        <link rel="next" href="17-job-framework-samples.html">
      
      
      <link rel="icon" href="img/lava-icons/png/256/lava-icon-256-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Commands & Utilities - Lava User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lava-commands-and-utilities" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Lava User Guide" class="md-header__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lava User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Commands & Utilities
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Lava User Guide" class="md-nav__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    Lava User Guide
  </label>
  
    <div class="md-nav__source">
      

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-about-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03-architecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04-dynamodb-tables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-job-dispatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Dispatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jobs-job-types.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs & Job Types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-connectors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="08-job-actions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-lava-state-manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava State Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-operation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Operation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-lava-job-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava Job Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-developing-lava-jobs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Lava Jobs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="13-jinja-rendering-in-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-enhancing-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancing Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-lava-and-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava and Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="16-commands-utilities.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lava-icons" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Icons
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-ami-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-ami
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-backup-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-backup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-check-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-check
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-check">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suppressing-checks-for-specific-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Suppressing Checks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-checksum-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-checksum
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-checksum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-conn-usage-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-conn-usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dag-generator" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dag-gen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-dag-gen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#columnar-format" class="md-nav__link">
    <span class="md-ellipsis">
      Columnar Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matrix-format" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dispatcher-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dispatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dump-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-email-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-email
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-job-activity-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-job-activity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-job-activity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#estimating-lava-load-on-a-connection" class="md-nav__link">
    <span class="md-ellipsis">
      Estimating Load on a Connection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-new-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-new
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-schema-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lava-schema-vs-lava-worker-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Lava-schema vs Lava Worker Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-sql-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-sql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-sql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csv" class="md-nav__link">
    <span class="md-ellipsis">
      CSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-format" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonl-format" class="md-nav__link">
    <span class="md-ellipsis">
      JSONL Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parquet-format" class="md-nav__link">
    <span class="md-ellipsis">
      Parquet Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-state-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-lava-state-item" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Lava State Item
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-a-lava-state-item" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving a Lava State Item
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-stop-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-stop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-version-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-worker-status-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-ws
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="17-job-framework-samples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Framework Samples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="18-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="19-cloudformation-templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFormation Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="20-faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="21-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="22-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="23-known-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lava-icons" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Icons
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-ami-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-ami
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-backup-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-backup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-check-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-check
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-check">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#suppressing-checks-for-specific-entries" class="md-nav__link">
    <span class="md-ellipsis">
      Suppressing Checks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-checksum-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-checksum
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-checksum">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-conn-usage-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-conn-usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dag-generator" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dag-gen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-dag-gen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#columnar-format" class="md-nav__link">
    <span class="md-ellipsis">
      Columnar Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#matrix-format" class="md-nav__link">
    <span class="md-ellipsis">
      Matrix Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dispatcher-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dispatcher
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dump-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-dump
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-email-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-email
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-job-activity-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-job-activity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-job-activity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#estimating-lava-load-on-a-connection" class="md-nav__link">
    <span class="md-ellipsis">
      Estimating Load on a Connection
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-new-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-new
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-schema-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lava-schema-vs-lava-worker-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Lava-schema vs Lava Worker Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    <span class="md-ellipsis">
      Caveats
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-sql-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-sql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-sql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#csv" class="md-nav__link">
    <span class="md-ellipsis">
      CSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-format" class="md-nav__link">
    <span class="md-ellipsis">
      HTML Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jsonl-format" class="md-nav__link">
    <span class="md-ellipsis">
      JSONL Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parquet-format" class="md-nav__link">
    <span class="md-ellipsis">
      Parquet Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-state-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lava-state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-lava-state-item" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Lava State Item
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-a-lava-state-item" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving a Lava State Item
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-stop-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-stop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-version-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-worker-status-utility" class="md-nav__link">
    <span class="md-ellipsis">
      lava-ws
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lava-commands-and-utilities" x-nav="Commands &amp; Utilities">Lava Commands and Utilities<a class="headerlink" href="#lava-commands-and-utilities" title="Permanent link">&para;</a></h1>
<p>The lava utilities are included in the
<a href="12-developing-lava-jobs.html#python-executable-jobs">jinlava</a> Python package together with the lava APIs.</p>
<p>Lava includes a number of CLI commands and utilities. Some of these are used by
the lava worker itself while others are support tools. Most of them can be used
stand-alone or invoked by lava <a href="06-jobs-job-types.html#job-type-exe">exe</a>, <a href="06-jobs-job-types.html#job-type-pkg">pkg</a> and
<a href="06-jobs-job-types.html#job-type-docker">docker</a> jobs.</p>
<p>All of the utilities support a <code>-h</code> , <code>--help</code> option.</p>
<table>
<thead>
<tr>
<th>Utility</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>jinja</td>
<td>Render a Jinja template with specified parameters.</td>
</tr>
<tr>
<td><a href="#lava-ami-utility">lava-ami</a></td>
<td>Manage the AMIs used in lava worker CloudFormation stacks.</td>
</tr>
<tr>
<td><a href="#lava-backup-utility">lava-backup</a></td>
<td>Backup the <a href="04-dynamodb-tables.html#dynamodb-tables">DynamoDB entries</a> for a specified lava realm.</td>
</tr>
<tr>
<td><a href="#lava-check-utility">lava-check</a></td>
<td>Perform some basic health checks on DynamoDB table entries.</td>
</tr>
<tr>
<td><a href="#lava-checksum-utility">lava-checksum</a></td>
<td>Set and validate checksums on lava DynamoDB table entries.</td>
</tr>
<tr>
<td><a href="#lava-conn-usage-utility">lava-conn-usage</a></td>
<td>Generate an activity map of specified jobs over a defined time period.</td>
</tr>
<tr>
<td><a href="#lava-dag-generator">lava-dag-gen</a></td>
<td>Generate a DAG specification for lava <a href="06-jobs-job-types.html#job-type-dag">dag</a> jobs from a dependency matrix.</td>
</tr>
<tr>
<td>lava-dispatcher</td>
<td>The lava job <a href="05-job-dispatch.html#the-lava-dispatch-process">dispatcher</a>.</td>
</tr>
<tr>
<td><a href="#lava-dump-utility">lava-dump</a></td>
<td>Extract lava configurations from <a href="04-dynamodb-tables.html#dynamodb-tables">DynamoDB</a> and dump them to files.</td>
</tr>
<tr>
<td><a href="#lava-email-utility">lava-email</a></td>
<td>Send email using lava <a href="07-connectors.html#connector-type-email">email</a> connections.</td>
</tr>
<tr>
<td>lava-events</td>
<td>Query the lava <a href="04-dynamodb-tables.html#the-events-table">events</a> table.</td>
</tr>
<tr>
<td><a href="#lava-job-activity-utility">lava-job-activity</a></td>
<td>Query the lava realm <a href="04-dynamodb-tables.html#the-events-table">events table</a> to map job activity over a specified time window.</td>
</tr>
<tr>
<td><a href="#lava-new-utility">lava-new</a></td>
<td>Create a new <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a> project.</td>
</tr>
<tr>
<td>lava-ps</td>
<td>Show lava worker process information on the current host.</td>
</tr>
<tr>
<td><a href="#lava-schema-utility">lava-schema</a></td>
<td>Perform deep schema validation for lava DynamoDB specification objects.</td>
</tr>
<tr>
<td>lava-sharepoint</td>
<td>Operate on SharePoint sites using lava <a href="07-connectors.html#connector-type-sharepoint">sharepoint</a> connections.</td>
</tr>
<tr>
<td>lava-slack</td>
<td>Send Slack messages using lava <a href="07-connectors.html#connector-type-slack">slack</a> connections.</td>
</tr>
<tr>
<td>lava-smb</td>
<td>Operate on SMB file shares using lava <a href="07-connectors.html#connector-type-smb">smb</a> connections.</td>
</tr>
<tr>
<td><a href="#lava-sql-utility">lava-sql</a></td>
<td>Run SQL using lava <a href="07-connectors.html#database-connectors">database connections</a>.</td>
</tr>
<tr>
<td><a href="#lava-state-utility">lava-state</a></td>
<td>Manipulate lava state items.</td>
</tr>
<tr>
<td><a href="#lava-stop-utility">lava-stop</a></td>
<td>Perform a controlled shutdown of the lava worker daemons. This also support AWS auto scaling lifecycle hooks.</td>
</tr>
<tr>
<td><a href="#lava-version-utility">lava-version</a></td>
<td>Provides version information on the installed lava version.</td>
</tr>
<tr>
<td>lava-worker</td>
<td>The main lava worker.</td>
</tr>
<tr>
<td><a href="#lava-worker-status-utility">lava-ws</a></td>
<td>Show lava worker status based on the worker SQS queues (queue depths, worker backlog etc.). This does not need to run on the worker host.</td>
</tr>
<tr>
<td>s3lambda</td>
<td>Trigger an AWS Lambda function by generating synthetic S3 event notifications.</td>
</tr>
</tbody>
</table>
<h2 id="lava-icons">Lava Icons<a class="headerlink" href="#lava-icons" title="Permanent link">&para;</a></h2>
<p>The following are the official lava icons. These used to change based on a whim,
same as AWS architecture icons, but are now stable.</p>
<details>
<summary>PNG</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">512x512</label><label for="__tabbed_1_2">256x256</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="" src="img/lava-icons/png/512/lava-icon-512-square.png" />
<img alt="" src="img/lava-icons/png/512/lava-icon-512-rounded.png" />
<img alt="" src="img/lava-icons/png/512/lava-icon-512-transparent.png" /></p>
</div>
<div class="tabbed-block">
<p><div style="display: flex; flex-wrap: wrap; flex-direction: row">
    <img src=img/lava-icons/png/256/lava-icon-256-square.png>
    <img src=img/lava-icons/png/256/lava-icon-256-rounded.png>
    <img src=img/lava-icons/png/256/lava-icon-256-transparent.png>
</div></p>
</div>
</div>
</div>
</details>
<details>
<summary>SVG</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">512x512</label><label for="__tabbed_2_2">256x256</label><label for="__tabbed_2_3">120x120</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="" src="img/lava-icons/svg/512/lava-icon-512-square.svg" />
<img alt="" src="img/lava-icons/svg/512/lava-icon-512-rounded.svg" />
<img alt="" src="img/lava-icons/svg/512/lava-icon-512-transparent.svg" /></p>
</div>
<div class="tabbed-block">
<p><div style="display: flex; flex-wrap: wrap; flex-direction: row">
    <img src=img/lava-icons/svg/256/lava-icon-256-square.svg>
    <img src=img/lava-icons/svg/256/lava-icon-256-rounded.svg>
    <img src=img/lava-icons/svg/256/lava-icon-256-transparent.svg>
</div></p>
</div>
<div class="tabbed-block">
<p><div style="display: flex; flex-wrap: wrap; flex-direction: row">
    <img src=img/lava-icons/svg/120/lava-icon-120-square.svg>
    <img src=img/lava-icons/svg/120/lava-icon-120-rounded.svg>
    <img src=img/lava-icons/svg/120/lava-icon-120-transparent.svg>
</div></p>
</div>
</div>
</div>
</details>
<h2 id="lava-ami-utility">Lava AMI Utility<a class="headerlink" href="#lava-ami-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-ami</strong> utility displays the available, lava compatible, AMIs and the
AMI specified in each lava worker CloudFormation stack.</p>
<details class="usage">
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-0-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-ami</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-n</span><span class="w"> </span><span class="err">N]</span><span class="w"> </span><span class="err">[--sak]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-U]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">[-W]</span>
</span><span id="__span-0-2"><span class="w">                </span><span class="err">[STACK-NAME</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-0-3">
</span><span id="__span-0-4"><span class="err">Manage</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">AMIs</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">stacks.</span>
</span><span id="__span-0-5">
</span><span id="__span-0-6"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-0-7"><span class="w">  </span><span class="err">STACK-NAME</span><span class="w">         </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">stack</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">worker.</span><span class="w"> </span><span class="err">Glob</span><span class="w"> </span><span class="err">style</span>
</span><span id="__span-0-8"><span class="w">                     </span><span class="err">patterns</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">any</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-0-9"><span class="w">                     </span><span class="err">patterns</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">*,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">-U</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--update</span><span class="w"> </span><span class="err">option</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">permitted.</span>
</span><span id="__span-0-10">
</span><span id="__span-0-11"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-0-12"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-0-13"><span class="w">  </span><span class="err">-n</span><span class="w"> </span><span class="err">N</span><span class="w">               </span><span class="err">Only</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">recent</span><span class="w"> </span><span class="err">images</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-0-14"><span class="w">                     </span><span class="err">each</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">selection</span><span class="w"> </span><span class="err">list.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">5.</span>
</span><span id="__span-0-15"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">  </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-0-16"><span class="w">  </span><span class="err">-U,</span><span class="w"> </span><span class="err">--update</span><span class="w">       </span><span class="err">Initiate</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">interactive</span><span class="w"> </span><span class="err">update</span><span class="w"> </span><span class="err">process</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">allow</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">AMI</span>
</span><span id="__span-0-17"><span class="w">                     </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">applied</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">selected</span><span class="w"> </span><span class="err">stacks.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">or</span>
</span><span id="__span-0-18"><span class="w">                     </span><span class="err">more</span><span class="w"> </span><span class="err">stack</span><span class="w"> </span><span class="err">patterns</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">(no</span><span class="w"> </span><span class="err">single</span><span class="w"> </span><span class="err">*)</span><span class="w"> </span><span class="err">to</span>
</span><span id="__span-0-19"><span class="w">                     </span><span class="err">make</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">harder</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">maniacally</span><span class="w"> </span><span class="err">update</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">whole</span><span class="w"> </span><span class="err">bunch</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-0-20"><span class="w">                     </span><span class="err">stacks</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">go.</span><span class="w"> </span><span class="err">You</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">thank</span><span class="w"> </span><span class="err">me</span><span class="w"> </span><span class="err">later.</span>
</span><span id="__span-0-21"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">      </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-0-22"><span class="w">  </span><span class="err">-W,</span><span class="w"> </span><span class="err">--no-wait</span><span class="w">      </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">wait</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">CloudFormation</span><span class="w"> </span><span class="err">stack</span><span class="w"> </span><span class="err">updates</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">complete.</span>
</span></code></pre></div>
</details>
<p><strong>Lava-ami</strong> also provides an update mode that allows a (more or less)
interactive process to select and apply a different AMI to one or more lava
worker stacks. This process is a lot simpler and less error prone than trying to
manage the AMI used on multiple workers in the AWS CloudFormation console.</p>
<p><strong>Lava-ami</strong> will silently ignore worker stacks that appear to be parasitic
workers hosted on another worker instance. These are detected by the absence of
a machine type or AMI ID parameter in the CloudFormation stack. If these need to
be updated, use the AWS CloudFormation console.</p>
<p><strong>Lava-ami</strong> is conservative in its definition of lava compatibility for an AMI.
The lava worker itself can run on any Linux machine with the right prerequisite
components installed but these two images support the deployment and
bootstrapping processes preferred in lava operational environments.
<strong>Lava-ami</strong> will highlight the most recent lava AMI in its output.</p>
<h2 id="lava-backup-utility">Lava Backup Utility<a class="headerlink" href="#lava-backup-utility" title="Permanent link">&para;</a></h2>
<p><strong>Lava-backup</strong> performs a complete extract of all of the configuration tables
for a given realm and stores the result in a zip file, either locally or in AWS
S3.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-1-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-backup</span><span class="w"> </span><span class="err">[options]</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">zip-file</span>
</span><span id="__span-1-2">
</span><span id="__span-1-3"><span class="err">Backup</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">DynamoDB</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">realm.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">output</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">zip</span><span class="w"> </span><span class="err">file.</span>
</span><span id="__span-1-4">
</span><span id="__span-1-5"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-1-6"><span class="w">  </span><span class="err">realm</span><span class="w">               </span><span class="err">Realm</span><span class="w"> </span><span class="err">name.</span>
</span><span id="__span-1-7"><span class="w">  </span><span class="err">zip-file</span><span class="w">            </span><span class="err">Name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">output</span><span class="w"> </span><span class="err">zip</span><span class="w"> </span><span class="err">file.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">local</span><span class="w"> </span><span class="err">machine</span>
</span><span id="__span-1-8"><span class="w">                      </span><span class="err">or</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">S3</span><span class="w"> </span><span class="err">(s3://....).</span><span class="w"> </span>
</span><span id="__span-1-9">
</span><span id="__span-1-10"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-1-11"><span class="w">  </span><span class="err">-h</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--help</span><span class="w">         </span><span class="err">Print</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit.</span>
</span><span id="__span-1-12"><span class="w">  </span><span class="err">-y</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--yaml</span><span class="w">         </span><span class="err">Output</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">YAML</span><span class="w"> </span><span class="err">format.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">JSON.</span>
</span></code></pre></div>
</details>
<p><strong>Lava-backup</strong> uses the <a href="#lava-dump-utility">lava-dump</a> utility under the
covers. It can be run as a lava <a href="06-jobs-job-types.html#job-type-cmd">cmd</a> job if required. A lava
job specification suitable for backing up the current realm is:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">{</span>
</span><span id="__span-2-2"><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Backup the DynamoDB entries for the realm&quot;</span><span class="p">,</span>
</span><span id="__span-2-3"><span class="w">  </span><span class="nt">&quot;dispatcher&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Sydney&quot;</span><span class="p">,</span>
</span><span id="__span-2-4"><span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
</span><span id="__span-2-5"><span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lava/dynamo-backup&quot;</span><span class="p">,</span>
</span><span id="__span-2-6"><span class="w">  </span><span class="nt">&quot;owner&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lava&quot;</span><span class="p">,</span>
</span><span id="__span-2-7"><span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-8"><span class="w">    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-9"><span class="w">      </span><span class="s2">&quot;{{realm.realm}}&quot;</span><span class="p">,</span>
</span><span id="__span-2-10"><span class="w">      </span><span class="s2">&quot;{{realm.s3_temp}}/lava/dynamo-backup/{{ustart.strftime(&#39;%Y-%m-%d&#39;)}}.zip&quot;</span>
</span><span id="__span-2-11"><span class="w">    </span><span class="p">]</span>
</span><span id="__span-2-12"><span class="w">  </span><span class="p">},</span>
</span><span id="__span-2-13"><span class="w">  </span><span class="nt">&quot;payload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lava-backup&quot;</span><span class="p">,</span>
</span><span id="__span-2-14"><span class="w">  </span><span class="nt">&quot;schedule&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0 19 * * *&quot;</span><span class="p">,</span>
</span><span id="__span-2-15"><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cmd&quot;</span><span class="p">,</span>
</span><span id="__span-2-16"><span class="w">  </span><span class="nt">&quot;worker&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;core&quot;</span>
</span><span id="__span-2-17"><span class="p">}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dispatcher, worker and schedule will need to be adjusted in the example.</p>
</div>
<h2 id="lava-check-utility">Lava Check Utility<a class="headerlink" href="#lava-check-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-check</strong> utility performs some basic health checks on DynamoDB table
entries.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-3-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-check</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-c</span><span class="w"> </span><span class="err">GLOB]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-S]</span><span class="w"> </span><span class="err">[-v]</span>
</span><span id="__span-3-2"><span class="w">                  </span><span class="err">[--no-colour]</span><span class="w"> </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span><span class="w"> </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span>
</span><span id="__span-3-3">
</span><span id="__span-3-4"><span class="err">Check</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">problems.</span>
</span><span id="__span-3-5">
</span><span id="__span-3-6"><span class="err">options:</span>
</span><span id="__span-3-7"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-3-8"><span class="w">  </span><span class="err">-c</span><span class="w"> </span><span class="err">GLOB,</span><span class="w"> </span><span class="err">--check</span><span class="w"> </span><span class="err">GLOB</span>
</span><span id="__span-3-9"><span class="w">                        </span><span class="err">Run</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">health</span><span class="w"> </span><span class="err">checks</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">matching</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">given</span>
</span><span id="__span-3-10"><span class="w">                        </span><span class="err">glob</span><span class="w"> </span><span class="err">patterns.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span>
</span><span id="__span-3-11"><span class="w">                        </span><span class="err">specified,</span><span class="w"> </span><span class="err">print</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">list</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">checks.</span>
</span><span id="__span-3-12"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-3-13"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-3-14"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-3-15"><span class="w">                        </span><span class="err">variable</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set.</span>
</span><span id="__span-3-16"><span class="w">  </span><span class="err">-S,</span><span class="w"> </span><span class="err">--no-suppress</span><span class="w">     </span><span class="err">Disable</span><span class="w"> </span><span class="err">suppression</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">checks</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">specific</span><span class="w"> </span><span class="err">DynamoDB</span>
</span><span id="__span-3-17"><span class="w">                        </span><span class="err">entries</span><span class="w"> </span><span class="err">via</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">x-lava-nocheck</span><span class="w"> </span><span class="err">field.</span><span class="w"> </span><span class="err">By</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-3-18"><span class="w">                        </span><span class="err">suppression</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">specific</span><span class="w"> </span><span class="err">checks</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">permitted</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">some</span>
</span><span id="__span-3-19"><span class="w">                        </span><span class="err">check</span><span class="w"> </span><span class="err">types.</span>
</span><span id="__span-3-20"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-3-21">
</span><span id="__span-3-22"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-3-23"><span class="w">  </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-3-24"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-3-25"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-3-26"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-3-27"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-3-28"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-3-29"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-3-30"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-3-31"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-3-32"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-3-33"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-3-34"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-check.</span>
</span></code></pre></div>
</details>
<p>See also <a href="#lava-schema-utility">lava-schema</a>.</p>
<p><strong>Lava-check</strong> supports the following checks:</p>
<table>
<thead>
<tr>
<th>Check Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>conmeta</td>
<td>Connection specs with missing metadata (e.g. description, owner).</td>
</tr>
<tr>
<td>jobjinja *</td>
<td>Job specs with Jinja rendering issues. This includes jobs that use globals for which there is no placeholder entry in the job specification, referred to as undeclared globals. While lava tolerates undeclared globals, it is good practice to declare them with a placeholder value.</td>
</tr>
<tr>
<td>jobmeta</td>
<td>Job specs with missing metadata (e.g. description, owner).</td>
</tr>
<tr>
<td>joborphan *</td>
<td>Jobs with no recorded run events.</td>
</tr>
<tr>
<td>jobrepo *</td>
<td>Job specs that don't appear to have an associated repo (no <code>x-lava-git-repo</code> field).</td>
</tr>
<tr>
<td>jobrsu *</td>
<td><a href="06-jobs-job-types.html#job-type-redshift_unload">redshift_unload</a> jobs with <code>insecure</code> set to <code>true</code>.</td>
</tr>
<tr>
<td>trigmeta</td>
<td>S3trigger specs with missing metadata (e.g. description, owner).</td>
</tr>
</tbody>
</table>
<p>The checks marked with a * can be
<a href="#suppressing-checks-for-specific-entries">suppressed</a> on an entry specific basis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The checks need to perform a full table scan on the relevant table. This is
not usually a problem but something to remember. Performing multiple checks
on a given table in a single invocation will only do a single table scan
though.</p>
</div>
<p>Output is in markdown formatted tables on the assumption that these issues may
end up in a backlog somewhere for correction.</p>
<h3 id="suppressing-checks-for-specific-entries">Suppressing Checks for Specific Entries<a class="headerlink" href="#suppressing-checks-for-specific-entries" title="Permanent link">&para;</a></h3>
<p>Some check types can be suppressed for specific DynamoDB table entries by
including an <code>x-lava-nocheck</code> field in the table entry. The value is a string
identifying a single check type to suppress, or a list of such strings.</p>
<p>For example, the following would suppress the <code>joborphan</code> check for a given job
specification:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">{</span>
</span><span id="__span-4-2"><span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;rarely-run-job&quot;</span><span class="p">,</span>
</span><span id="__span-4-3"><span class="w">  </span><span class="nt">&quot;x-lava-nocheck&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;joborphan&quot;</span><span class="p">,</span>
</span><span id="__span-4-4"><span class="w">  </span><span class="err">...</span>
</span><span id="__span-4-5"><span class="p">}</span>
</span></code></pre></div>
<p>This would suppress the <code>joborphan</code> and <code>jobrsu</code> checks:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-5-1"><span class="p">{</span>
</span><span id="__span-5-2"><span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;yet-another-job&quot;</span><span class="p">,</span>
</span><span id="__span-5-3"><span class="w">  </span><span class="nt">&quot;x-lava-nocheck&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-5-4"><span class="w">    </span><span class="s2">&quot;joborphan&quot;</span><span class="p">,</span>
</span><span id="__span-5-5"><span class="w">    </span><span class="s2">&quot;jobrsu&quot;</span>
</span><span id="__span-5-6"><span class="w">  </span><span class="p">],</span>
</span><span id="__span-5-7"><span class="w">  </span><span class="err">...</span>
</span><span id="__span-5-8"><span class="p">}</span>
</span></code></pre></div>
<h2 id="lava-checksum-utility">Lava Checksum Utility<a class="headerlink" href="#lava-checksum-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-checksum</strong> utility verifies, adds and updates checksums on entries in
the following <a href="04-dynamodb-tables.html#dynamodb-tables">lava DynamoDB tables</a>.</p>
<ul>
<li>
<p>the <a href="04-dynamodb-tables.html#the-connections-table">connections table</a></p>
</li>
<li>
<p>the <a href="04-dynamodb-tables.html#the-jobs-table">jobs table</a></p>
</li>
<li>
<p>the <a href="04-dynamodb-tables.html#the-s3triggers-table">s3triggers table</a>.</p>
</li>
<li>
<p>the <a href="04-dynamodb-tables.html#the-realms-table">realms table</a>.</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The checksums are intended for drift detection only. They are <strong>not</strong> a code
signing mechanism and they are not cryptographically sealed.</p>
</div>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-6-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-checksum</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-f</span><span class="w"> </span><span class="err">{txt,tty,html,md}]</span>
</span><span id="__span-6-2"><span class="w">                     </span><span class="err">[--hash-algorithm</span><span class="w"> </span><span class="err">ALGORITHM]</span>
</span><span id="__span-6-3"><span class="w">                     </span><span class="err">[-i]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-t</span><span class="w"> </span><span class="err">TABLE]</span><span class="w"> </span><span class="err">[-v]</span>
</span><span id="__span-6-4"><span class="w">                     </span><span class="err">[--version]</span>
</span><span id="__span-6-5"><span class="w">                     </span><span class="err">{check,add,update}</span><span class="w"> </span><span class="err">...</span>
</span><span id="__span-6-6">
</span><span id="__span-6-7"><span class="err">Set</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">validate</span><span class="w"> </span><span class="err">checksums</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">DynamdoDB</span><span class="w"> </span><span class="err">entries.</span>
</span><span id="__span-6-8">
</span><span id="__span-6-9"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-6-10"><span class="w">  </span><span class="err">{check,add,update}</span>
</span><span id="__span-6-11"><span class="w">    </span><span class="err">check</span><span class="w">               </span><span class="err">Validate</span><span class="w"> </span><span class="err">checksums.</span>
</span><span id="__span-6-12"><span class="w">    </span><span class="err">add</span><span class="w">                 </span><span class="err">Add</span><span class="w"> </span><span class="err">missing</span><span class="w"> </span><span class="err">checksums.</span>
</span><span id="__span-6-13"><span class="w">    </span><span class="err">update</span><span class="w">              </span><span class="err">Update</span><span class="w"> </span><span class="err">existing</span><span class="w"> </span><span class="err">checksums.</span>
</span><span id="__span-6-14">
</span><span id="__span-6-15"><span class="err">options:</span>
</span><span id="__span-6-16"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-6-17"><span class="w">  </span><span class="err">-f</span><span class="w"> </span><span class="err">{txt,tty,html,md},</span><span class="w"> </span><span class="err">--format</span><span class="w"> </span><span class="err">{txt,tty,html,md}</span>
</span><span id="__span-6-18"><span class="w">                        </span><span class="err">Output</span><span class="w"> </span><span class="err">format.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">&quot;tty&quot;</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">stdout</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-6-19"><span class="w">                        </span><span class="err">terminal</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">&quot;txt&quot;</span><span class="w"> </span><span class="err">otherwise.</span>
</span><span id="__span-6-20"><span class="w">  </span><span class="err">--hash-algorithm</span><span class="w"> </span><span class="err">ALGORITHM</span>
</span><span id="__span-6-21"><span class="w">                        </span><span class="err">Algorithm</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">checksums.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">sha256.</span>
</span><span id="__span-6-22"><span class="w">  </span><span class="err">-i,</span><span class="w"> </span><span class="err">--ignore-case</span><span class="w">     </span><span class="err">Matching</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">glob</span><span class="w"> </span><span class="err">patterns</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">insensitive.</span>
</span><span id="__span-6-23"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-6-24"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-6-25"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-6-26"><span class="w">                        </span><span class="err">variable</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set.</span>
</span><span id="__span-6-27"><span class="w">  </span><span class="err">-t</span><span class="w"> </span><span class="err">TABLE,</span><span class="w"> </span><span class="err">--table</span><span class="w"> </span><span class="err">TABLE</span>
</span><span id="__span-6-28"><span class="w">                        </span><span class="err">Extract</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">table.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-6-29"><span class="w">                        </span><span class="err">jobs,</span><span class="w"> </span><span class="err">connections,</span><span class="w"> </span><span class="err">s3triggers</span><span class="w"> </span><span class="err">(or</span><span class="w"> </span><span class="err">triggers)</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">realms.</span>
</span><span id="__span-6-30"><span class="w">                        </span><span class="err">Any</span><span class="w"> </span><span class="err">unique</span><span class="w"> </span><span class="err">initial</span><span class="w"> </span><span class="err">sequence</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">accepted.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-6-31"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">&quot;jobs&quot;.</span>
</span><span id="__span-6-32"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--verbose</span><span class="w">         </span><span class="err">Increase</span><span class="w"> </span><span class="err">verbosity.</span><span class="w"> </span><span class="err">By</span><span class="w"> </span><span class="err">default,</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">checksum</span><span class="w"> </span><span class="err">errors,</span>
</span><span id="__span-6-33"><span class="w">                        </span><span class="err">updates</span><span class="w"> </span><span class="err">etc</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">reported.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">multiple</span>
</span><span id="__span-6-34"><span class="w">                        </span><span class="err">times.</span>
</span><span id="__span-6-35"><span class="w">  </span><span class="err">--version</span><span class="w">             </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span></code></pre></div>
</details>
<p>To get help on a sub-command, use <code>-h</code> / <code>--help</code> on the sub-command. e.g.</p>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-7-1"><span class="err">lava-checksum</span><span class="w"> </span><span class="err">check</span><span class="w"> </span><span class="err">--help</span>
</span></code></pre></div>
<p>Key points to note:</p>
<ul>
<li>
<p>The checksums are stored in the entry in the field <code>x-lava-chk</code>.</p>
</li>
<li>
<p>Checksum calculation ignores any field starting with <code>x-</code> or <code>X-</code>.</p>
</li>
<li>
<p>The <a href="11-lava-job-framework.html#the-lava-job-framework">lava-job-framework</a> generates compatible checksums
    when deploying entries to the tables.</p>
</li>
<li>
<p>The checksum structure and format are internal to lava and subject to change
    at the capricious whim of the developer. The <strong>lava-checksum</strong> utility will
    manage backward compatibility.</p>
</li>
</ul>
<p>Arguments for the <strong>lava-checksum</strong> utility shown above must be placed before
the sub-command. Arguments specific to sub-command must be placed after the
sub-command.</p>
<p>Note:</p>
<ul>
<li>
<p>The <code>add</code> sub-command will only add missing checksums and <code>update</code> will only
    update existing checksums.</p>
</li>
<li>
<p>If any table entries are modified, a ZIP file will be left in the current
    directory containing the entries before they were updated. Delete this
    manually if not required.</p>
</li>
</ul>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><span class="c1"># Check all of the jobs in realm &quot;prod&quot;</span>
</span><span id="__span-8-2">lava-checksum<span class="w"> </span>--realm<span class="w"> </span>prod<span class="w"> </span>--table<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span>-vv<span class="w"> </span>check
</span><span id="__span-8-3">
</span><span id="__span-8-4"><span class="c1"># Add missing checksums to connections matching app/* in realm &quot;prod&quot;</span>
</span><span id="__span-8-5">lava-checksum<span class="w"> </span>--realm<span class="w"> </span>prod<span class="w"> </span>--table<span class="w"> </span>conn<span class="w"> </span>-vv<span class="w"> </span>update<span class="w"> </span><span class="s1">&#39;app/*&#39;</span>
</span></code></pre></div>
<h2 id="lava-conn-usage-utility">Lava-conn-usage Utility<a class="headerlink" href="#lava-conn-usage-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-conn-usage</strong> utility will find the job IDs of jobs that reference
specified connectors.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-9-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-conn-usage</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-i]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span>
</span><span id="__span-9-2"><span class="w">                       </span><span class="err">connector-glob</span><span class="w"> </span><span class="err">[connector-glob</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-9-3">
</span><span id="__span-9-4"><span class="err">Find</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">jobs</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">reference</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">connectors.</span>
</span><span id="__span-9-5">
</span><span id="__span-9-6"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-9-7"><span class="w">  </span><span class="err">connector-glob</span><span class="w">        </span><span class="err">Report</span><span class="w"> </span><span class="err">jobs</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">connectors</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">match</span><span class="w"> </span><span class="err">any</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-9-8"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">glob</span><span class="w"> </span><span class="err">style</span><span class="w"> </span><span class="err">patterns.</span>
</span><span id="__span-9-9">
</span><span id="__span-9-10"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-9-11"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-9-12"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-9-13"><span class="w">  </span><span class="err">-i,</span><span class="w"> </span><span class="err">--ignore-case</span><span class="w">     </span><span class="err">Matching</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">insensitive.</span>
</span><span id="__span-9-14"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-9-15"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-9-16"><span class="w">                        </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">environment</span><span class="w"> </span><span class="err">variable</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">used.</span><span class="w"> </span><span class="err">A</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">must</span>
</span><span id="__span-9-17"><span class="w">                        </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">these</span><span class="w"> </span><span class="err">mechanisms.</span>
</span></code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See also <a href="#lava-job-activity-utility">Lava-job-activity Utility</a>.</p>
</div>
<p>For example, the following will find job IDs that reference connectors with IDs
containing the string <code>redshift</code> using a glob-style pattern match:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1">lava-conn-usage<span class="w"> </span>-r<span class="w"> </span>my-realm<span class="w"> </span><span class="s1">&#39;*redshift*&#39;</span>
</span></code></pre></div>
<p>This can then be used with the <a href="#lava-job-activity-utility">lava-job-activity</a>
utility to estimate the load lava is placing on particular resources (e.g. a
database). See <a href="#estimating-lava-load-on-a-connection">Estimating Lava Load on a
Connection</a>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Only connections referenced in parameters known by lava to hold connection IDs
will be found.</p>
</div>
<h2 id="lava-dag-generator">Lava DAG Generator<a class="headerlink" href="#lava-dag-generator" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-dag-gen</strong> utility generates a DAG specification for lava
<a href="06-jobs-job-types.html#job-type-dag">dag</a> jobs from a dependency matrix. It is
provided as part of the standard lava worker installation and is also included
in the <code>bin</code> directory with the
<a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a>. The lava job
framework also provides support for using the utility to automatically generate
DAGs at build time.</p>
<details class="usage">
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-11-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-dag-gen</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-c]</span><span class="w"> </span><span class="err">[-g</span><span class="w"> </span><span class="err">GROUP]</span><span class="w"> </span><span class="err">[-o]</span><span class="w"> </span><span class="err">[-p</span><span class="w"> </span><span class="err">PREFIX]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-w</span><span class="w"> </span><span class="err">KEY]</span>
</span><span id="__span-11-2"><span class="w">                    </span><span class="err">[--table</span><span class="w"> </span><span class="err">TABLE]</span><span class="w"> </span><span class="err">[-y]</span>
</span><span id="__span-11-3"><span class="w">                    </span><span class="err">source</span>
</span><span id="__span-11-4">
</span><span id="__span-11-5"><span class="err">Generate</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">DAG</span><span class="w"> </span><span class="err">specification</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">dag</span><span class="w"> </span><span class="err">jobs</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">dependency</span><span class="w"> </span><span class="err">matrix.</span>
</span><span id="__span-11-6">
</span><span id="__span-11-7"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-11-8"><span class="w">  </span><span class="err">source</span><span class="w">                </span><span class="err">Source</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">DAG</span><span class="w"> </span><span class="err">dependency</span><span class="w"> </span><span class="err">matrix.</span><span class="w"> </span><span class="err">CSV,</span><span class="w"> </span><span class="err">Excel</span>
</span><span id="__span-11-9"><span class="w">                        </span><span class="err">XLSX</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">sqlite3</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">supported.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-11-10"><span class="w">                        </span><span class="err">filename</span><span class="w"> </span><span class="err">suffix</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">determine</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">type.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-11"><span class="w">                        </span><span class="err">value</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">recognised</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">type,</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">assumed</span><span class="w"> </span><span class="err">to</span>
</span><span id="__span-11-12"><span class="w">                        </span><span class="err">be</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">connection</span><span class="w"> </span><span class="err">ID.</span><span class="w"> </span><span class="err">In</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-13"><span class="w">                        </span><span class="err">lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">via</span><span class="w"> </span><span class="err">-r,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-14"><span class="w">                        </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">environment</span><span class="w"> </span><span class="err">variable.</span><span class="w"> </span><span class="err">For</span><span class="w"> </span><span class="err">CSV</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">Excel,</span>
</span><span id="__span-11-15"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">first</span><span class="w"> </span><span class="err">column</span><span class="w"> </span><span class="err">contains</span><span class="w"> </span><span class="err">successor</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-16"><span class="w">                        </span><span class="err">first</span><span class="w"> </span><span class="err">row</span><span class="w"> </span><span class="err">contains</span><span class="w"> </span><span class="err">predecessor</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">names.</span><span class="w"> </span><span class="err">Any</span><span class="w"> </span><span class="err">non-</span>
</span><span id="__span-11-17"><span class="w">                        </span><span class="err">empty</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">intersection</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">row</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">column</span>
</span><span id="__span-11-18"><span class="w">                        </span><span class="err">indicates</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">dependency.</span><span class="w"> </span><span class="err">For</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">sources,</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">table</span>
</span><span id="__span-11-19"><span class="w">                        </span><span class="err">with</span><span class="w"> </span><span class="err">three</span><span class="w"> </span><span class="err">columns</span><span class="w"> </span><span class="err">(job_group,</span><span class="w"> </span><span class="err">job,</span><span class="w"> </span><span class="err">depends_on)</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-11-20"><span class="w">                        </span><span class="err">required.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">&quot;job&quot;</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">&quot;depends_on&quot;</span><span class="w"> </span><span class="err">columns</span><span class="w"> </span><span class="err">each</span>
</span><span id="__span-11-21"><span class="w">                        </span><span class="err">contain</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">single</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">&quot;depends_on&quot;</span><span class="w"> </span><span class="err">column</span><span class="w"> </span><span class="err">may</span>
</span><span id="__span-11-22"><span class="w">                        </span><span class="err">contain</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">NULL</span><span class="w"> </span><span class="err">indicating</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">&quot;job&quot;</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">included</span>
</span><span id="__span-11-23"><span class="w">                        </span><span class="err">but</span><span class="w"> </span><span class="err">has</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">dependency.</span><span class="w"> </span><span class="err">There</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">rows</span>
</span><span id="__span-11-24"><span class="w">                        </span><span class="err">containing</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">same</span><span class="w"> </span><span class="err">&quot;job&quot;.</span>
</span><span id="__span-11-25">
</span><span id="__span-11-26"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-11-27"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-11-28"><span class="w">  </span><span class="err">-c,</span><span class="w"> </span><span class="err">--compact</span><span class="w">         </span><span class="err">Use</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">compact</span><span class="w"> </span><span class="err">form</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">singleton</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">empty</span>
</span><span id="__span-11-29"><span class="w">                        </span><span class="err">dependencies.</span>
</span><span id="__span-11-30"><span class="w">  </span><span class="err">-g</span><span class="w"> </span><span class="err">GROUP,</span><span class="w"> </span><span class="err">--group</span><span class="w"> </span><span class="err">GROUP</span>
</span><span id="__span-11-31"><span class="w">                        </span><span class="err">Select</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">group</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">entries.</span><span class="w"> </span><span class="err">For</span>
</span><span id="__span-11-32"><span class="w">                        </span><span class="err">CSV</span><span class="w"> </span><span class="err">files,</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">ignored.</span><span class="w"> </span><span class="err">For</span><span class="w"> </span><span class="err">Excel</span><span class="w"> </span><span class="err">files,</span><span class="w"> </span><span class="err">this</span>
</span><span id="__span-11-33"><span class="w">                        </span><span class="err">specifies</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">worksheet</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">first</span>
</span><span id="__span-11-34"><span class="w">                        </span><span class="err">worksheet.</span><span class="w"> </span><span class="err">For</span><span class="w"> </span><span class="err">sqlite3</span><span class="w"> </span><span class="err">files,</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">filter</span>
</span><span id="__span-11-35"><span class="w">                        </span><span class="err">value</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">&quot;job_group&quot;</span><span class="w"> </span><span class="err">column</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">table</span>
</span><span id="__span-11-36"><span class="w">                        </span><span class="err">and</span><span class="w"> </span><span class="err">defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">selecting</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">entries.</span>
</span><span id="__span-11-37"><span class="w">  </span><span class="err">-o,</span><span class="w"> </span><span class="err">--order</span><span class="w">           </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">just</span><span class="w"> </span><span class="err">print</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">possible</span><span class="w"> </span><span class="err">ordering</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-38"><span class="w">                        </span><span class="err">jobs</span><span class="w"> </span><span class="err">instead</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">DAG</span><span class="w"> </span><span class="err">specification.</span>
</span><span id="__span-11-39"><span class="w">  </span><span class="err">-p</span><span class="w"> </span><span class="err">PREFIX,</span><span class="w"> </span><span class="err">--prefix</span><span class="w"> </span><span class="err">PREFIX</span>
</span><span id="__span-11-40"><span class="w">                        </span><span class="err">Prepend</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">IDs.</span>
</span><span id="__span-11-41"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-11-42"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm.</span><span class="w"> </span><span class="err">Required</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">DAG</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">as</span>
</span><span id="__span-11-43"><span class="w">                        </span><span class="err">a</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">connection</span><span class="w"> </span><span class="err">ID.</span><span class="w"> </span><span class="err">Defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-11-44"><span class="w">                        </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">environment</span><span class="w"> </span><span class="err">variable.</span>
</span><span id="__span-11-45"><span class="w">  </span><span class="err">-w</span><span class="w"> </span><span class="err">KEY,</span><span class="w"> </span><span class="err">--wrap</span><span class="w"> </span><span class="err">KEY</span><span class="w">    </span><span class="err">Wrap</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">DAG</span><span class="w"> </span><span class="err">specification</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">map</span><span class="w"> </span><span class="err">key.</span>
</span><span id="__span-11-46"><span class="w">  </span><span class="err">--table</span><span class="w"> </span><span class="err">[SCHEMA.]TABLE</span><span class="w"> </span>
</span><span id="__span-11-47"><span class="w">                        </span><span class="err">Table</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">sources.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">dag.</span>
</span><span id="__span-11-48"><span class="w">  </span><span class="err">-y,</span><span class="w"> </span><span class="err">--yaml</span><span class="w">            </span><span class="err">Generate</span><span class="w"> </span><span class="err">YAML</span><span class="w"> </span><span class="err">output</span><span class="w"> </span><span class="err">instead</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">JSON.</span>
</span></code></pre></div>
</details>
<p><strong>Lava-dag-gen</strong> can read the dependency information from any of the following:</p>
<ul>
<li>
<p>An SQLite3 database or a database accessed via a lava
    <a href="07-connectors.html#database-connectors">database connector</a> in
    <a href="#columnar-format">columnar</a> format.</p>
</li>
<li>
<p>A CSV (<code>*.csv</code>) or Excel (<code>*.xlsx</code>) file in <a href="#matrix-format">matrix</a> format.</p>
</li>
</ul>
<h3 id="columnar-format">Columnar Format<a class="headerlink" href="#columnar-format" title="Permanent link">&para;</a></h3>
<p>Dependency information in columnar format must contain the following three
columns (only):</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>job_group</td>
<td>An arbitrary grouping label for sets of jobs.</td>
</tr>
<tr>
<td>job</td>
<td>The job ID of the successor job. If all the jobs in a DAG have a common prefix in the job ID, this can be omitted here and inserted at run-time in the <a href="06-jobs-job-types.html#job-type-dag">dag</a> job specification.</td>
</tr>
<tr>
<td>depends_on</td>
<td>The ID of a predecessor job on which the subject job depends. This may be empty/NULL if the job has no dependencies. Once again, a common prefix can be omitted.</td>
</tr>
</tbody>
</table>
<p>Each row contains a single predecessor/successor pair. If a job has multiple
predecessors, there will be multiple rows for that job.</p>
<p>Sample DDL for a database:</p>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-12-1"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">dag</span>
</span><span id="__span-12-2"><span class="p">(</span>
</span><span id="__span-12-3"><span class="w">    </span><span class="n">job_group</span><span class="w">  </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
</span><span id="__span-12-4"><span class="w">    </span><span class="n">job</span><span class="w">        </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
</span><span id="__span-12-5"><span class="w">    </span><span class="n">depends_on</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-12-6"><span class="p">);</span>
</span></code></pre></div>
<h3 id="matrix-format">Matrix Format<a class="headerlink" href="#matrix-format" title="Permanent link">&para;</a></h3>
<p>In matrix format, the first column contains successor job names and the first
row contains predecessor job names. Any non-empty value in the intersection of
row and column indicates a dependency. Like so:</p>
<table>
<thead>
<tr>
<th>Jobs</th>
<th>J1</th>
<th>J2</th>
<th>J3</th>
<th>J5</th>
</tr>
</thead>
<tbody>
<tr>
<td>J1</td>
<td></td>
<td></td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td>J2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>J4</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>J4</td>
<td></td>
<td></td>
<td>x</td>
<td></td>
</tr>
<tr>
<td>J5</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>This would result in the following dag payload:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-13-1"><span class="p">{</span>
</span><span id="__span-13-2"><span class="w">    </span><span class="nt">&quot;J1&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-13-3"><span class="w">        </span><span class="s2">&quot;J3&quot;</span><span class="p">,</span>
</span><span id="__span-13-4"><span class="w">        </span><span class="s2">&quot;J5&quot;</span>
</span><span id="__span-13-5"><span class="w">    </span><span class="p">],</span>
</span><span id="__span-13-6"><span class="w">    </span><span class="nt">&quot;J2&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
</span><span id="__span-13-7"><span class="w">    </span><span class="nt">&quot;J4&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-13-8"><span class="w">        </span><span class="s2">&quot;J1&quot;</span><span class="p">,</span>
</span><span id="__span-13-9"><span class="w">        </span><span class="s2">&quot;J3&quot;</span>
</span><span id="__span-13-10"><span class="w">    </span><span class="p">]</span>
</span><span id="__span-13-11"><span class="p">}</span>
</span></code></pre></div>
<p>Note that <code>J5</code> doesn't require its own entry as it is present as a predecessor
of <code>J1</code> and has no predecessors of its own.</p>
<h2 id="lava-dispatcher-utility">Lava Dispatcher Utility<a class="headerlink" href="#lava-dispatcher-utility" title="Permanent link">&para;</a></h2>
<p>The lava dispatcher utility is typically run by <strong>cron(8)</strong> to dispatch jobs on
a schedule. It can also be run as a stand-alone utility to dispatch jobs on
demand.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-14-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-dispatcher</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">[--check-dispatch]</span>
</span><span id="__span-14-2"><span class="w">                       </span><span class="err">[-d</span><span class="w"> </span><span class="err">DELAY]</span><span class="w"> </span><span class="err">[-q</span><span class="w"> </span><span class="err">QUEUE]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-w</span><span class="w"> </span><span class="err">WORKER]</span>
</span><span id="__span-14-3"><span class="w">                       </span><span class="err">[-g</span><span class="w"> </span><span class="err">name=VALUE]</span><span class="w"> </span><span class="err">[-p</span><span class="w"> </span><span class="err">name=VALUE]</span><span class="w"> </span><span class="err">[-c]</span><span class="w"> </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span>
</span><span id="__span-14-4"><span class="w">                       </span><span class="err">[--log-json]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span><span class="w"> </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span>
</span><span id="__span-14-5"><span class="w">                       </span><span class="err">job-id</span><span class="w"> </span><span class="err">[job-id</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-14-6">
</span><span id="__span-14-7"><span class="err">Lava</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">dispatcher.</span>
</span><span id="__span-14-8">
</span><span id="__span-14-9"><span class="err">options:</span>
</span><span id="__span-14-10"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-14-11"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-14-12"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-14-13"><span class="w">  </span><span class="err">--check-dispatch</span><span class="w">      </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">check</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">existence</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-14-14"><span class="w">                        </span><span class="err">dispatch</span><span class="w"> </span><span class="err">suppression</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">&quot;/tmp/lava/__nodispatch__&quot;.</span>
</span><span id="__span-14-15"><span class="w">                        </span><span class="err">If</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">present,</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">dispatches</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">suppressed.</span>
</span><span id="__span-14-16"><span class="w">                        </span><span class="err">This</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">typically</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">scheduled</span><span class="w"> </span><span class="err">dispatches</span>
</span><span id="__span-14-17"><span class="w">                        </span><span class="err">when</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">dispatcher</span><span class="w"> </span><span class="err">node</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">process</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">shutting</span>
</span><span id="__span-14-18"><span class="w">                        </span><span class="err">down.</span>
</span><span id="__span-14-19">
</span><span id="__span-14-20"><span class="err">dispatch</span><span class="w"> </span><span class="err">control</span><span class="w"> </span><span class="err">options:</span>
</span><span id="__span-14-21"><span class="w">  </span><span class="err">-d</span><span class="w"> </span><span class="err">DELAY,</span><span class="w"> </span><span class="err">--delay</span><span class="w"> </span><span class="err">DELAY</span>
</span><span id="__span-14-22"><span class="w">                        </span><span class="err">Delay</span><span class="w"> </span><span class="err">dispatch</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">duration.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-14-23"><span class="w">                        </span><span class="err">0.</span><span class="w"> </span><span class="err">Maximum</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">15</span><span class="w"> </span><span class="err">minutes.</span>
</span><span id="__span-14-24"><span class="w">  </span><span class="err">-q</span><span class="w"> </span><span class="err">QUEUE,</span><span class="w"> </span><span class="err">--queue</span><span class="w"> </span><span class="err">QUEUE</span>
</span><span id="__span-14-25"><span class="w">                        </span><span class="err">AWS</span><span class="w"> </span><span class="err">SQS</span><span class="w"> </span><span class="err">queue</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">queue</span><span class="w"> </span><span class="err">name</span>
</span><span id="__span-14-26"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">derived</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">name.</span>
</span><span id="__span-14-27"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-14-28"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">Defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">LAVA</span>
</span><span id="__span-14-29"><span class="w">                        </span><span class="err">REALM</span><span class="w"> </span><span class="err">environment</span><span class="w"> </span><span class="err">variable.</span><span class="w"> </span><span class="err">A</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span>
</span><span id="__span-14-30"><span class="w">                        </span><span class="err">by</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">these</span><span class="w"> </span><span class="err">mechnisms.</span>
</span><span id="__span-14-31"><span class="w">  </span><span class="err">-w</span><span class="w"> </span><span class="err">WORKER,</span><span class="w"> </span><span class="err">--worker</span><span class="w"> </span><span class="err">WORKER</span>
</span><span id="__span-14-32"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">member</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-14-33"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">realm.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">must</span>
</span><span id="__span-14-34"><span class="w">                        </span><span class="err">match</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">specification.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span>
</span><span id="__span-14-35"><span class="w">                        </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">correct</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">looked</span><span class="w"> </span><span class="err">up</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-14-36"><span class="w">                        </span><span class="err">jobs</span><span class="w"> </span><span class="err">table.</span>
</span><span id="__span-14-37">
</span><span id="__span-14-38"><span class="err">job</span><span class="w"> </span><span class="err">options:</span>
</span><span id="__span-14-39"><span class="w">  </span><span class="err">-g</span><span class="w"> </span><span class="err">name=VALUE,</span><span class="w"> </span><span class="err">--global</span><span class="w"> </span><span class="err">name=VALUE</span>
</span><span id="__span-14-40"><span class="w">                        </span><span class="err">Additional</span><span class="w"> </span><span class="err">global</span><span class="w"> </span><span class="err">attribute</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">job</span>
</span><span id="__span-14-41"><span class="w">                        </span><span class="err">dispatch</span><span class="w"> </span><span class="err">event.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">option</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span>
</span><span id="__span-14-42"><span class="w">                        </span><span class="err">times.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">global</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">contain</span><span class="w"> </span><span class="err">dots,</span><span class="w"> </span><span class="err">they</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span>
</span><span id="__span-14-43"><span class="w">                        </span><span class="err">converted</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">hierachy</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">dots</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">level</span>
</span><span id="__span-14-44"><span class="w">                        </span><span class="err">separators.</span>
</span><span id="__span-14-45"><span class="w">  </span><span class="err">-p</span><span class="w"> </span><span class="err">name=VALUE,</span><span class="w"> </span><span class="err">--param</span><span class="w"> </span><span class="err">name=VALUE</span>
</span><span id="__span-14-46"><span class="w">                        </span><span class="err">Additional</span><span class="w"> </span><span class="err">parameter</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">dispatch</span>
</span><span id="__span-14-47"><span class="w">                        </span><span class="err">event.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">option</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span><span class="w"> </span><span class="err">If</span>
</span><span id="__span-14-48"><span class="w">                        </span><span class="err">parameter</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">contain</span><span class="w"> </span><span class="err">dots,</span><span class="w"> </span><span class="err">they</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">converted</span>
</span><span id="__span-14-49"><span class="w">                        </span><span class="err">into</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">hierarchy</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">dots</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">separators.</span>
</span><span id="__span-14-50"><span class="w">  </span><span class="err">job-id</span><span class="w">                </span><span class="err">One</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">IDs</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">realm.</span>
</span><span id="__span-14-51">
</span><span id="__span-14-52"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-14-53"><span class="w">  </span><span class="err">-c,</span><span class="w"> </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-14-54"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-14-55"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-14-56"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-14-57"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-14-58"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-14-59"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-14-60"><span class="w">  </span><span class="err">--log-json</span><span class="w">            </span><span class="err">Log</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">format.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">particularly</span>
</span><span id="__span-14-61"><span class="w">                        </span><span class="err">useful</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">end</span><span class="w"> </span><span class="err">up</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">CloudWatch</span><span class="w"> </span><span class="err">logs</span><span class="w"> </span><span class="err">as</span>
</span><span id="__span-14-62"><span class="w">                        </span><span class="err">it</span><span class="w"> </span><span class="err">simplifies</span><span class="w"> </span><span class="err">searching.</span>
</span><span id="__span-14-63"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-14-64"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-14-65"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-14-66"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-14-67"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-dispatcher.</span>
</span></code></pre></div>
</details>
<p>See also <a href="05-job-dispatch.html#the-lava-dispatch-process">The Lava Dispatch Process</a>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To enable JSON format logging when performing scheduled dispatches, add
<code>--log-json</code> to the <code>args</code> parameter in the <a href="06-jobs-job-types.html#job-type-lavasched">lavasched</a>
jobs.</p>
</div>
<h2 id="lava-dump-utility">Lava Dump Utility<a class="headerlink" href="#lava-dump-utility" title="Permanent link">&para;</a></h2>
<p><strong>Lava-dump</strong> performs a bulk extract of data from a single table to a local
directory. It can extract all entries with keys that match any of a list of GLOB
style patterns. By default, all entries are extracted.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-15-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-dump</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-d</span><span class="w"> </span><span class="err">DIR]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-i]</span><span class="w"> </span><span class="err">[-n]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-q]</span>
</span><span id="__span-15-2"><span class="w">                 </span><span class="err">[-t</span><span class="w"> </span><span class="err">TABLE]</span><span class="w"> </span><span class="err">[-y]</span>
</span><span id="__span-15-3"><span class="w">                 </span><span class="err">[glob-pattern</span><span class="w"> </span><span class="err">[glob-pattern</span><span class="w"> </span><span class="err">...]]</span>
</span><span id="__span-15-4">
</span><span id="__span-15-5"><span class="err">Extract</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">configurations</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">DynamoDB</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">dump</span><span class="w"> </span><span class="err">them</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">files.</span>
</span><span id="__span-15-6">
</span><span id="__span-15-7"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-15-8"><span class="w">  </span><span class="err">glob-pattern</span><span class="w">          </span><span class="err">Only</span><span class="w"> </span><span class="err">extract</span><span class="w"> </span><span class="err">items</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">keys</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">match</span><span class="w"> </span><span class="err">any</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-15-9"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">glob</span><span class="w"> </span><span class="err">style</span><span class="w"> </span><span class="err">patterns.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">test</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">inverted</span><span class="w"> </span><span class="err">by</span>
</span><span id="__span-15-10"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">-n</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--not-match</span><span class="w"> </span><span class="err">option.</span>
</span><span id="__span-15-11">
</span><span id="__span-15-12"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-15-13"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-15-14"><span class="w">  </span><span class="err">-d</span><span class="w"> </span><span class="err">DIR,</span><span class="w"> </span><span class="err">--dir</span><span class="w"> </span><span class="err">DIR</span><span class="w">     </span><span class="err">Store</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">directory,</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span>
</span><span id="__span-15-15"><span class="w">                        </span><span class="err">created</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">does</span><span class="w"> </span><span class="err">npt</span><span class="w"> </span><span class="err">exist.</span><span class="w"> </span><span class="err">Defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">current</span>
</span><span id="__span-15-16"><span class="w">                        </span><span class="err">directory.</span>
</span><span id="__span-15-17"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-15-18"><span class="w">  </span><span class="err">-i,</span><span class="w"> </span><span class="err">--ignore-case</span><span class="w">     </span><span class="err">Matching</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">case</span><span class="w"> </span><span class="err">insensitive.</span>
</span><span id="__span-15-19"><span class="w">  </span><span class="err">-n,</span><span class="w"> </span><span class="err">--not-match</span><span class="w">       </span><span class="err">Only</span><span class="w"> </span><span class="err">extract</span><span class="w"> </span><span class="err">items</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">keys</span><span class="w"> </span><span class="err">thay</span><span class="w"> </span><span class="err">do</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">match</span><span class="w"> </span><span class="err">any</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-15-20"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">glob</span><span class="w"> </span><span class="err">patterns.</span>
</span><span id="__span-15-21"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-15-22"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">required</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">tables</span>
</span><span id="__span-15-23"><span class="w">                        </span><span class="err">except</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">realms</span><span class="w"> </span><span class="err">table.</span>
</span><span id="__span-15-24"><span class="w">  </span><span class="err">-q,</span><span class="w"> </span><span class="err">--quiet</span><span class="w">           </span><span class="err">Quiet</span><span class="w"> </span><span class="err">mode.</span>
</span><span id="__span-15-25"><span class="w">  </span><span class="err">-t</span><span class="w"> </span><span class="err">TABLE,</span><span class="w"> </span><span class="err">--table</span><span class="w"> </span><span class="err">TABLE</span>
</span><span id="__span-15-26"><span class="w">                        </span><span class="err">Extract</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">table.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-15-27"><span class="w">                        </span><span class="err">jobs,</span><span class="w"> </span><span class="err">connections,</span><span class="w"> </span><span class="err">s3triggers</span><span class="w"> </span><span class="err">(or</span><span class="w"> </span><span class="err">triggers)</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">realms.</span>
</span><span id="__span-15-28"><span class="w">                        </span><span class="err">Any</span><span class="w"> </span><span class="err">unique</span><span class="w"> </span><span class="err">initial</span><span class="w"> </span><span class="err">sequence</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">accepted.</span>
</span><span id="__span-15-29"><span class="w">  </span><span class="err">-y,</span><span class="w"> </span><span class="err">--yaml</span><span class="w">            </span><span class="err">Dump</span><span class="w"> </span><span class="err">items</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">YAML</span><span class="w"> </span><span class="err">format.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">JSON.</span>
</span></code></pre></div>
</details>
<p>As well as being useful for backup, it is also useful for importing existing
items into the <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a>.</p>
<p>See also <a href="#lava-backup-utility">lava-backup</a>.</p>
<h2 id="lava-email-utility">Lava Email Utility<a class="headerlink" href="#lava-email-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-email</strong> utility uses the lava <a href="07-connectors.html#connector-type-email">email</a>
connector to send emails.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-16-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-email</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">CONN_ID</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span>
</span><span id="__span-16-2"><span class="w">                  </span><span class="err">[-a</span><span class="w"> </span><span class="err">FILE]</span><span class="w"> </span><span class="err">[--bcc</span><span class="w"> </span><span class="err">EMAIL]</span><span class="w"> </span><span class="err">[--cc</span><span class="w"> </span><span class="err">EMAIL]</span><span class="w"> </span><span class="err">[--from</span><span class="w"> </span><span class="err">EMAIL]</span>
</span><span id="__span-16-3"><span class="w">                  </span><span class="err">[--reply-to</span><span class="w"> </span><span class="err">EMAIL]</span><span class="w"> </span><span class="err">[--to</span><span class="w"> </span><span class="err">EMAIL]</span><span class="w"> </span><span class="err">-s</span><span class="w"> </span><span class="err">SUBJECT</span><span class="w"> </span><span class="err">[--html</span><span class="w"> </span><span class="err">FILENAME]</span>
</span><span id="__span-16-4"><span class="w">                  </span><span class="err">[--text</span><span class="w"> </span><span class="err">FILENAME]</span><span class="w"> </span><span class="err">[--no-colour]</span><span class="w"> </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span>
</span><span id="__span-16-5"><span class="w">                  </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span>
</span><span id="__span-16-6"><span class="w">                  </span><span class="err">[FILENAME]</span>
</span><span id="__span-16-7">
</span><span id="__span-16-8"><span class="err">Send</span><span class="w"> </span><span class="err">email</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">email</span><span class="w"> </span><span class="err">connections.</span>
</span><span id="__span-16-9">
</span><span id="__span-16-10"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-16-11"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-16-12"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-16-13"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-16-14">
</span><span id="__span-16-15"><span class="err">lava</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-16-16"><span class="w">  </span><span class="err">-c</span><span class="w"> </span><span class="err">CONN_ID,</span><span class="w"> </span><span class="err">--conn-id</span><span class="w"> </span><span class="err">CONN_ID</span>
</span><span id="__span-16-17"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">connection</span><span class="w"> </span><span class="err">ID.</span><span class="w"> </span><span class="err">Required.</span>
</span><span id="__span-16-18"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-16-19"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-16-20"><span class="w">                        </span><span class="err">variable</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set.</span>
</span><span id="__span-16-21">
</span><span id="__span-16-22"><span class="err">email</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-16-23"><span class="w">  </span><span class="err">-a</span><span class="w"> </span><span class="err">FILE,</span><span class="w"> </span><span class="err">--attach</span><span class="w"> </span><span class="err">FILE</span>
</span><span id="__span-16-24"><span class="w">                        </span><span class="err">Add</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">attachment.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-16-25"><span class="w">                        </span><span class="err">local</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">S3</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">form</span>
</span><span id="__span-16-26"><span class="w">                        </span><span class="err">s3://bucket/key.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span>
</span><span id="__span-16-27"><span class="w">  </span><span class="err">--bcc</span><span class="w"> </span><span class="err">EMAIL</span><span class="w">           </span><span class="err">Recipients</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">place</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">Bcc:</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message.</span>
</span><span id="__span-16-28"><span class="w">                        </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span>
</span><span id="__span-16-29"><span class="w">  </span><span class="err">--cc</span><span class="w"> </span><span class="err">EMAIL</span><span class="w">            </span><span class="err">Recipients</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">place</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">Cc:</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message.</span>
</span><span id="__span-16-30"><span class="w">                        </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span>
</span><span id="__span-16-31"><span class="w">  </span><span class="err">--from</span><span class="w"> </span><span class="err">EMAIL</span><span class="w">          </span><span class="err">Message</span><span class="w"> </span><span class="err">sender.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span>
</span><span id="__span-16-32"><span class="w">                        </span><span class="err">available</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">connection</span><span class="w"> </span><span class="err">specification</span><span class="w"> </span><span class="err">or</span>
</span><span id="__span-16-33"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">specification.</span>
</span><span id="__span-16-34"><span class="w">  </span><span class="err">--reply-to</span><span class="w"> </span><span class="err">EMAIL</span><span class="w">      </span><span class="err">Reply-to</span><span class="w"> </span><span class="err">address</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span>
</span><span id="__span-16-35"><span class="w">                        </span><span class="err">times.</span>
</span><span id="__span-16-36"><span class="w">  </span><span class="err">--to</span><span class="w"> </span><span class="err">EMAIL</span><span class="w">            </span><span class="err">Recipients</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">place</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">To:</span><span class="w"> </span><span class="err">line</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message.</span>
</span><span id="__span-16-37"><span class="w">                        </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span>
</span><span id="__span-16-38"><span class="w">  </span><span class="err">-s</span><span class="w"> </span><span class="err">SUBJECT,</span><span class="w"> </span><span class="err">--subject</span><span class="w"> </span><span class="err">SUBJECT</span>
</span><span id="__span-16-39"><span class="w">                        </span><span class="err">Message</span><span class="w"> </span><span class="err">subject.</span><span class="w"> </span><span class="err">Required.</span>
</span><span id="__span-16-40">
</span><span id="__span-16-41"><span class="err">message</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-16-42"><span class="w">  </span><span class="err">At</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">following</span><span class="w"> </span><span class="err">arguments</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">permitted.</span>
</span><span id="__span-16-43">
</span><span id="__span-16-44"><span class="w">  </span><span class="err">--html</span><span class="w"> </span><span class="err">FILENAME</span><span class="w">       </span><span class="err">This</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">legacy</span><span class="w"> </span><span class="err">argument</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">backward</span><span class="w"> </span><span class="err">compatibility.</span>
</span><span id="__span-16-45"><span class="w">  </span><span class="err">--text</span><span class="w"> </span><span class="err">FILENAME</span><span class="w">       </span><span class="err">This</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">legacy</span><span class="w"> </span><span class="err">argument</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">backward</span><span class="w"> </span><span class="err">compatibility.</span>
</span><span id="__span-16-46"><span class="w">  </span><span class="err">FILENAME</span><span class="w">              </span><span class="err">Name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">containing</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">body.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span>
</span><span id="__span-16-47"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">&quot;-&quot;,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">body</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">read</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">stdin.</span><span class="w"> </span><span class="err">An</span>
</span><span id="__span-16-48"><span class="w">                        </span><span class="err">attempt</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">made</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">determine</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">HTML</span>
</span><span id="__span-16-49"><span class="w">                        </span><span class="err">and</span><span class="w"> </span><span class="err">send</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">accordingly.</span><span class="w"> </span><span class="err">Only</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">first</span><span class="w"> </span><span class="err">2MB</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">read.</span>
</span><span id="__span-16-50">
</span><span id="__span-16-51"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-16-52"><span class="w">  </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-16-53"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-16-54"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-16-55"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-16-56"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-16-57"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-16-58"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-16-59"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-16-60"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-16-61"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-16-62"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-16-63"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-email.</span>
</span></code></pre></div>
</details>
<h2 id="lava-job-activity-utility">Lava Job Activity Utility<a class="headerlink" href="#lava-job-activity-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-job-activity</strong> utility queries the realm
<a href="04-dynamodb-tables.html#the-events-table">events table</a> to generate an activity map of specified jobs
over a defined time period. This is useful to see when specified jobs are
running, particularly for event triggered jobs.</p>
<details class="usage">
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-17-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-job-activity</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-q]</span><span class="w"> </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM</span><span class="w"> </span><span class="err">[-s</span><span class="w"> </span><span class="err">START_DTZ]</span>
</span><span id="__span-17-2"><span class="w">                         </span><span class="err">[-e</span><span class="w"> </span><span class="err">END_DTZ]</span><span class="w"> </span><span class="err">[--status</span><span class="w"> </span><span class="err">STATUS]</span><span class="w"> </span><span class="err">[--dump</span><span class="w"> </span><span class="err">FILE]</span>
</span><span id="__span-17-3"><span class="w">                         </span><span class="err">[--load</span><span class="w"> </span><span class="err">FILE]</span><span class="w"> </span><span class="err">[-i</span><span class="w"> </span><span class="err">MINUTES]</span>
</span><span id="__span-17-4"><span class="w">                         </span><span class="err">[job-id</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-17-5">
</span><span id="__span-17-6"><span class="err">Lava</span><span class="w"> </span><span class="err">event</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">query</span><span class="w"> </span><span class="err">utility</span>
</span><span id="__span-17-7">
</span><span id="__span-17-8"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-17-9"><span class="w">  </span><span class="err">job-id</span><span class="w">                </span><span class="err">Retrieve</span><span class="w"> </span><span class="err">records</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">job-id.</span><span class="w"> </span><span class="err">Required</span>
</span><span id="__span-17-10"><span class="w">                        </span><span class="err">unless</span><span class="w"> </span><span class="err">--load</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">used.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">--load,</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">acts</span>
</span><span id="__span-17-11"><span class="w">                        </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">further</span><span class="w"> </span><span class="err">filter</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">event</span><span class="w"> </span><span class="err">records</span><span class="w"> </span><span class="err">loaded</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-17-12"><span class="w">                        </span><span class="err">dump</span><span class="w"> </span><span class="err">file.</span>
</span><span id="__span-17-13">
</span><span id="__span-17-14"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-17-15"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-17-16"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-17-17"><span class="w">  </span><span class="err">-q,</span><span class="w"> </span><span class="err">--quiet</span><span class="w">           </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">print</span><span class="w"> </span><span class="err">progress</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">stderr.</span>
</span><span id="__span-17-18"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-17-19"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span>
</span><span id="__span-17-20">
</span><span id="__span-17-21"><span class="err">query</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-17-22"><span class="w">  </span><span class="err">-s</span><span class="w"> </span><span class="err">START_DTZ,</span><span class="w"> </span><span class="err">--start</span><span class="w"> </span><span class="err">START_DTZ</span>
</span><span id="__span-17-23"><span class="w">                        </span><span class="err">Start</span><span class="w"> </span><span class="err">datetime.</span><span class="w"> </span><span class="err">Preferred</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">ISO</span><span class="w"> </span><span class="err">8601.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-17-24"><span class="w">                        </span><span class="err">timezone</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">UTC</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">assumed.</span><span class="w"> </span><span class="err">When</span><span class="w"> </span><span class="err">using</span>
</span><span id="__span-17-25"><span class="w">                        </span><span class="err">--load,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">file.</span>
</span><span id="__span-17-26"><span class="w">                        </span><span class="err">Otherwise,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">recent</span><span class="w"> </span><span class="err">midnight</span>
</span><span id="__span-17-27"><span class="w">                        </span><span class="err">(UTC).</span>
</span><span id="__span-17-28"><span class="w">  </span><span class="err">-e</span><span class="w"> </span><span class="err">END_DTZ,</span><span class="w"> </span><span class="err">--end</span><span class="w"> </span><span class="err">END_DTZ</span>
</span><span id="__span-17-29"><span class="w">                        </span><span class="err">End</span><span class="w"> </span><span class="err">datetime.</span><span class="w"> </span><span class="err">Preferred</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">ISO</span><span class="w"> </span><span class="err">8601.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-17-30"><span class="w">                        </span><span class="err">timezone</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">UTC</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">assumed.</span><span class="w"> </span><span class="err">When</span><span class="w"> </span><span class="err">using</span>
</span><span id="__span-17-31"><span class="w">                        </span><span class="err">--load,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">file.</span>
</span><span id="__span-17-32"><span class="w">                        </span><span class="err">Otherwise</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">24</span><span class="w"> </span><span class="err">hours</span><span class="w"> </span><span class="err">after</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">start</span>
</span><span id="__span-17-33"><span class="w">                        </span><span class="err">time.</span>
</span><span id="__span-17-34"><span class="w">  </span><span class="err">--status</span><span class="w"> </span><span class="err">STATUS</span><span class="w">       </span><span class="err">Only</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">events</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">status.</span>
</span><span id="__span-17-35">
</span><span id="__span-17-36"><span class="err">dump</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">load</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-17-37"><span class="w">  </span><span class="err">--dump</span><span class="w"> </span><span class="err">FILE</span><span class="w">           </span><span class="err">Dump</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">raw</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">JSON</span>
</span><span id="__span-17-38"><span class="w">                        </span><span class="err">format.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">suitable</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">loading</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-17-39"><span class="w">                        </span><span class="err">--load</span><span class="w"> </span><span class="err">option.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">both</span><span class="w"> </span><span class="err">--load</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">--store</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">used,</span>
</span><span id="__span-17-40"><span class="w">                        </span><span class="err">they</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">different</span><span class="w"> </span><span class="err">files.</span>
</span><span id="__span-17-41"><span class="w">  </span><span class="err">--load</span><span class="w"> </span><span class="err">FILE</span><span class="w">           </span><span class="err">Load</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">raw</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">instead</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-17-42"><span class="w">                        </span><span class="err">reading</span><span class="w"> </span><span class="err">it</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">DynamoDB.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">have</span><span class="w"> </span><span class="err">been</span>
</span><span id="__span-17-43"><span class="w">                        </span><span class="err">produced</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">previous</span><span class="w"> </span><span class="err">run</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">--dump</span><span class="w"> </span><span class="err">option.</span>
</span><span id="__span-17-44"><span class="w">                        </span><span class="err">This</span><span class="w"> </span><span class="err">allows</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">set</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">data</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">reprocessed</span><span class="w"> </span><span class="err">without</span>
</span><span id="__span-17-45"><span class="w">                        </span><span class="err">re-extracting</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">same</span><span class="w"> </span><span class="err">data.</span>
</span><span id="__span-17-46">
</span><span id="__span-17-47"><span class="err">output</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-17-48"><span class="w">  </span><span class="err">-i</span><span class="w"> </span><span class="err">MINUTES,</span><span class="w"> </span><span class="err">--interval</span><span class="w"> </span><span class="err">MINUTES</span>
</span><span id="__span-17-49"><span class="w">                        </span><span class="err">Aggregate</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">activity</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">intervals</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span>
</span><span id="__span-17-50"><span class="w">                        </span><span class="err">duration</span><span class="w"> </span><span class="err">(minutes).</span><span class="w"> </span><span class="err">Stick</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">divisors</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">multiples</span><span class="w"> </span><span class="err">of</span>
</span><span id="__span-17-51"><span class="w">                        </span><span class="err">60.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">10.</span>
</span></code></pre></div>
</details>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See also <a href="#lava-conn-usage-utility">Lava-conn-usage Utility</a>.</p>
</div>
<p>The process of extracting data from the events table can be expensive in usage
of DynamoDB table read capacity. Hence the extraction process has two
optimisations:</p>
<ol>
<li>
<p>Specific job IDs must be requested. This enables full table scans to be
    avoided on the, often large, <a href="04-dynamodb-tables.html#the-events-table">events table</a>.</p>
</li>
<li>
<p>The extracted event data can be stored in a JSON formatted <em>dump</em> file. This
    file can be read back in subsequent runs of the utility to alter other
    parameters, such as the aggregation granularity. See the <strong>--dump</strong> and
    <strong>--load</strong> arguments.</p>
</li>
</ol>
<p>The output to stdout is a CSV file containing two tables:</p>
<ol>
<li>
<p>Run-seconds per time-slice by job ID</p>
</li>
<li>
<p>Run-seconds per time-slice by lava worker.</p>
</li>
</ol>
<p>For example, the following command will extract the data for a given day and
job ID. The output CSV will have activity sliced into 10 minute blocks. The raw
data is retained for further analysis:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1">lava-job-activity<span class="w"> </span>-r<span class="w"> </span>my-realm<span class="w"> </span>--start<span class="w"> </span><span class="m">2024</span>-02-15T00:00:00+11:00<span class="w"> </span><span class="se">\</span>
</span><span id="__span-18-2"><span class="w">    </span>--dump<span class="w"> </span>evdata.json<span class="w"> </span>job-id<span class="w"> </span>&gt;<span class="w"> </span>job-10.csv
</span></code></pre></div>
<p>Each time-slice column in the output CSV will indicate for how many seconds that
job run within that time-slice (i.e. <em>run seconds</em>). This can be greater than
the number of seconds in the time-slice if the job ran more than once in that
slice.</p>
<p>The extracted data can be reprocessed into 4 hour time-slices by reusing the
dump file thus:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1">lava-job-activity<span class="w"> </span>-r<span class="w"> </span>my-realm<span class="w"> </span>--start<span class="w"> </span><span class="m">2024</span>-02-15T00:00:00+11:00<span class="w"> </span><span class="se">\</span>
</span><span id="__span-19-2"><span class="w">    </span>--dump<span class="w"> </span>evdata.json<span class="w"> </span>--interval<span class="w"> </span><span class="m">240</span><span class="w"> </span>job-id<span class="w"> </span>&gt;<span class="w"> </span>job-240.csv
</span></code></pre></div>
<p>The CSV file will contain information something like this:</p>
<table>
<thead>
<tr>
<th>Job ID</th>
<th style="text-align: right;">15/2/2024 0:00</th>
<th style="text-align: right;">15/2/2024 4:00</th>
<th style="text-align: right;">15/2/2024 8:00</th>
<th style="text-align: right;">15/2/2024 12:00</th>
<th style="text-align: right;">15/2/2024 16:00</th>
<th style="text-align: right;">15/2/2024 20:00</th>
</tr>
</thead>
<tbody>
<tr>
<td>job-id</td>
<td style="text-align: right;">288</td>
<td style="text-align: right;">348</td>
<td style="text-align: right;">376</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">287</td>
<td style="text-align: right;">344</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Worker</th>
<th style="text-align: right;">15/2/2024 0:00</th>
<th style="text-align: right;">15/2/2024 4:00</th>
<th style="text-align: right;">15/2/2024 8:00</th>
<th style="text-align: right;">15/2/2024 12:00</th>
<th style="text-align: right;">15/2/2024 16:00</th>
<th style="text-align: right;">15/2/2024 20:00</th>
</tr>
</thead>
<tbody>
<tr>
<td>core</td>
<td style="text-align: right;">288</td>
<td style="text-align: right;">348</td>
<td style="text-align: right;">376</td>
<td style="text-align: right;">335</td>
<td style="text-align: right;">287</td>
<td style="text-align: right;">344</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>It is important to keep and re-use dump files where possible, particularly
when extracting data for a large number of job IDs. However, the dump file
will only contain raw event data requested for the initial set of job IDs
and time window. It is not possible to reuse data that wasn't extracted in
the first place.</p>
</div>
<h3 id="estimating-lava-load-on-a-connection">Estimating Lava Load on a Connection<a class="headerlink" href="#estimating-lava-load-on-a-connection" title="Permanent link">&para;</a></h3>
<p>Sometimes it's useful to estimate how much load lava is placing on a particular
resource (such as a database) over a defined time window. This can be done by
combining the <strong>lava-job-activity</strong> and <a href="#lava-conn-usage-utility">lava-conn-usage</a>
utilities.</p>
<p>The following example will produce the time-slice view described above for all
jobs that reference connectors with IDs starting with <code>redshift</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1">lava-job-activity<span class="w"> </span>-r<span class="w"> </span>my-realm<span class="w"> </span>--start<span class="w"> </span><span class="m">2024</span>-02-15T00:00:00+11:00<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-2"><span class="w">    </span>--dump<span class="w"> </span>evdata.json<span class="w"> </span><span class="se">\</span>
</span><span id="__span-20-3"><span class="w">    </span><span class="k">$(</span>lava-conn-usage<span class="w"> </span>-r<span class="w"> </span>my-realm<span class="w"> </span><span class="s1">&#39;redshift*&#39;</span><span class="k">)</span><span class="w"> </span>&gt;<span class="w"> </span>conn-activity.csv
</span></code></pre></div>
<p>Note that this does not mean the connection was in active use at all times in
the activity window. Lava has no way of knowing that. It does give a proxy view
of load intensity.</p>
<h2 id="lava-new-utility">Lava-new Utility<a class="headerlink" href="#lava-new-utility" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>New in v8.2 (Klauea).</p>
</div>
<p>The <strong>lava-new</strong> utility is used to create a new
<a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a> project.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-21-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-new</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">[--no-input]</span><span class="w"> </span><span class="err">[-p</span><span class="w"> </span><span class="err">KEY=VALUE]</span><span class="w"> </span><span class="err">directory</span>
</span><span id="__span-21-2">
</span><span id="__span-21-3"><span class="err">Create</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">job</span><span class="w"> </span><span class="err">framework</span><span class="w"> </span><span class="err">project.</span>
</span><span id="__span-21-4">
</span><span id="__span-21-5"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-21-6"><span class="w">  </span><span class="err">directory</span><span class="w">             </span><span class="err">Create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">template</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">directory</span>
</span><span id="__span-21-7"><span class="w">                        </span><span class="err">(which</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">already</span><span class="w"> </span><span class="err">exist).</span>
</span><span id="__span-21-8">
</span><span id="__span-21-9"><span class="err">options:</span>
</span><span id="__span-21-10"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-21-11"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-21-12"><span class="w">  </span><span class="err">--no-input</span><span class="w">            </span><span class="err">Do</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">prompt</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">input.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">-p</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--param</span><span class="w"> </span><span class="err">option</span>
</span><span id="__span-21-13"><span class="w">                        </span><span class="err">should</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">specify</span><span class="w"> </span><span class="err">parameter</span><span class="w"> </span><span class="err">values.</span>
</span><span id="__span-21-14"><span class="w">  </span><span class="err">-p</span><span class="w"> </span><span class="err">KEY=VALUE,</span><span class="w"> </span><span class="err">--param</span><span class="w"> </span><span class="err">KEY=VALUE</span>
</span><span id="__span-21-15"><span class="w">                        </span><span class="err">Specify</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">parameters</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">underlying</span>
</span><span id="__span-21-16"><span class="w">                        </span><span class="err">cookiecutter</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">create</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">project.</span><span class="w"> </span><span class="err">Can</span>
</span><span id="__span-21-17"><span class="w">                        </span><span class="err">be</span><span class="w"> </span><span class="err">used</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">times.</span><span class="w"> </span><span class="err">Available</span><span class="w"> </span><span class="err">parameters</span><span class="w"> </span><span class="err">are</span>
</span><span id="__span-21-18"><span class="w">                        </span><span class="err">config_checks,</span><span class="w"> </span><span class="err">description,</span><span class="w"> </span><span class="err">docker_platform,</span>
</span><span id="__span-21-19"><span class="w">                        </span><span class="err">docker_prefix,</span><span class="w"> </span><span class="err">environment,</span><span class="w"> </span><span class="err">git_setup,</span>
</span><span id="__span-21-20"><span class="w">                        </span><span class="err">include_lava_libs,</span><span class="w"> </span><span class="err">job_prefix,</span><span class="w"> </span><span class="err">jupyter_support,</span><span class="w"> </span><span class="err">owner,</span>
</span><span id="__span-21-21"><span class="w">                        </span><span class="err">payload_prefix,</span><span class="w"> </span><span class="err">pip_index_url,</span><span class="w"> </span><span class="err">project_dir,</span>
</span><span id="__span-21-22"><span class="w">                        </span><span class="err">project_name,</span><span class="w"> </span><span class="err">realm,</span><span class="w"> </span><span class="err">rule_prefix,</span><span class="w"> </span><span class="err">s3trigger_prefix.</span>
</span></code></pre></div>
</details>
<h2 id="lava-schema-utility">Lava Schema Utility<a class="headerlink" href="#lava-schema-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-schema</strong> utility performs deep schema validation for lava DynamoDB
specification objects.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-22-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-schema.py</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-d]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-s</span><span class="w"> </span><span class="err">DIRNAME]</span>
</span><span id="__span-22-2"><span class="w">                      </span><span class="err">[-t</span><span class="w"> </span><span class="err">{job,s3trigger,connection}]</span><span class="w"> </span><span class="err">[-v]</span>
</span><span id="__span-22-3"><span class="w">                      </span><span class="err">[SPEC</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-22-4">
</span><span id="__span-22-5"><span class="err">Deep</span><span class="w"> </span><span class="err">schema</span><span class="w"> </span><span class="err">validation</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">DynamoDB</span><span class="w"> </span><span class="err">specification</span><span class="w"> </span><span class="err">objects.</span>
</span><span id="__span-22-6">
</span><span id="__span-22-7"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-22-8"><span class="w">  </span><span class="err">SPEC</span><span class="w">                  </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">read</span><span class="w"> </span><span class="err">directly</span><span class="w"> </span><span class="err">from</span>
</span><span id="__span-22-9"><span class="w">                        </span><span class="err">DynamoDB</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">any</span><span class="w"> </span><span class="err">SPEC</span><span class="w"> </span><span class="err">arguments</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">treated</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">GLOB</span><span class="w"> </span><span class="err">style</span>
</span><span id="__span-22-10"><span class="w">                        </span><span class="err">patterns</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">ID</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">match.</span><span class="w"> </span><span class="err">If</span>
</span><span id="__span-22-11"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">-d</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--dynamodb</span><span class="w"> </span><span class="err">option</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">formatted</span>
</span><span id="__span-22-12"><span class="w">                        </span><span class="err">lava</span><span class="w"> </span><span class="err">object</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">read</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">named</span><span class="w"> </span><span class="err">files.</span>
</span><span id="__span-22-13">
</span><span id="__span-22-14"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-22-15"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-22-16"><span class="w">  </span><span class="err">-d,</span><span class="w"> </span><span class="err">--dynamodb</span><span class="w">        </span><span class="err">Read</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">specifications</span><span class="w"> </span><span class="err">from</span><span class="w"> </span><span class="err">DynamoDB</span><span class="w"> </span><span class="err">instead</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">local</span>
</span><span id="__span-22-17"><span class="w">                        </span><span class="err">file</span><span class="w"> </span><span class="err">system.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">via</span>
</span><span id="__span-22-18"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">-r</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">option</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-22-19"><span class="w">                        </span><span class="err">variable.</span>
</span><span id="__span-22-20"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-22-21"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span><span class="w"> </span><span class="err">variable</span>
</span><span id="__span-22-22"><span class="w">                        </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">used.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">--d</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--dynamodb</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">specified,</span>
</span><span id="__span-22-23"><span class="w">                        </span><span class="err">a</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">these</span><span class="w"> </span><span class="err">mechanisms.</span>
</span><span id="__span-22-24"><span class="w">  </span><span class="err">-s</span><span class="w"> </span><span class="err">DIRNAME,</span><span class="w"> </span><span class="err">--schema-dir</span><span class="w"> </span><span class="err">DIRNAME</span>
</span><span id="__span-22-25"><span class="w">                        </span><span class="err">Directory</span><span class="w"> </span><span class="err">containing</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">schema</span><span class="w"> </span><span class="err">specifications.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-22-26"><span class="w">                        </span><span class="err">/usr/local/lib/lava/lava/lib/schema.</span>
</span><span id="__span-22-27"><span class="w">  </span><span class="err">-t</span><span class="w"> </span><span class="err">{job,s3trigger,connection},</span><span class="w"> </span><span class="err">--type</span><span class="w"> </span><span class="err">{job,s3trigger,connection}</span>
</span><span id="__span-22-28"><span class="w">                        </span><span class="err">Use</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">schema</span><span class="w"> </span><span class="err">appropriate</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">object</span>
</span><span id="__span-22-29"><span class="w">                        </span><span class="err">type.</span><span class="w"> </span><span class="err">Options</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">job,</span><span class="w"> </span><span class="err">s3trigger,</span><span class="w"> </span><span class="err">connection.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-22-30"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">job.</span>
</span><span id="__span-22-31"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--verbose</span><span class="w">         </span><span class="err">Print</span><span class="w"> </span><span class="err">results</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">specifications.</span><span class="w"> </span><span class="err">By</span><span class="w"> </span><span class="err">default,</span><span class="w"> </span><span class="err">only</span>
</span><span id="__span-22-32"><span class="w">                        </span><span class="err">validation</span><span class="w"> </span><span class="err">failures</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">printed.</span>
</span></code></pre></div>
</details>
<p><strong>Lava-schema</strong> can read specifications directly from DynamoDB or from the local
file system. The latter is useful to check the install components produced in
the <code>dist</code> directory by a <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a> project.</p>
<p>Whereas <a href="#lava-check-utility">lava-check</a> is focused on basic configuration
management hygiene, <strong>lava-schema</strong> is focused on strict compliance with
lava <a href="04-dynamodb-tables.html#dynamodb-tables">DynamoDB table specifications</a> using detailed
<a href="https://json-schema.org">JSON Schema</a> specifications. (They may merge at some
point.)</p>
<h3 id="lava-schema-vs-lava-worker-validation">Lava-schema vs Lava Worker Validation<a class="headerlink" href="#lava-schema-vs-lava-worker-validation" title="Permanent link">&para;</a></h3>
<p>As of v7.1.0 (Pichincha), deep schema validation only manifests in the
<strong>lava-schema</strong> utility. The lava worker doesn't use this. Instead, it uses
its traditional process of checking just enough to validate that it
can try to run the job.</p>
<p>This will change in a future release and the worker will also perform deep
schema validation of the fully resolved <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job
specification</a> and the other <a href="04-dynamodb-tables.html#dynamodb-tables">DynamoDB object
types</a> at run-time. Malformed jobs that could run under the
current validation process will be rejected outright.</p>
<div class="admonition note">
<p class="admonition-title">I'm from the Government and I'm here to help you.</p>
</div>
<p>Commonly observed configuration errors that the lava worker will tolerate but
<strong>lava-schema</strong> will not include:</p>
<ul>
<li>
<p><strong>Malformed action specifications</strong>  <br />
    These don't prevent the job from running but the malformed actions will
    fail, potentially causing operational issues or unreported errors.</p>
</li>
<li>
<p><strong>Optional fields in the wrong place</strong>  <br />
    For example, the <code>timeout</code> parameter of <a href="06-jobs-job-types.html#job-type-exe">exe</a> jobs
    occasionally pops up at the top level of the job specification instead of
    within the job <code>parameters</code>. The lava worker will silently ignore the
    incorrectly placed <code>timeout</code> and do its best to run the job -- with the
    default timeout.</p>
</li>
<li>
<p><strong>Imaginary fields</strong>  <br />
    For example, the <a href="06-jobs-job-types.html#job-type-sqlc">sqlc</a> and <a href="06-jobs-job-types.html#job-type-sqlv">sqlv</a> job types
    support a <code>timeout</code> parameter but the <a href="06-jobs-job-types.html#job-type-sql">sql</a> and
    <a href="06-jobs-job-types.html#job-type-sqli">sqli</a> jobs do not. If a job is migrated between these
    types, it's easy to miss the need to add / remove the <code>timeout</code> parameter.
    The lava worker will happily run the job -- with the default timeout.</p>
</li>
<li>
<p><strong>Incorrect parameter types</strong>  <br />
    For example, the <code>args</code> parameter of the <a href="06-jobs-job-types.html#job-type-exe">exe</a> job type
    expects a list of <em>strings</em> (although numbers are OK also). Booleans
    are not. In a YAML job specification file in a
    <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a> project, it is easy to mix up
    an argument value of <code>true</code> (boolean) with <code>"true"</code> (string). The first one
    will get presented to the job payload at run-time as <code>True</code> and the second
    one will get presented as <code>true</code>. This could be a problem.</p>
</li>
<li>
<p><strong>It will be alright on the night</strong>  <br />
    When the lava worker runs a job, it grabs the job specification from
    DynamoDB and then merges in any parameters received as part of the dispatch
    message to produce the fully resolved
    <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a>. It's
    tempting to leave out of the job specification parameters that are going to
    be replaced at run-time anyway. Problem is, this can make it tricky to work
    out what the job will do just by looking at the job specification.
    <strong>Lava-schema</strong> will complain about this because when it does its static
    analysis, the job is malformed. The lava worker is happy because it gets
    everything required at run-time. DevOps folk are less than pleased with a
    partially specified job in DynamoDB that frustrates attempts to diagnose
    problems.    </p>
<p>It's good practice to include a placeholder in the job specification for
<em>every</em> parameter, global and state item the job requires, even if it's
replaced at run-time.</p>
</li>
</ul>
<h3 id="caveats">Caveats<a class="headerlink" href="#caveats" title="Permanent link">&para;</a></h3>
<p>Because of the way JSON Schema works, some of the error messages that occur when
non-compliance is detected can be rather obscure. It's not uncommon for a
single specification error to generate multiple error messages. Generally, the
error messages give a pretty good indication of what's wrong.</p>
<p>There are, possibly, (rare) occasions when its legitimate for a job
specification in DynamoDB to not comply with lava schema requirements but the
fully resolved <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a>
at run-time does comply.</p>
<p>Did I mention that this is rare?</p>
<p>Trying to think of a situation where this is good design practice ...</p>
<p>Still thinking ...</p>
<h2 id="lava-sql-utility">Lava SQL Utility<a class="headerlink" href="#lava-sql-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-sql</strong> utility provides a simple, uniform CLI across different
database types with connectivity managed by the lava connection subsystem.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-23-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-sql</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">[-a</span><span class="w"> </span><span class="err">NAME]</span><span class="w"> </span><span class="err">[-b</span><span class="w"> </span><span class="err">BATCH_SIZE]</span>
</span><span id="__span-23-2"><span class="w">                </span><span class="err">[--format</span><span class="w"> </span><span class="err">{csv,jsonl,html,parquet}]</span><span class="w"> </span><span class="err">[--header]</span><span class="w"> </span><span class="err">[-o</span><span class="w"> </span><span class="err">FILENAME]</span>
</span><span id="__span-23-3"><span class="w">                </span><span class="err">[--raw]</span><span class="w"> </span><span class="err">[--transaction]</span><span class="w"> </span><span class="err">-c</span><span class="w"> </span><span class="err">CONN_ID</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[--no-colour]</span>
</span><span id="__span-23-4"><span class="w">                </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span><span class="w"> </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span><span class="w"> </span><span class="err">[--delimiter</span><span class="w"> </span><span class="err">CHAR]</span>
</span><span id="__span-23-5"><span class="w">                </span><span class="err">[--dialect</span><span class="w"> </span><span class="err">{excel,excel-tab,unix}]</span><span class="w"> </span><span class="err">[--doublequote]</span>
</span><span id="__span-23-6"><span class="w">                </span><span class="err">[--escapechar</span><span class="w"> </span><span class="err">CHAR]</span><span class="w"> </span><span class="err">[--quotechar</span><span class="w"> </span><span class="err">CHAR]</span><span class="w"> </span><span class="err">[--quoting</span><span class="w"> </span><span class="err">QUOTING]</span>
</span><span id="__span-23-7"><span class="w">                </span><span class="err">[--sort-keys]</span>
</span><span id="__span-23-8"><span class="w">                </span><span class="err">[SQL-FILE</span><span class="w"> </span><span class="err">...]</span>
</span><span id="__span-23-9">
</span><span id="__span-23-10"><span class="err">Run</span><span class="w"> </span><span class="err">SQL</span><span class="w"> </span><span class="err">using</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">connections.</span>
</span><span id="__span-23-11">
</span><span id="__span-23-12"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-13"><span class="w">  </span><span class="err">SQL-FILE</span><span class="w">              </span><span class="err">SQL</span><span class="w"> </span><span class="err">files.</span><span class="w"> </span><span class="err">These</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">local</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">S3</span><span class="w"> </span><span class="err">(s3://...).</span><span class="w"> </span><span class="err">If</span>
</span><span id="__span-23-14"><span class="w">                        </span><span class="err">not</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">&quot;-&quot;,</span><span class="w"> </span><span class="err">stdin</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">used.</span>
</span><span id="__span-23-15">
</span><span id="__span-23-16"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-17"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-23-18"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-23-19"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-23-20"><span class="w">  </span><span class="err">-a</span><span class="w"> </span><span class="err">NAME,</span><span class="w"> </span><span class="err">--app-name</span><span class="w"> </span><span class="err">NAME,</span><span class="w"> </span><span class="err">--application-name</span><span class="w"> </span><span class="err">NAME</span>
</span><span id="__span-23-21"><span class="w">                        </span><span class="err">Use</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">application</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">connecting</span><span class="w"> </span><span class="err">to</span>
</span><span id="__span-23-22"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">database.</span><span class="w"> </span><span class="err">Ignored</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">types</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">don&#39;t</span>
</span><span id="__span-23-23"><span class="w">                        </span><span class="err">support</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">concept.</span>
</span><span id="__span-23-24"><span class="w">  </span><span class="err">-b</span><span class="w"> </span><span class="err">BATCH_SIZE,</span><span class="w"> </span><span class="err">--batch-size</span><span class="w"> </span><span class="err">BATCH_SIZE</span>
</span><span id="__span-23-25"><span class="w">                        </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">records</span><span class="w"> </span><span class="err">per</span><span class="w"> </span><span class="err">batch</span><span class="w"> </span><span class="err">when</span><span class="w"> </span><span class="err">processing</span><span class="w"> </span><span class="err">SELECT</span>
</span><span id="__span-23-26"><span class="w">                        </span><span class="err">querues.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">1024.</span>
</span><span id="__span-23-27"><span class="w">  </span><span class="err">--format</span><span class="w"> </span><span class="err">{csv,jsonl,html,parquet}</span>
</span><span id="__span-23-28"><span class="w">                        </span><span class="err">Output</span><span class="w"> </span><span class="err">format.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">csv.</span>
</span><span id="__span-23-29"><span class="w">  </span><span class="err">--header</span><span class="w">              </span><span class="err">Print</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">header</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">SELECT</span><span class="w"> </span><span class="err">queries</span><span class="w"> </span><span class="err">(output</span><span class="w"> </span><span class="err">format</span>
</span><span id="__span-23-30"><span class="w">                        </span><span class="err">dependent).</span>
</span><span id="__span-23-31"><span class="w">  </span><span class="err">-o</span><span class="w"> </span><span class="err">FILENAME,</span><span class="w"> </span><span class="err">--output</span><span class="w"> </span><span class="err">FILENAME</span>
</span><span id="__span-23-32"><span class="w">                        </span><span class="err">Write</span><span class="w"> </span><span class="err">output</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">may</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">local</span>
</span><span id="__span-23-33"><span class="w">                        </span><span class="err">or</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">S3</span><span class="w"> </span><span class="err">(s3://...).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">output</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-23-34"><span class="w">                        </span><span class="err">written</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">stdout.</span>
</span><span id="__span-23-35"><span class="w">  </span><span class="err">--raw</span><span class="w">                 </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">split</span><span class="w"> </span><span class="err">SQL</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">files</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">individual</span>
</span><span id="__span-23-36"><span class="w">                        </span><span class="err">statements.</span><span class="w"> </span><span class="err">By</span><span class="w"> </span><span class="err">default,</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">attempt</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">made</span><span class="w"> </span><span class="err">to</span>
</span><span id="__span-23-37"><span class="w">                        </span><span class="err">split</span><span class="w"> </span><span class="err">each</span><span class="w"> </span><span class="err">source</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">into</span><span class="w"> </span><span class="err">individual</span><span class="w"> </span><span class="err">SQL</span><span class="w"> </span><span class="err">statements.</span>
</span><span id="__span-23-38"><span class="w">  </span><span class="err">--transaction</span><span class="w">         </span><span class="err">Disable</span><span class="w"> </span><span class="err">auto-commit</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">run</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">SQLs</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">transaction.</span>
</span><span id="__span-23-39">
</span><span id="__span-23-40"><span class="err">lava</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-41"><span class="w">  </span><span class="err">-c</span><span class="w"> </span><span class="err">CONN_ID,</span><span class="w"> </span><span class="err">--conn-id</span><span class="w"> </span><span class="err">CONN_ID</span>
</span><span id="__span-23-42"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">database</span><span class="w"> </span><span class="err">connection</span><span class="w"> </span><span class="err">ID.</span><span class="w"> </span><span class="err">Required.</span>
</span><span id="__span-23-43"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-23-44"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-23-45"><span class="w">                        </span><span class="err">variable</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set.</span>
</span><span id="__span-23-46">
</span><span id="__span-23-47"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-48"><span class="w">  </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-23-49"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-23-50"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-23-51"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-23-52"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-23-53"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-23-54"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-23-55"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-23-56"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-23-57"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-23-58"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-23-59"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-sql.</span>
</span><span id="__span-23-60">
</span><span id="__span-23-61"><span class="err">CSV</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-62"><span class="w">  </span><span class="err">--delimiter</span><span class="w"> </span><span class="err">CHAR</span><span class="w">      </span><span class="err">Single</span><span class="w"> </span><span class="err">character</span><span class="w"> </span><span class="err">field</span><span class="w"> </span><span class="err">delimiter.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">|.</span>
</span><span id="__span-23-63"><span class="w">  </span><span class="err">--dialect</span><span class="w"> </span><span class="err">{excel,excel-tab,unix}</span>
</span><span id="__span-23-64"><span class="w">                        </span><span class="err">CSV</span><span class="w"> </span><span class="err">dialect</span><span class="w"> </span><span class="err">(as</span><span class="w"> </span><span class="err">per</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">Python</span><span class="w"> </span><span class="err">csv</span><span class="w"> </span><span class="err">module).</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-23-65"><span class="w">                        </span><span class="err">excel.</span>
</span><span id="__span-23-66"><span class="w">  </span><span class="err">--doublequote</span><span class="w">         </span><span class="err">See</span><span class="w"> </span><span class="err">Python</span><span class="w"> </span><span class="err">csv.writer.</span>
</span><span id="__span-23-67"><span class="w">  </span><span class="err">--escapechar</span><span class="w"> </span><span class="err">CHAR</span><span class="w">     </span><span class="err">See</span><span class="w"> </span><span class="err">Python</span><span class="w"> </span><span class="err">csv.writer.</span><span class="w"> </span><span class="err">Escaping</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">disabled</span><span class="w"> </span><span class="err">by</span>
</span><span id="__span-23-68"><span class="w">                        </span><span class="err">default.</span>
</span><span id="__span-23-69"><span class="w">  </span><span class="err">--quotechar</span><span class="w"> </span><span class="err">CHAR</span><span class="w">      </span><span class="err">See</span><span class="w"> </span><span class="err">Python</span><span class="w"> </span><span class="err">csv.writer.</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">&quot;.</span>
</span><span id="__span-23-70"><span class="w">  </span><span class="err">--quoting</span><span class="w"> </span><span class="err">QUOTING</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">csv.writer</span><span class="w"> </span><span class="err">QUOTE_*</span><span class="w"> </span><span class="err">parameters</span><span class="w"> </span><span class="err">(without</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-23-71"><span class="w">                        </span><span class="err">QUOTE_</span><span class="w"> </span><span class="err">prefix).</span><span class="w"> </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">minimal</span><span class="w"> </span><span class="err">(i.e.</span>
</span><span id="__span-23-72"><span class="w">                        </span><span class="err">QUOTE_MINIMAL).</span>
</span><span id="__span-23-73">
</span><span id="__span-23-74"><span class="err">JSONL</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-23-75"><span class="w">  </span><span class="err">--sort-keys</span><span class="w">           </span><span class="err">Sort</span><span class="w"> </span><span class="err">keys</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">JSON</span><span class="w"> </span><span class="err">objects.</span>
</span></code></pre></div>
</details>
<p><strong>Lava-sql</strong> can run one or more queries in a transaction and also capture
output from <code>SELECT</code> queries in various formats, either to a local file or to
AWS S3.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Do not have more than one <code>SELECT</code> query in the batch unless you are
deliberately trying to create a mess.</p>
</div>
<h3 id="csv">CSV<a class="headerlink" href="#csv" title="Permanent link">&para;</a></h3>
<p>Note that the default delimiter for <code>csv</code> format is the pipe symbol <code>|</code>, not a
comma. The original rationale for this was for consistency with the Redshift
<code>COPY</code> and <code>UNLOAD</code> commands. All I can say is that it seemed to make sense at
the time.</p>
<h3 id="html-format">HTML Format<a class="headerlink" href="#html-format" title="Permanent link">&para;</a></h3>
<p>The output data is encoded as an HTML table with a class of <code>lava-sql</code>. Only
the table HTML is produced to allow the output to be incorporated into a larger
HTML document. (i.e. no <code>HTML</code>, <code>BODY</code> tags etc.).</p>
<p>Values will be escaped as needed to ensure HTML correctness.</p>
<h3 id="jsonl-format">JSONL Format<a class="headerlink" href="#jsonl-format" title="Permanent link">&para;</a></h3>
<p>Each row of output data is encoded as a single line JSON formatted object.</p>
<h3 id="parquet-format">Parquet Format<a class="headerlink" href="#parquet-format" title="Permanent link">&para;</a></h3>
<p>Parquet compression will generally benefit from a larger batch size. The default
of 1024 is reasonable for many purposes but increasing it will often give a
smaller output file. Don't get carried away though. Each batch has to be held
entirely in memory.</p>
<p>A word of caution about the Parquet schema ... It's quite difficult to handle
schema inference in a predictable or consistent way, particularly with data
sourced via a DBAPI 2 connector as the <em>standard</em> does not provide any
consistency in how, or if, implementations signal type information in query
responses. The approach used by <strong>lava-sql</strong> is to let
<a href="https://arrow.apache.org/docs/python/index.html">PyArrow</a> form an educated
guess based on the first record batch. This should be fine for most purposes.</p>
<h2 id="lava-state-utility">Lava State Utility<a class="headerlink" href="#lava-state-utility" title="Permanent link">&para;</a></h2>
<p>The lava state utility provides a CLI to the
<a href="09-lava-state-manager.html#the-lava-state-manager">lava state manager</a>.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-24-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-state</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[-r</span><span class="w"> </span><span class="err">REALM]</span><span class="w"> </span><span class="err">[-v]</span><span class="w"> </span><span class="err">[--no-colour]</span>
</span><span id="__span-24-2"><span class="w">                  </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span><span class="w"> </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span>
</span><span id="__span-24-3"><span class="w">                  </span><span class="err">{put,get}</span><span class="w"> </span><span class="err">...</span>
</span><span id="__span-24-4">
</span><span id="__span-24-5"><span class="err">Manipulate</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">entries.</span>
</span><span id="__span-24-6">
</span><span id="__span-24-7"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-24-8"><span class="w">  </span><span class="err">{put,get}</span>
</span><span id="__span-24-9"><span class="w">    </span><span class="err">put</span><span class="w">                 </span><span class="err">Add</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">replace</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">entry.</span>
</span><span id="__span-24-10"><span class="w">    </span><span class="err">get</span><span class="w">                 </span><span class="err">Get</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">entry.</span>
</span><span id="__span-24-11">
</span><span id="__span-24-12"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-24-13"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-24-14"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-24-15"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-24-16"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-24-17"><span class="w">                        </span><span class="err">variable</span><span class="w"> </span><span class="err">LAVA_REALM</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set.</span>
</span><span id="__span-24-18"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-24-19">
</span><span id="__span-24-20"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-24-21"><span class="w">  </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-24-22"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-24-23"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-24-24"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-24-25"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-24-26"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-24-27"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-24-28"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-24-29"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-24-30"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-24-31"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-24-32"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-state.</span>
</span></code></pre></div>
</details>
<h3 id="creating-a-lava-state-item">Creating a Lava State Item<a class="headerlink" href="#creating-a-lava-state-item" title="Permanent link">&para;</a></h3>
<p>State items are created with the <code>put</code> sub-command.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Do not create state items with a <code>state_id</code> starting with <code>lava</code>.
This prefix is reserved.</p>
</div>
<details>
<summary>Usage: lava-state put</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-25-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-state</span><span class="w"> </span><span class="err">put</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-p</span><span class="w"> </span><span class="err">KEY=VALUE</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">-v</span><span class="w"> </span><span class="err">VALUE]</span><span class="w"> </span><span class="err">[--kms-key</span><span class="w"> </span><span class="err">KMS_KEY]</span>
</span><span id="__span-25-2"><span class="w">                      </span><span class="err">[--publisher</span><span class="w"> </span><span class="err">PUBLISHER]</span><span class="w"> </span><span class="err">[--ttl</span><span class="w"> </span><span class="err">DURATION]</span>
</span><span id="__span-25-3"><span class="w">                      </span><span class="err">[--type</span><span class="w"> </span><span class="err">STATE_TYPE]</span>
</span><span id="__span-25-4"><span class="w">                      </span><span class="err">state_id</span>
</span><span id="__span-25-5">
</span><span id="__span-25-6"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-25-7"><span class="w">  </span><span class="err">state_id</span><span class="w">              </span><span class="err">State</span><span class="w"> </span><span class="err">ID.</span>
</span><span id="__span-25-8">
</span><span id="__span-25-9"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-25-10"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-25-11"><span class="w">  </span><span class="err">-p</span><span class="w"> </span><span class="err">KEY=VALUE,</span><span class="w"> </span><span class="err">--param</span><span class="w"> </span><span class="err">KEY=VALUE</span>
</span><span id="__span-25-12"><span class="w">                        </span><span class="err">Add</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">key/value</span><span class="w"> </span><span class="err">pair</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">item.</span>
</span><span id="__span-25-13"><span class="w">                        </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">repeated</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">set</span><span class="w"> </span><span class="err">multiple</span><span class="w"> </span><span class="err">key/value</span><span class="w"> </span><span class="err">pairs.</span>
</span><span id="__span-25-14"><span class="w">  </span><span class="err">-v</span><span class="w"> </span><span class="err">VALUE,</span><span class="w"> </span><span class="err">--value</span><span class="w"> </span><span class="err">VALUE</span>
</span><span id="__span-25-15"><span class="w">                        </span><span class="err">Set</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">string.</span>
</span><span id="__span-25-16"><span class="w">  </span><span class="err">--kms-key</span><span class="w"> </span><span class="err">KMS_KEY</span><span class="w">     </span><span class="err">The</span><span class="w"> </span><span class="err">&quot;secure&quot;</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">type</span><span class="w"> </span><span class="err">supports</span><span class="w"> </span><span class="err">KMS</span><span class="w"> </span><span class="err">encryption</span>
</span><span id="__span-25-17"><span class="w">                        </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">argument</span><span class="w"> </span><span class="err">specifies</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">KMS</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">to</span>
</span><span id="__span-25-18"><span class="w">                        </span><span class="err">use,</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">KMS</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">ARN</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">alias</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-25-19"><span class="w">                        </span><span class="err">form</span><span class="w"> </span><span class="err">&quot;alias/key-id&quot;.</span><span class="w"> </span><span class="err">Defaults</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">&quot;sys&quot;</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-25-20"><span class="w">                        </span><span class="err">lava</span><span class="w"> </span><span class="err">realm.</span><span class="w"> </span><span class="err">Ignored</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">other</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">types.</span>
</span><span id="__span-25-21"><span class="w">  </span><span class="err">--publisher</span><span class="w"> </span><span class="err">PUBLISHER</span>
</span><span id="__span-25-22"><span class="w">                        </span><span class="err">Set</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">publisher</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span>
</span><span id="__span-25-23"><span class="w">                        </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">contents</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">LAVA_JOB_ID</span><span class="w"> </span><span class="err">environment</span>
</span><span id="__span-25-24"><span class="w">                        </span><span class="err">variable,</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">set,</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">else</span><span class="w"> </span><span class="err">&quot;lava-state</span><span class="w"> </span><span class="err">CLI&quot;.</span>
</span><span id="__span-25-25"><span class="w">  </span><span class="err">--ttl</span><span class="w"> </span><span class="err">DURATION</span><span class="w">        </span><span class="err">Time</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">live</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">duration</span><span class="w"> </span><span class="err">(e.g.</span><span class="w"> </span><span class="err">10m,</span><span class="w"> </span><span class="err">2h,</span><span class="w"> </span><span class="err">1d).</span>
</span><span id="__span-25-26"><span class="w">  </span><span class="err">--type</span><span class="w"> </span><span class="err">STATE_TYPE</span><span class="w">     </span><span class="err">State</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">type.</span><span class="w"> </span><span class="err">Options</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">json,</span><span class="w"> </span><span class="err">raw,</span><span class="w"> </span><span class="err">secure.</span>
</span><span id="__span-25-27"><span class="w">                        </span><span class="err">Default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">json.</span>
</span></code></pre></div>
</details>
<h3 id="retrieving-a-lava-state-item">Retrieving a Lava State Item<a class="headerlink" href="#retrieving-a-lava-state-item" title="Permanent link">&para;</a></h3>
<p>State items are retrieved with the <code>get</code> sub-command.</p>
<details>
<summary>Usage: lava-state get</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-26-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-state</span><span class="w"> </span><span class="err">get</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-i]</span><span class="w"> </span><span class="err">state_id</span><span class="w"> </span><span class="err">[template]</span>
</span><span id="__span-26-2">
</span><span id="__span-26-3"><span class="err">positional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-26-4"><span class="w">  </span><span class="err">state_id</span><span class="w">              </span><span class="err">State</span><span class="w"> </span><span class="err">ID.</span>
</span><span id="__span-26-5"><span class="w">  </span><span class="err">template</span><span class="w">              </span><span class="err">An</span><span class="w"> </span><span class="err">optional</span><span class="w"> </span><span class="err">Jinja2</span><span class="w"> </span><span class="err">template</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">will</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">rendered</span><span class="w"> </span><span class="err">with</span>
</span><span id="__span-26-6"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">retrieved</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">&quot;state&quot;</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">&quot;s&quot;</span><span class="w"> </span><span class="err">parameters.</span>
</span><span id="__span-26-7"><span class="w">                        </span><span class="err">e.g</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">set</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">&quot;{{</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">}}&quot;</span><span class="w"> </span><span class="err">(the</span><span class="w"> </span><span class="err">default)</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-26-8"><span class="w">                        </span><span class="err">printed</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">is.</span>
</span><span id="__span-26-9">
</span><span id="__span-26-10"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-26-11"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-26-12"><span class="w">  </span><span class="err">-i,</span><span class="w"> </span><span class="err">--ignore-missing</span><span class="w">  </span><span class="err">Ignore</span><span class="w"> </span><span class="err">errors</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">missing</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">items</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">return</span><span class="w"> </span><span class="err">an</span>
</span><span id="__span-26-13"><span class="w">                        </span><span class="err">empty</span><span class="w"> </span><span class="err">string.</span><span class="w"> </span><span class="err">By</span><span class="w"> </span><span class="err">default,</span><span class="w"> </span><span class="err">attempting</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">get</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">non-</span>
</span><span id="__span-26-14"><span class="w">                        </span><span class="err">existent</span><span class="w"> </span><span class="err">state</span><span class="w"> </span><span class="err">item</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">error.</span>
</span></code></pre></div>
</details>
<h2 id="lava-stop-utility">Lava Stop Utility<a class="headerlink" href="#lava-stop-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-stop</strong> utility initiates a controlled shutdown of the lava worker
daemons.</p>
<details class="usage">
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-27-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-stop</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-D]</span><span class="w"> </span><span class="err">[--profile</span><span class="w"> </span><span class="err">PROFILE]</span><span class="w"> </span><span class="err">[--signal</span><span class="w"> </span><span class="err">SIGNAL]</span><span class="w"> </span><span class="err">[-v]</span>
</span><span id="__span-27-2"><span class="w">                 </span><span class="err">[-w</span><span class="w"> </span><span class="err">DURATION]</span><span class="w"> </span><span class="err">[--auto-scaling-group-name</span><span class="w"> </span><span class="err">NAME]</span>
</span><span id="__span-27-3"><span class="w">                 </span><span class="err">[--instance-id</span><span class="w"> </span><span class="err">ID]</span><span class="w"> </span><span class="err">[--lifecycle-action-token</span><span class="w"> </span><span class="err">UUID]</span>
</span><span id="__span-27-4"><span class="w">                 </span><span class="err">[--lifecycle-hook-name</span><span class="w"> </span><span class="err">NAME]</span><span class="w"> </span><span class="err">[--lifecycle-heartbeat</span><span class="w"> </span><span class="err">DURATION]</span>
</span><span id="__span-27-5"><span class="w">                 </span><span class="err">[-c]</span><span class="w"> </span><span class="err">[-l</span><span class="w"> </span><span class="err">LEVEL]</span><span class="w"> </span><span class="err">[--log</span><span class="w"> </span><span class="err">LOG]</span><span class="w"> </span><span class="err">[--tag</span><span class="w"> </span><span class="err">TAG]</span>
</span><span id="__span-27-6">
</span><span id="__span-27-7"><span class="err">Stop</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">processes.</span>
</span><span id="__span-27-8">
</span><span id="__span-27-9"><span class="err">options:</span>
</span><span id="__span-27-10"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-27-11"><span class="w">  </span><span class="err">-D,</span><span class="w"> </span><span class="err">--no-dispatch</span><span class="w">     </span><span class="err">Inhibit</span><span class="w"> </span><span class="err">further</span><span class="w"> </span><span class="err">scheduled</span><span class="w"> </span><span class="err">dispatches</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">creating</span>
</span><span id="__span-27-12"><span class="w">                        </span><span class="err">/tmp/lava/__nodispatch__.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">requires</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava-</span>
</span><span id="__span-27-13"><span class="w">                        </span><span class="err">dispatcher</span><span class="w"> </span><span class="err">utility</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">check</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">file</span><span class="w"> </span><span class="err">by</span>
</span><span id="__span-27-14"><span class="w">                        </span><span class="err">specifying</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">--check-dispatch</span><span class="w"> </span><span class="err">argument.</span>
</span><span id="__span-27-15"><span class="w">  </span><span class="err">--profile</span><span class="w"> </span><span class="err">PROFILE</span><span class="w">     </span><span class="err">As</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI.</span>
</span><span id="__span-27-16"><span class="w">  </span><span class="err">--signal</span><span class="w"> </span><span class="err">SIGNAL,</span><span class="w"> </span><span class="err">--sig</span><span class="w"> </span><span class="err">SIGNAL</span>
</span><span id="__span-27-17"><span class="w">                        </span><span class="err">Send</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">signal</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">worker</span>
</span><span id="__span-27-18"><span class="w">                        </span><span class="err">processes.</span><span class="w"> </span><span class="err">Can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">signal</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-27-19"><span class="w">                        </span><span class="err">SIGHUP</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">HUP)</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">signal</span><span class="w"> </span><span class="err">number.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">0</span>
</span><span id="__span-27-20"><span class="w">                        </span><span class="err">which</span><span class="w"> </span><span class="err">only</span><span class="w"> </span><span class="err">tests</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">process</span><span class="w"> </span><span class="err">exists.</span><span class="w"> </span><span class="err">SIGHUP</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-27-21"><span class="w">                        </span><span class="err">interpreted</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">controlled</span><span class="w"> </span><span class="err">shutdown</span><span class="w"> </span><span class="err">instruction</span>
</span><span id="__span-27-22"><span class="w">                        </span><span class="err">allowing</span><span class="w"> </span><span class="err">running</span><span class="w"> </span><span class="err">jobs</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">complete.</span><span class="w"> </span><span class="err">SIGTERM</span><span class="w"> </span><span class="err">is</span>
</span><span id="__span-27-23"><span class="w">                        </span><span class="err">interpreted</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">controlled,</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">immediate,</span>
</span><span id="__span-27-24"><span class="w">                        </span><span class="err">termination</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">allows</span><span class="w"> </span><span class="err">final</span><span class="w"> </span><span class="err">cleanup</span><span class="w"> </span><span class="err">tasks</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">takes</span>
</span><span id="__span-27-25"><span class="w">                        </span><span class="err">no</span><span class="w"> </span><span class="err">account</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">running</span><span class="w"> </span><span class="err">jobs.</span><span class="w"> </span><span class="err">See</span><span class="w"> </span><span class="err">--w,</span><span class="w"> </span><span class="err">--wait.</span>
</span><span id="__span-27-26"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-27-27"><span class="w">  </span><span class="err">-w</span><span class="w"> </span><span class="err">DURATION,</span><span class="w"> </span><span class="err">--wait</span><span class="w"> </span><span class="err">DURATION</span>
</span><span id="__span-27-28"><span class="w">                        </span><span class="err">Wait</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">up</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">duration</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span>
</span><span id="__span-27-29"><span class="w">                        </span><span class="err">workers</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">finish</span><span class="w"> </span><span class="err">voluntarily</span><span class="w"> </span><span class="err">before</span><span class="w"> </span><span class="err">killing</span><span class="w"> </span><span class="err">them.</span>
</span><span id="__span-27-30"><span class="w">                        </span><span class="err">This</span><span class="w"> </span><span class="err">requires</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">signal</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">set</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">SIGHUP</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">HUP</span><span class="w"> </span><span class="err">as</span>
</span><span id="__span-27-31"><span class="w">                        </span><span class="err">this</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">interpreted</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">daemons</span><span class="w"> </span><span class="err">as</span><span class="w"> </span><span class="err">a</span>
</span><span id="__span-27-32"><span class="w">                        </span><span class="err">controlled</span><span class="w"> </span><span class="err">shutdown</span><span class="w"> </span><span class="err">request.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">duration</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">in</span>
</span><span id="__span-27-33"><span class="w">                        </span><span class="err">the</span><span class="w"> </span><span class="err">form</span><span class="w"> </span><span class="err">nn[X]</span><span class="w"> </span><span class="err">where</span><span class="w"> </span><span class="err">nn</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">X</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">s</span>
</span><span id="__span-27-34"><span class="w">                        </span><span class="err">(seconds),</span><span class="w"> </span><span class="err">m</span><span class="w"> </span><span class="err">(minutes)</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">h</span><span class="w"> </span><span class="err">(hours).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">X</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span>
</span><span id="__span-27-35"><span class="w">                        </span><span class="err">specified,</span><span class="w"> </span><span class="err">seconds</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">assumed.</span>
</span><span id="__span-27-36">
</span><span id="__span-27-37"><span class="err">AWS</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaling</span><span class="w"> </span><span class="err">lifecycle</span><span class="w"> </span><span class="err">options:</span>
</span><span id="__span-27-38"><span class="w">  </span><span class="err">These</span><span class="w"> </span><span class="err">arguments</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">designed</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">complete</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaling</span><span class="w"> </span><span class="err">&quot;EC2</span>
</span><span id="__span-27-39"><span class="w">  </span><span class="err">Instance-terminate</span><span class="w"> </span><span class="err">Lifecycle</span><span class="w"> </span><span class="err">Action&quot;.</span><span class="w"> </span><span class="err">See</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">CLI</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaling</span>
</span><span id="__span-27-40"><span class="w">  </span><span class="err">documentation</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">meaning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">usage.</span><span class="w"> </span><span class="err">Note</span><span class="w"> </span><span class="err">that</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lifecycle</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">result</span>
</span><span id="__span-27-41"><span class="w">  </span><span class="err">is</span><span class="w"> </span><span class="err">always</span><span class="w"> </span><span class="err">set</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">CONTINUE</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">means</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaling</span><span class="w"> </span><span class="err">group</span><span class="w"> </span><span class="err">_will_</span>
</span><span id="__span-27-42"><span class="w">  </span><span class="err">terminate</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">instance.</span>
</span><span id="__span-27-43">
</span><span id="__span-27-44"><span class="w">  </span><span class="err">--auto-scaling-group-name</span><span class="w"> </span><span class="err">NAME</span>
</span><span id="__span-27-45"><span class="w">                        </span><span class="err">Send</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">complete-lifecycle-action</span><span class="w"> </span><span class="err">signal</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-27-46"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaing</span><span class="w"> </span><span class="err">group.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span>
</span><span id="__span-27-47"><span class="w">                        </span><span class="err">--lifecycle-hook-name</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">also</span><span class="w"> </span><span class="err">required.</span>
</span><span id="__span-27-48"><span class="w">  </span><span class="err">--instance-id</span><span class="w"> </span><span class="err">ID</span><span class="w">      </span><span class="err">The</span><span class="w"> </span><span class="err">ID</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">EC2</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="err">(optional).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span>
</span><span id="__span-27-49"><span class="w">                        </span><span class="err">--auto-scaling-group-name</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--lifecycle-hook-name</span><span class="w"> </span><span class="err">are</span>
</span><span id="__span-27-50"><span class="w">                        </span><span class="err">required.</span>
</span><span id="__span-27-51"><span class="w">  </span><span class="err">--lifecycle-action-token</span><span class="w"> </span><span class="err">UUID</span>
</span><span id="__span-27-52"><span class="w">                        </span><span class="err">lifecycle</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">identifier</span><span class="w"> </span><span class="err">(optional).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span>
</span><span id="__span-27-53"><span class="w">                        </span><span class="err">--auto-scaling-group-name</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--lifecycle-hook-name</span><span class="w"> </span><span class="err">are</span>
</span><span id="__span-27-54"><span class="w">                        </span><span class="err">required.</span>
</span><span id="__span-27-55"><span class="w">  </span><span class="err">--lifecycle-hook-name</span><span class="w"> </span><span class="err">NAME</span>
</span><span id="__span-27-56"><span class="w">                        </span><span class="err">The</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">AWS</span><span class="w"> </span><span class="err">auto</span><span class="w"> </span><span class="err">scaling</span><span class="w"> </span><span class="err">lifecycle</span><span class="w"> </span><span class="err">hook.</span><span class="w"> </span><span class="err">If</span>
</span><span id="__span-27-57"><span class="w">                        </span><span class="err">specified,</span><span class="w"> </span><span class="err">--auto-scaling-group-name</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">also</span><span class="w"> </span><span class="err">required.</span>
</span><span id="__span-27-58"><span class="w">  </span><span class="err">--lifecycle-heartbeat</span><span class="w"> </span><span class="err">DURATION</span>
</span><span id="__span-27-59"><span class="w">                        </span><span class="err">Record</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">heartbeat</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lifecycle</span><span class="w"> </span><span class="err">action</span><span class="w"> </span><span class="err">at</span>
</span><span id="__span-27-60"><span class="w">                        </span><span class="err">specified</span><span class="w"> </span><span class="err">intervals</span><span class="w"> </span><span class="err">(optional).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">--auto-</span>
</span><span id="__span-27-61"><span class="w">                        </span><span class="err">scaling-group-name</span><span class="w"> </span><span class="err">/</span><span class="w"> </span><span class="err">--lifecycle-hook-name</span><span class="w"> </span><span class="err">are</span>
</span><span id="__span-27-62"><span class="w">                        </span><span class="err">required.</span><span class="w"> </span><span class="err">THe</span><span class="w"> </span><span class="err">duration</span><span class="w"> </span><span class="err">must</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">form</span><span class="w"> </span><span class="err">nn[X]</span><span class="w"> </span><span class="err">where</span>
</span><span id="__span-27-63"><span class="w">                        </span><span class="err">nn</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">X</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">one</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">s</span><span class="w"> </span><span class="err">(seconds),</span><span class="w"> </span><span class="err">m</span>
</span><span id="__span-27-64"><span class="w">                        </span><span class="err">(minutes)</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">h</span><span class="w"> </span><span class="err">(hours).</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">X</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">seconds</span>
</span><span id="__span-27-65"><span class="w">                        </span><span class="err">are</span><span class="w"> </span><span class="err">assumed.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">minimum</span><span class="w"> </span><span class="err">permitted</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">60</span>
</span><span id="__span-27-66"><span class="w">                        </span><span class="err">seconds.</span>
</span><span id="__span-27-67">
</span><span id="__span-27-68"><span class="err">logging</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-27-69"><span class="w">  </span><span class="err">-c,</span><span class="w"> </span><span class="err">--no-colour,</span><span class="w"> </span><span class="err">--no-color</span>
</span><span id="__span-27-70"><span class="w">                        </span><span class="err">Don&#39;t</span><span class="w"> </span><span class="err">use</span><span class="w"> </span><span class="err">colour</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">messages.</span>
</span><span id="__span-27-71"><span class="w">  </span><span class="err">-l</span><span class="w"> </span><span class="err">LEVEL,</span><span class="w"> </span><span class="err">--level</span><span class="w"> </span><span class="err">LEVEL</span>
</span><span id="__span-27-72"><span class="w">                        </span><span class="err">Print</span><span class="w"> </span><span class="err">messages</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">given</span><span class="w"> </span><span class="err">severity</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">above.</span><span class="w"> </span><span class="err">The</span>
</span><span id="__span-27-73"><span class="w">                        </span><span class="err">standard</span><span class="w"> </span><span class="err">logging</span><span class="w"> </span><span class="err">level</span><span class="w"> </span><span class="err">names</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">available</span><span class="w"> </span><span class="err">but</span><span class="w"> </span><span class="err">debug,</span>
</span><span id="__span-27-74"><span class="w">                        </span><span class="err">info,</span><span class="w"> </span><span class="err">warning</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">most</span><span class="w"> </span><span class="err">useful.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">Default</span>
</span><span id="__span-27-75"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">info.</span>
</span><span id="__span-27-76"><span class="w">  </span><span class="err">--log</span><span class="w"> </span><span class="err">LOG</span><span class="w">             </span><span class="err">Log</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">target.</span><span class="w"> </span><span class="err">This</span><span class="w"> </span><span class="err">can</span><span class="w"> </span><span class="err">be</span><span class="w"> </span><span class="err">either</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">file</span>
</span><span id="__span-27-77"><span class="w">                        </span><span class="err">name</span><span class="w"> </span><span class="err">or</span><span class="w"> </span><span class="err">a</span><span class="w"> </span><span class="err">syslog</span><span class="w"> </span><span class="err">facility</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">@</span><span class="w"> </span><span class="err">prefix</span><span class="w"> </span><span class="err">(e.g.</span>
</span><span id="__span-27-78"><span class="w">                        </span><span class="err">@local0).</span>
</span><span id="__span-27-79"><span class="w">  </span><span class="err">--tag</span><span class="w"> </span><span class="err">TAG</span><span class="w">             </span><span class="err">Tag</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="err">entries</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">value.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span>
</span><span id="__span-27-80"><span class="w">                        </span><span class="err">is</span><span class="w"> </span><span class="err">lava-stop.</span>
</span></code></pre></div>
</details>
<p>The process for stopping a lava worker is:</p>
<ol>
<li>
<p>Send it a <code>SIGHUP</code> signal. This tells the worker to complete any in-flight
    or queued jobs but not to accept any more jobs.</p>
</li>
<li>
<p>Wait a while.</p>
</li>
<li>
<p>Send it another <code>SIGHUP</code> signal. The second <code>SIGHUP</code> is a more aggressive
    shutdown command and will interrupt in-flight jobs but still allow the
    worker an opportunity to cleanup.</p>
</li>
<li>
<p>Give it another 10-20 seconds.</p>
</li>
<li>
<p>If the worker is still running, kill it with <code>SIGKILL</code>.</p>
</li>
</ol>
<p><strong>Lava-stop</strong> will do a process listing to find worker processes. It can be used
interactively and is also designed for use within an AWS auto scaling
lifecycle hook for terminating worker nodes. This is all built in to a standard
lava deployment using the provided
<a href="10-installation-operation.html#building-the-cloudformation-templates">CloudFormation templates</a>.</p>
<h2 id="lava-version-utility">Lava Version Utility<a class="headerlink" href="#lava-version-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-version</strong> utility provides version information on the installed lava
version.</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-28-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-version</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-n</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">-a</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--ge</span><span class="w"> </span><span class="err">VERSION</span><span class="w"> </span><span class="err">|</span><span class="w"> </span><span class="err">--eq</span><span class="w"> </span><span class="err">VERSION]</span>
</span><span id="__span-28-2">
</span><span id="__span-28-3"><span class="err">Print</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">information.</span>
</span><span id="__span-28-4">
</span><span id="__span-28-5"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-28-6"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">    </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-28-7"><span class="w">  </span><span class="err">-n,</span><span class="w"> </span><span class="err">--name</span><span class="w">    </span><span class="err">Print</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">only.</span>
</span><span id="__span-28-8"><span class="w">  </span><span class="err">-a,</span><span class="w"> </span><span class="err">--all</span><span class="w">     </span><span class="err">Print</span><span class="w"> </span><span class="err">all</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">inforamtion.</span>
</span><span id="__span-28-9"><span class="w">  </span><span class="err">--ge</span><span class="w"> </span><span class="err">VERSION</span><span class="w">  </span><span class="err">Exit</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">zero</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">greater</span><span class="w"> </span><span class="err">than</span><span class="w"> </span><span class="err">or</span>
</span><span id="__span-28-10"><span class="w">                </span><span class="err">equal</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">version.</span>
</span><span id="__span-28-11"><span class="w">  </span><span class="err">--eq</span><span class="w"> </span><span class="err">VERSION</span><span class="w">  </span><span class="err">Exit</span><span class="w"> </span><span class="err">with</span><span class="w"> </span><span class="err">zero</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">equal</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">the</span>
</span><span id="__span-28-12"><span class="w">                </span><span class="err">specified</span><span class="w"> </span><span class="err">version.</span>
</span><span id="__span-28-13">
</span><span id="__span-28-14"><span class="err">If</span><span class="w"> </span><span class="err">no</span><span class="w"> </span><span class="err">arguments</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">specified</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">printed.</span>
</span></code></pre></div>
</details>
<h2 id="lava-worker-status-utility">Lava Worker Status Utility<a class="headerlink" href="#lava-worker-status-utility" title="Permanent link">&para;</a></h2>
<p>The <strong>lava-ws</strong> utility displays worker status information based on the worker
SQS queues (queue depths, worker backlog etc.).</p>
<details>
<summary>Usage</summary>
<div class="language-bare highlight"><pre><span></span><code><span id="__span-29-1"><span class="err">usage:</span><span class="w"> </span><span class="err">lava-ws</span><span class="w"> </span><span class="err">[-h]</span><span class="w"> </span><span class="err">[-f</span><span class="w"> </span><span class="err">FORMAT]</span><span class="w"> </span><span class="err">[-l]</span><span class="w"> </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM</span><span class="w"> </span><span class="err">[-w</span><span class="w"> </span><span class="err">WORKER]</span><span class="w"> </span><span class="err">[-v]</span>
</span><span id="__span-29-2">
</span><span id="__span-29-3"><span class="err">Get</span><span class="w"> </span><span class="err">status</span><span class="w"> </span><span class="err">info</span><span class="w"> </span><span class="err">about</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">workers.</span>
</span><span id="__span-29-4">
</span><span id="__span-29-5"><span class="err">optional</span><span class="w"> </span><span class="err">arguments:</span>
</span><span id="__span-29-6"><span class="w">  </span><span class="err">-h,</span><span class="w"> </span><span class="err">--help</span><span class="w">            </span><span class="err">show</span><span class="w"> </span><span class="err">this</span><span class="w"> </span><span class="err">help</span><span class="w"> </span><span class="err">message</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-29-7"><span class="w">  </span><span class="err">-f</span><span class="w"> </span><span class="err">FORMAT,</span><span class="w"> </span><span class="err">--format</span><span class="w"> </span><span class="err">FORMAT</span>
</span><span id="__span-29-8"><span class="w">                        </span><span class="err">Output</span><span class="w"> </span><span class="err">table</span><span class="w"> </span><span class="err">format</span><span class="w"> </span><span class="err">(see</span><span class="w"> </span><span class="err">below).</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">formats</span><span class="w"> </span><span class="err">supported</span>
</span><span id="__span-29-9"><span class="w">                        </span><span class="err">by</span><span class="w"> </span><span class="err">tabulate</span><span class="w"> </span><span class="err">(https://pypi.org/project/tabulate/)</span><span class="w"> </span><span class="err">can</span>
</span><span id="__span-29-10"><span class="w">                        </span><span class="err">be</span><span class="w"> </span><span class="err">used.</span><span class="w"> </span><span class="err">The</span><span class="w"> </span><span class="err">default</span><span class="w"> </span><span class="err">is</span><span class="w"> </span><span class="err">fancy_grid.</span>
</span><span id="__span-29-11"><span class="w">  </span><span class="err">-l</span><span class="w">                    </span><span class="err">Show</span><span class="w"> </span><span class="err">more</span><span class="w"> </span><span class="err">information.</span><span class="w"> </span><span class="err">Repeat</span><span class="w"> </span><span class="err">up</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">2</span><span class="w"> </span><span class="err">times</span><span class="w"> </span><span class="err">to</span><span class="w"> </span><span class="err">get</span>
</span><span id="__span-29-12"><span class="w">                        </span><span class="err">more</span><span class="w"> </span><span class="err">details.</span>
</span><span id="__span-29-13"><span class="w">  </span><span class="err">-r</span><span class="w"> </span><span class="err">REALM,</span><span class="w"> </span><span class="err">--realm</span><span class="w"> </span><span class="err">REALM</span>
</span><span id="__span-29-14"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">name.</span>
</span><span id="__span-29-15"><span class="w">  </span><span class="err">-w</span><span class="w"> </span><span class="err">WORKER,</span><span class="w"> </span><span class="err">--worker</span><span class="w"> </span><span class="err">WORKER</span>
</span><span id="__span-29-16"><span class="w">                        </span><span class="err">Lava</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">name</span><span class="w"> </span><span class="err">prefix.</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">specified,</span><span class="w"> </span><span class="err">report</span><span class="w"> </span><span class="err">on</span>
</span><span id="__span-29-17"><span class="w">                        </span><span class="err">all</span><span class="w"> </span><span class="err">workers</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">realm</span><span class="w"> </span><span class="err">(assumes</span><span class="w"> </span><span class="err">lava</span><span class="w"> </span><span class="err">standard</span><span class="w"> </span><span class="err">queue</span>
</span><span id="__span-29-18"><span class="w">                        </span><span class="err">naming</span><span class="w"> </span><span class="err">conventions).</span>
</span><span id="__span-29-19"><span class="w">  </span><span class="err">-v,</span><span class="w"> </span><span class="err">--version</span><span class="w">         </span><span class="err">show</span><span class="w"> </span><span class="err">program&#39;s</span><span class="w"> </span><span class="err">version</span><span class="w"> </span><span class="err">number</span><span class="w"> </span><span class="err">and</span><span class="w"> </span><span class="err">exit</span>
</span><span id="__span-29-20">
</span><span id="__span-29-21"><span class="err">output</span><span class="w"> </span><span class="err">columns:</span>
</span><span id="__span-29-22"><span class="w">  </span><span class="err">BCKAVG</span><span class="w">   </span><span class="err">Average</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">backlog</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">last</span><span class="w"> </span><span class="err">15</span><span class="w"> </span><span class="err">minutes</span>
</span><span id="__span-29-23"><span class="w">  </span><span class="err">BCKMAX</span><span class="w">   </span><span class="err">Maximum</span><span class="w"> </span><span class="err">worker</span><span class="w"> </span><span class="err">backlog</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">last</span><span class="w"> </span><span class="err">15</span><span class="w"> </span><span class="err">minutes</span>
</span><span id="__span-29-24"><span class="w">  </span><span class="err">BCKNOW</span><span class="w">   </span><span class="err">Current</span><span class="w"> </span><span class="err">backlog</span>
</span><span id="__span-29-25"><span class="w">  </span><span class="err">DELAVG</span><span class="w">   </span><span class="err">Average</span><span class="w"> </span><span class="err">run</span><span class="w"> </span><span class="err">delay</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">last</span><span class="w"> </span><span class="err">15</span><span class="w"> </span><span class="err">minutes</span>
</span><span id="__span-29-26"><span class="w">  </span><span class="err">DELMAX</span><span class="w">   </span><span class="err">Maximum</span><span class="w"> </span><span class="err">run</span><span class="w"> </span><span class="err">delay</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">last</span><span class="w"> </span><span class="err">15</span><span class="w"> </span><span class="err">minutes</span>
</span><span id="__span-29-27"><span class="w">  </span><span class="err">EC2</span><span class="w">      </span><span class="err">Number</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">running</span><span class="w"> </span><span class="err">EC2</span><span class="w"> </span><span class="err">instances</span>
</span><span id="__span-29-28"><span class="w">  </span><span class="err">EC2TYPE</span><span class="w">  </span><span class="err">EC2</span><span class="w"> </span><span class="err">instance</span><span class="w"> </span><span class="k">type</span>
</span><span id="__span-29-29"><span class="w">  </span><span class="n">MSGS</span><span class="w">     </span><span class="nc">Messages</span><span class="w"> </span><span class="err">visible</span>
</span><span id="__span-29-30"><span class="w">  </span><span class="err">NVIS</span><span class="w">     </span><span class="err">Messages</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">visible</span>
</span><span id="__span-29-31"><span class="w">  </span><span class="err">QUEUE</span><span class="w">    </span><span class="err">SQS</span><span class="w"> </span><span class="err">queue</span><span class="w"> </span><span class="err">name</span>
</span><span id="__span-29-32"><span class="w">  </span><span class="err">RET</span><span class="w">      </span><span class="err">Message</span><span class="w"> </span><span class="err">retention</span><span class="w"> </span><span class="err">period</span>
</span><span id="__span-29-33"><span class="w">  </span><span class="err">VIS</span><span class="w">      </span><span class="err">Visibility</span><span class="w"> </span><span class="err">timeout</span>
</span><span id="__span-29-34">
</span><span id="__span-29-35"><span class="err">output</span><span class="w"> </span><span class="err">formats:</span>
</span><span id="__span-29-36"><span class="w">  </span><span class="err">fancy_grid</span><span class="w">  </span><span class="err">fancy_outline</span><span class="w">   </span><span class="err">github</span><span class="w">           </span><span class="err">grid</span><span class="w">       </span><span class="err">html</span><span class="w">        </span><span class="err">jira</span>
</span><span id="__span-29-37"><span class="w">  </span><span class="err">latex</span><span class="w">       </span><span class="err">latex_booktabs</span><span class="w">  </span><span class="err">latex_longtable</span><span class="w">  </span><span class="err">latex_raw</span><span class="w">  </span><span class="err">mediawiki</span><span class="w">   </span><span class="err">moinmoin</span>
</span><span id="__span-29-38"><span class="w">  </span><span class="err">orgtbl</span><span class="w">      </span><span class="err">pipe</span><span class="w">            </span><span class="err">plain</span><span class="w">            </span><span class="err">presto</span><span class="w">     </span><span class="err">pretty</span><span class="w">      </span><span class="err">psql</span>
</span><span id="__span-29-39"><span class="w">  </span><span class="err">rst</span><span class="w">         </span><span class="err">simple</span><span class="w">          </span><span class="err">textile</span><span class="w">          </span><span class="err">tsv</span><span class="w">        </span><span class="err">unsafehtml</span><span class="w">  </span><span class="err">youtrack</span>
</span></code></pre></div>
</details>
<p>Unlike <strong>lava-ps</strong>, which displays worker process information, <strong>lava-ws</strong> does
not need to run on the worker host.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy 2025
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            v8.2.0 (Kilauea)
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy", {"icon": {"repo": "material/github"}}], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>