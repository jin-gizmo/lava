
# Job Actions

Lava can perform specified actions on the completion of a job depending on
whether the job:
 
*   completed successfully (`on_success`); or
*   failed and will be retried (`on_retry`); or
*   failed and won't be retried (`on_fail`).

Actions are not executed if the job does not start (e.g. if the job
specification is malformed).

These actions are defined as part of the job specification or can be inherited
from the realm specification. An action specification at the job level will
override one at the realm level.

A typical action specification within a job or realm specification looks like:

```json
{
  "on_fail": [
    {
      "action": "sns",
      "message": "{{job.job_id}}@{{realm.realm}} ({{job.run_id}}) failed: {{result.error}}",
      "topic": "arn:aws:sns:ap-southeast-2:990565496141:lava-proto-notices"
    }
  ],
  "on_retry": [
    {
      "action": "log",
      "message": "Failed on attempt {{ globals.lava.iteration }} but will try again!"
    }
  ],
  "on_success": [
    {
      "action": "log",
      "message": "It worked!"
    },
    {
      "action": "dispatch",
      "job_id": "downstream_job"
    }
  ]
}
```

Actions in an action list are executed in the order specified.

Apart from the mandatory `action` field, action specification parameters are
dependent on the action type.

Some actions support Jinja rendering of some of the action parameters.

Actions are implemented using a simple plugin mechanism. Adding new actions is
relatively straightforward.
