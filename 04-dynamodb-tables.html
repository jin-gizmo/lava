
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS based distributed scheduler and job runner">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="03-architecture.html">
      
      
        <link rel="next" href="05-job-dispatch.html">
      
      
      <link rel="icon" href="img/lava-icons/png/256/lava-icon-256-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>DynamoDB Tables - Lava User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#dynamodb-tables" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Lava User Guide" class="md-header__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lava User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DynamoDB Tables
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Lava User Guide" class="md-nav__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    Lava User Guide
  </label>
  
    <div class="md-nav__source">
      

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-about-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03-architecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="04-dynamodb-tables.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-realms-table" class="md-nav__link">
    <span class="md-ellipsis">
      Realms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-jobs-table" class="md-nav__link">
    <span class="md-ellipsis">
      Jobs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-enabled-field" class="md-nav__link">
    <span class="md-ellipsis">
      The enabled Field
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-event_log-field" class="md-nav__link">
    <span class="md-ellipsis">
      The event_log Field
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-connections-table" class="md-nav__link">
    <span class="md-ellipsis">
      Connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-events-table" class="md-nav__link">
    <span class="md-ellipsis">
      Events
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-s3triggers-table" class="md-nav__link">
    <span class="md-ellipsis">
      S3triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-state-table" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-item-types" class="md-nav__link">
    <span class="md-ellipsis">
      State Item Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-job-dispatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Dispatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jobs-job-types.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs & Job Types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-connectors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="08-job-actions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-lava-state-manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava State Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-operation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Operation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-lava-job-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava Job Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-developing-lava-jobs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Lava Jobs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="13-jinja-rendering-in-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-enhancing-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancing Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-lava-and-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava and Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="16-commands-utilities.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="17-job-framework-samples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Framework Samples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="18-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="19-cloudformation-templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFormation Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="20-faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="21-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="22-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="23-known-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-realms-table" class="md-nav__link">
    <span class="md-ellipsis">
      Realms
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-jobs-table" class="md-nav__link">
    <span class="md-ellipsis">
      Jobs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-enabled-field" class="md-nav__link">
    <span class="md-ellipsis">
      The enabled Field
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-event_log-field" class="md-nav__link">
    <span class="md-ellipsis">
      The event_log Field
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-connections-table" class="md-nav__link">
    <span class="md-ellipsis">
      Connections
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-events-table" class="md-nav__link">
    <span class="md-ellipsis">
      Events
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-s3triggers-table" class="md-nav__link">
    <span class="md-ellipsis">
      S3triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-state-table" class="md-nav__link">
    <span class="md-ellipsis">
      State
    </span>
  </a>
  
    <nav class="md-nav" aria-label="State">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-item-types" class="md-nav__link">
    <span class="md-ellipsis">
      State Item Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="dynamodb-tables">DynamoDB Tables<a class="headerlink" href="#dynamodb-tables" title="Permanent link">&para;</a></h1>
<p>Each lava realm uses a number DynamoDB tables to hold configuration and status
information.</p>
<p>The tables are created by the <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation
templates</a>.</p>
<p>See also <a href="10-installation-operation.html#maintaining-dynamodb-table-entries">Maintaining DynamoDB Table Entries</a>.</p>
<h2 id="the-realms-table">The Realms Table<a class="headerlink" href="#the-realms-table" title="Permanent link">&para;</a></h2>
<p>The realms table is named <code>lava.realms</code>. This is a global lava table and is the
only object shared across realms.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>config</td>
<td>Map</td>
<td>No</td>
<td>An optional map of configuration values that will be applied to all workers in the realm. Refer to <a href="10-installation-operation.html#lava-worker-configuration">Lava Worker Configuration</a> for more information.</td>
</tr>
<tr>
<td>on_fail</td>
<td>List[Map]</td>
<td>No</td>
<td>The default <a href="08-job-actions.html#job-actions">on_fail actions</a> for jobs in the realm.</td>
</tr>
<tr>
<td>on_success</td>
<td>List[Map]</td>
<td>No</td>
<td>The default <a href="08-job-actions.html#job-actions">on_success actions</a> for jobs in the realm.</td>
</tr>
<tr>
<td>realm</td>
<td>String</td>
<td>Yes</td>
<td>A unique identifier for the realm. Keep it simple.</td>
</tr>
<tr>
<td>s3_key</td>
<td>String</td>
<td>Yes</td>
<td>A KMS key identifier used when objects are written to S3 by a worker. Typically, either a key ARN or <code>alias/&lt;KEY-NAME&gt;</code>.</td>
</tr>
<tr>
<td>s3_payloads</td>
<td>String</td>
<td>Yes</td>
<td>A <a href="03-architecture.html#lava-s3-locations">location in S3</a> where payloads are stored for the realm in the form <code>s3://&lt;BUCKET&gt;/&lt;PREFIX&gt;.</code></td>
</tr>
<tr>
<td>s3_temp</td>
<td>String</td>
<td>Yes</td>
<td>A <a href="03-architecture.html#lava-s3-locations">location in S3</a> where job outputs are stored for the realm in the form <code>s3://&lt;BUCKET&gt;/&lt;PREFIX&gt;.</code></td>
</tr>
<tr>
<td>X-*</td>
<td>String</td>
<td>No</td>
<td>Any fields beginning with <code>x-</code> or <code>X-</code> are ignored by lava. These can be used as required for other purposes (e.g. CI/CD, versioning or other related purposes). A number of these fields are used as part of the boot process for EC2 based lava workers for configuration control.</td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td>*</td>
<td>Other fields in the realms table may be present to set defaults for other lava subcomponents. These are described in the relevant section.</td>
</tr>
</tbody>
</table>
<h2 id="the-jobs-table">The Jobs Table<a class="headerlink" href="#the-jobs-table" title="Permanent link">&para;</a></h2>
<p>The jobs table for a given <code>&lt;REALM&gt;</code> is named <code>lava.&lt;REALM&gt;.jobs</code>. It contains
information about jobs and their associated run information.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cw_metrics</td>
<td>Boolean</td>
<td>No</td>
<td>If specified, enable/disable generation of <a href="10-installation-operation.html#cloudwatch-metrics">CloudWatch custom metrics</a> for this job. If present, overrides any value set at the worker/realm level.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Not yet</td>
<td>A short description of the job. <strong>This field will be mandatory in a future release.</strong></td>
</tr>
<tr>
<td>dispatcher</td>
<td>String</td>
<td>No</td>
<td>An identifier specifying the <a href="03-architecture.html#lava-dispatchers">dispatcher</a> for the job.</td>
</tr>
<tr>
<td>enabled</td>
<td>Boolean|String</td>
<td>No</td>
<td>Whether or not the job is enabled. Defaults to <code>false</code>. String values are Jinja rendered, providing a means to dynamically enable / disable jobs at run-time. <a href="#the-enabled-field">More information</a>.</td>
</tr>
<tr>
<td>event_log</td>
<td>*</td>
<td>No</td>
<td>The specified value is Jinja rendered and recorded as part of the job run event information in the <a href="#the-events-table">events table</a>. <a href="#the-event_log-field">More information</a>.</td>
</tr>
<tr>
<td>globals</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of named values that are made available for Jinja rendering of <a href="08-job-actions.html#job-actions">job actions</a> and job parameters for those job types that use Jinja parameter rendering. Names beginning with <code>lava</code> (case insensitive) are reserved for lava's use. <a href="05-job-dispatch.html#handling-of-parameters-and-globals-during-dispatch">More information on parameters and globals</a>.</td>
</tr>
<tr>
<td>iteration_delay</td>
<td>String</td>
<td>No</td>
<td>The delay between attempts to run the job in the form nnX where nn is a number and X is s (seconds) or m (minutes). Default is <code>0s</code>. The maximum allowed value is specified by the <a href="10-installation-operation.html#general-configuration-parameters">ITERATION_MAX_DELAY</a> configuration parameter. See <a href="06-jobs-job-types.html#job-retries">Job Retries</a> for more information.</td>
</tr>
<tr>
<td>iteration_limit</td>
<td>Integer</td>
<td>No</td>
<td>The number of attempts that will be made to run the job. Default is 1. The maximum allowed value is specified by the <a href="10-installation-operation.html#general-configuration-parameters">ITERATION_MAX_LIMIT</a> configuration parameter. This is unrelated to the SQS related <code>max_tries</code> parameter. See <a href="06-jobs-job-types.html#job-retries">Job Retries</a> for more information.</td>
</tr>
<tr>
<td>job_id</td>
<td>String</td>
<td>Yes</td>
<td>The unique job identifier for the realm. It is possible to have some grouping of jobs using a path like structure. e.g. <code>job_group/myjob_01</code>.</td>
</tr>
<tr>
<td>max_run_delay</td>
<td>String</td>
<td>No</td>
<td>The maximum allowed delay between when a job is dispatched and when it is run in the form <code>nnX</code> where <code>nn</code> is a number and <code>X</code> is <code>s</code> (seconds), <code>m</code> (minutes), <code>h</code> (hours) or <code>d</code> (days). If this limit is exceeded, the job run is discarded with an error. If not specified, no limit is imposed other than the message retention period of the worker SQS job queue.</td>
</tr>
<tr>
<td>max_tries</td>
<td>Number</td>
<td>No</td>
<td>By default, if a lava worker fails mid-job, SQS will resubmit the dispatch request at the end of the visibility timeout. If <code>max_tries</code> is set to a positive integer value, then the dispatch message will be discarded when the SQS message <code>ApproximateReceiveCount</code> exceeds the specified value. Note that the minimum of the value of the <code>Maximum Receives</code> value for the worker SQS queue (if set) and any limit specified by the <code>--retries</code> worker option is still the upper limit.</td>
</tr>
<tr>
<td>on_fail</td>
<td>List[Map]</td>
<td>No</td>
<td>Job specific <a href="08-job-actions.html#job-actions">on_fail actions</a> for the job. Overrides any realm level setting.</td>
</tr>
<tr>
<td>on_retry</td>
<td>List[Map]</td>
<td>No</td>
<td>Job specific <a href="08-job-actions.html#job-actions">on_retry actions</a> for the job. Overrides any realm level setting.</td>
</tr>
<tr>
<td>on_success</td>
<td>List[Map]</td>
<td>No</td>
<td>Job specific <a href="08-job-actions.html#job-actions">on_success actions</a> for the job. Overrides any realm level setting.</td>
</tr>
<tr>
<td>owner</td>
<td>String</td>
<td>Not yet</td>
<td>Name or email address of the job owner. <strong>This field will be mandatory in a future release.</strong></td>
</tr>
<tr>
<td>parameters</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of parameters that will be passed to the job. The parameter structure is dependent on the <a href="06-jobs-job-types.html#jobs-and-job-types">job type</a>.</td>
</tr>
<tr>
<td>payload</td>
<td>*</td>
<td>Yes</td>
<td>The job payload. The type and format is job type dependent. Currently, a value is required even for job types that do not need it. In this case set the value to <code>null</code>.</td>
</tr>
<tr>
<td>schedule</td>
<td>String</td>
<td>No</td>
<td>A <a href="https://crontab.guru">cron</a> schedule that specifies when the job will run. Refer to the section <a href="05-job-dispatch.html#schedule-specifications">Schedule Specifications</a> for more information. If not specified, the job can be dispatched on demand but will not be scheduled.</td>
</tr>
<tr>
<td>state</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of <a href="09-lava-state-manager.html#the-lava-state-manager">state items</a>. For each item, the key is the <code>state_id</code> and the value is a default value. The default values are replaced at run-time by the current value of the specified state item in the <a href="#the-state-table">state</a> table, if it exists.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Yes</td>
<td>The name of the <a href="06-jobs-job-types.html#jobs-and-job-types">job handler</a> to run.</td>
</tr>
<tr>
<td>worker</td>
<td>String</td>
<td>Yes</td>
<td>The name of a worker that can run the job.</td>
</tr>
<tr>
<td>X-*</td>
<td>String</td>
<td>No</td>
<td>Any fields beginning with <code>x-</code> or <code>X-</code> are ignored by lava. These can be used as required for other purposes (e.g. CI/CD, versioning or other related purposes). The <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a> uses a number of these fields for various purposes.</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently, unknown fields in the job specification will result in a
deprecation warning being written to the worker's log but the job is permitted
to run. A future release will reject jobs that have unknown fields.</p>
</div>
<h3 id="the-enabled-field">The enabled Field<a class="headerlink" href="#the-enabled-field" title="Permanent link">&para;</a></h3>
<p>Prior to v8.0 (Incahuasi), the <code>enabled</code> field was a simple, static boolean
value. If <code>false</code>, the job would be skipped. This behaviour is unchanged in
v8+ if the value is boolean.</p>
<p>If the value is a string, it is Jinja rendered. If the resulting value is the
string <code>true</code> (case and surrounding whitespace are ignored), the job is enabled
to run. Any other value will result in the job being skipped. This allows job
execution to be conditional on run-time values. </p>
<p>The following variables are made available to the Jinja renderer.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The <code>globals</code> from the job specification updated with any globals received in the job dispatch.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a>.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>As an example, the following job specification fragment will only enable the
job if the value of the global <code>a</code> is palindromic (which it is, in the example):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><span class="p">{</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{% set word = globals.a | lower %}{{ word == word | reverse }}&quot;</span><span class="p">,</span>
</span><span id="__span-0-3"><span class="w">  </span><span class="nt">&quot;globals&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-0-4"><span class="w">    </span><span class="nt">&quot;#&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Global a is a palindrome.&quot;</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="w">    </span><span class="nt">&quot;a&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tattarrattat&quot;</span>
</span><span id="__span-0-6"><span class="w">  </span><span class="p">}</span>
</span><span id="__span-0-7"><span class="p">}</span>
</span></code></pre></div>
<p>In this example, the job is only enabled if the value of the <code>x</code> field in
<a href="#the-state-table">state</a> item <code>sid</code> is odd:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-1-1"><span class="p">{</span>
</span><span id="__span-1-2"><span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{% set val = state[&#39;sid&#39;].x | int %}{{ val % 2 == 1 }}&quot;</span><span class="p">,</span>
</span><span id="__span-1-3"><span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><span class="w">    </span><span class="nt">&quot;sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;-- set at run-time --&quot;</span>
</span><span id="__span-1-5"><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-6"><span class="p">}</span>
</span></code></pre></div>
<p>As a more complex example, this job specification fragment only enables a
job if it has not run successfully in the last 4 hours:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">{</span>
</span><span id="__span-2-2"><span class="w">  </span><span class="nt">&quot;schedule&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;30 * * * *&quot;</span><span class="p">,</span>
</span><span id="__span-2-3"><span class="w">  </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{% set ts=utils.parsedate.parse(state[&#39;sid&#39;]) %}{{ ustart-ts &gt; utils.timedelta(hours=4) }}&quot;</span><span class="p">,</span>
</span><span id="__span-2-4"><span class="w">  </span><span class="nt">&quot;on_success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-5"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-2-6"><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;state&quot;</span><span class="p">,</span>
</span><span id="__span-2-7"><span class="w">      </span><span class="nt">&quot;state_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sid&quot;</span><span class="p">,</span>
</span><span id="__span-2-8"><span class="w">      </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ ustart.isoformat() }}&quot;</span>
</span><span id="__span-2-9"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-2-10"><span class="w">  </span><span class="p">],</span>
</span><span id="__span-2-11"><span class="w">  </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-12"><span class="w">    </span><span class="nt">&quot;sid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2000-01-01T00:00:00Z&quot;</span>
</span><span id="__span-2-13"><span class="w">  </span><span class="p">},</span>
</span><span id="__span-2-14"><span class="w">  </span><span class="nt">&quot;event_log&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Time since last run: {% set ts=utils.parsedate.parse(state[&#39;sid&#39;]) %}{{ ustart-ts }}&quot;</span>
</span><span id="__span-2-15">
</span><span id="__span-2-16"><span class="p">}</span>
</span></code></pre></div>
<p>Some points to note:</p>
<ul>
<li>
<p>A state variable is declared to hold an ISO 8601 datetime containing the
    last successful run-time for the job. This has an initial value defined in
    the job specification.</p>
</li>
<li>
<p>The <code>enabled</code> field checks the start time of the current run against the
    previous run start time, to ensure the required period of time has passed
    (4 hours in the example).</p>
</li>
<li>
<p>Once the job runs, an <code>on_success</code> action creates a state item that records
    the start time of the successful run.</p>
</li>
<li>
<p>An <code>event_log</code> field records for posterity the time since the previous run.</p>
</li>
</ul>
<h3 id="the-event_log-field">The event_log Field<a class="headerlink" href="#the-event_log-field" title="Permanent link">&para;</a></h3>
<p>Jobs may receive critical configuration as part of the dispatch process
via parameters, globals, and state items. It can be tricky to determine from the
<a href="#the-events-table">events table</a> exactly what a job run was doing, particularly
in the event that a job run fails.</p>
<p>While it would be possible to record the entire
<a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a>, this is not
safe in all cases as sensitive values may be exposed in the
<a href="#the-events-table">events table</a>.</p>
<p>The <code>event_log</code> field allows the job specification to specify that certain
information should be recorded in the job run record in the
<a href="#the-events-table">events table</a>. The value of the field is an arbitrary
object that will be Jinja rendered and added to the
<a href="#the-events-table">events table</a> before the first iteration of the job begins.
this information is added in a new entry with a <code>logging</code> status in the <code>log</code>
field of the event record.</p>
<p>The following variables are made available to the Jinja renderer.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The <code>globals</code> from the job specification updated with any globals received in the job dispatch.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a>.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>As an example, the following job specification fragment would record the value
of a specific global.</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><span class="p">{</span>
</span><span id="__span-3-2"><span class="w">  </span><span class="nt">&quot;event_log&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;The value of global g1 is &#39;{{ globals.g1 }}&#39;&quot;</span>
</span><span id="__span-3-3"><span class="p">}</span>
</span></code></pre></div>
<p>This fragment would record two globals in a map format:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">{</span>
</span><span id="__span-4-2"><span class="w">  </span><span class="nt">&quot;event_log&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-3"><span class="w">    </span><span class="nt">&quot;g1&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ globals.g1 }}&quot;</span><span class="p">,</span>
</span><span id="__span-4-4"><span class="w">    </span><span class="nt">&quot;g2&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ globals.g2 }}&quot;</span>
</span><span id="__span-4-5"><span class="w">  </span><span class="p">}</span>
</span><span id="__span-4-6"><span class="p">}</span>
</span></code></pre></div>
<p>This fragment would record all of the globals (as a Python object converted to
a string):</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-5-1"><span class="p">{</span>
</span><span id="__span-5-2"><span class="w">  </span><span class="nt">&quot;event_log&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ globals }}&#39;&quot;</span>
</span><span id="__span-5-3"><span class="p">}</span>
</span></code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>DO NOT</strong> be cavalier with this. Take care to avoid logging sensitive
information.</p>
</div>
<h2 id="the-connections-table">The Connections Table<a class="headerlink" href="#the-connections-table" title="Permanent link">&para;</a></h2>
<p>The connections table for a given <code>&lt;REALM&gt;</code> is named <code>lava.&lt;REALM&gt;.connections</code>.
It contains information to assist job handlers make connections to external
resources, typically databases.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>conn_id</td>
<td>String</td>
<td>Yes</td>
<td>Connection identifier.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td>A short description of the connection.</td>
</tr>
<tr>
<td>enabled</td>
<td>Boolean</td>
<td>Yes</td>
<td>Whether or not the connection is enabled. Defaults to <code>false</code></td>
</tr>
<tr>
<td>owner</td>
<td>String</td>
<td>Not yet</td>
<td>Name or email address of the connection owner. <strong>This field will be mandatory in a future release.</strong></td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Yes</td>
<td>The connection type. This is used to identify a <a href="07-connectors.html#connectors">connector plugin</a> to establish the connection.</td>
</tr>
<tr>
<td>X-*</td>
<td>String</td>
<td>No</td>
<td>Any fields beginning with <code>x-</code> or <code>X-</code> are ignored by lava. These can be used as required for other purposes (e.g. CI/CD, versioning or other related purposes).</td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td>*</td>
<td>All other fields are connection type specific. For more information see the section on <a href="07-connectors.html#connectors">connectors</a>.</td>
</tr>
</tbody>
</table>
<h2 id="the-events-table">The Events Table<a class="headerlink" href="#the-events-table" title="Permanent link">&para;</a></h2>
<p>The events table for a given <code>&lt;REALM&gt;</code> is named <code>lava.&lt;REALM&gt;.events</code>. It is
populated by lava workers as they start and finish jobs runs.</p>
<p>Querying the table via the DynamoDB console can be a bit tedious so a
utility <code>lava-events</code> is provided to assist with this. Get help thus:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1">lava-events<span class="w"> </span>--help
</span></code></pre></div>
<p>The <a href="10-installation-operation.html#the-lava-gui">lava GUI</a> also provides the ability to query
the events table.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>hostname</td>
<td>String</td>
<td>Yes</td>
<td>The hostname of the worker that ran the job.</td>
</tr>
<tr>
<td>instance_id</td>
<td>String</td>
<td>No</td>
<td>The AWS EC2 instance ID. Not present when the worker is not an EC2 instance.</td>
</tr>
<tr>
<td>job_id</td>
<td>String</td>
<td>Yes</td>
<td>The unique job identifier for the realm.</td>
</tr>
<tr>
<td>log</td>
<td>List[Map]</td>
<td>Yes</td>
<td>A list of events that have occurred for this run of the job. Each entry in the list is a map which will contain <code>info</code>, <code>status</code> and <code>ts_event</code> fields. The contents of the <code>info</code> field are job type dependent.</td>
</tr>
<tr>
<td>run_id</td>
<td>String</td>
<td>Yes</td>
<td>The UUID for the job run. This is used in the naming of job outputs.</td>
</tr>
<tr>
<td>status</td>
<td>String</td>
<td>Yes</td>
<td>The most recent <code>status</code> value for this job run. It will reflect the <code>status</code> value of the latest entry in the <code>log</code> list.</td>
</tr>
<tr>
<td>ts_dispatch</td>
<td>String</td>
<td>Yes</td>
<td>A timezone aware ISO 8601 format timestamp for the time the job was dispatched.</td>
</tr>
<tr>
<td>ts_event</td>
<td>String</td>
<td>Yes</td>
<td>A timezone aware ISO 8601 format timestamp for the most recent event for this job run. It will reflect the <code>ts_event</code> value for this job run.</td>
</tr>
<tr>
<td>ttl</td>
<td>Number</td>
<td>Yes</td>
<td>The epoch timestamp when the event record will expire. DynamoDB manages expiry automatically provided the TTL attribute for the table is set to <code>ttl</code>.</td>
</tr>
<tr>
<td>tu_event</td>
<td>String</td>
<td>Yes</td>
<td>A timezone naive ISO 8601 format timestamp for the UTC time for the most recent event for this job run. It will reflect the <code>tu_event</code> value for this job run.</td>
</tr>
<tr>
<td>worker_id</td>
<td>String</td>
<td>No</td>
<td>If the worker is an AWS EC2 instance, the instance ID.</td>
</tr>
<tr>
<td>worker</td>
<td>String</td>
<td>Yes</td>
<td>The name of the worker that ran the job.</td>
</tr>
</tbody>
</table>
<h2 id="the-s3triggers-table">The S3triggers Table<a class="headerlink" href="#the-s3triggers-table" title="Permanent link">&para;</a></h2>
<p>The s3triggers table for a given <code>&lt;REALM&gt;</code> is named <code>lava.&lt;REALM&gt;.s3triggers</code>.
It is used to map S3 bucket events to jobs. When an S3 event occurs with a
bucket and object prefix matching an entry in the table, the corresponding lava
job is dispatched. See
<a href="05-job-dispatch.html#dispatching-jobs-from-s3-events">Triggering Jobs from S3 Events</a>
for more information.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>bucket</td>
<td>String</td>
<td>Yes</td>
<td>Bucket name.</td>
</tr>
<tr>
<td>delay</td>
<td>String</td>
<td>No</td>
<td>Dispatch message sending delay in the form <code>nnX</code> where <code>nn</code> is a number and <code>X</code> is <code>s</code> (seconds) or <code>m</code> (minutes). The maximum allowed value is 15 minutes.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>No</td>
<td>A short description of the trigger.</td>
</tr>
<tr>
<td>enabled</td>
<td>Boolean</td>
<td>Yes</td>
<td>Whether or not the s3trigger is enabled.</td>
</tr>
<tr>
<td>globals</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of named values that are included in the dispatch request. These are Jinja rendered. Names beginning with <code>lava</code> (case insensitive) are reserved for lava's use. <a href="05-job-dispatch.html#handling-of-parameters-and-globals-during-dispatch">More information on parameters and globals</a>.</td>
</tr>
<tr>
<td>jinja</td>
<td>Boolean</td>
<td>No</td>
<td>If <code>false</code>, disable Jinja rendering of the parameters and globals. Defaults to <code>true</code>.</td>
</tr>
<tr>
<td>job_id</td>
<td>String | List[String]</td>
<td>Yes</td>
<td>Job identifier for the lava job that will be dispatched, or a list of job identifiers. Each is Jinja rendered before use.</td>
</tr>
<tr>
<td>owner</td>
<td>String</td>
<td>Not yet</td>
<td>Name or email address of the trigger owner. <strong>This field will be mandatory in a future release.</strong></td>
</tr>
<tr>
<td>parameters</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of parameters for the job that will be included in the dispatch. These will be Jinja rendered.</td>
</tr>
<tr>
<td>prefix</td>
<td>String</td>
<td>Yes</td>
<td>Object prefix. Do not include a trailing <code>/</code> or matches will fail. To indicate the root of the bucket, use a prefix value of <code>*</code>.</td>
</tr>
<tr>
<td>trigger_id</td>
<td>String</td>
<td>Yes</td>
<td>A unique identifier within the realm for the trigger entry.</td>
</tr>
<tr>
<td>X-*</td>
<td>String</td>
<td>No</td>
<td>Any fields beginning with <code>x-</code> or <code>X-</code> are ignored by lava. These can be used as required for other purposes (e.g. CI/CD, versioning or other related purposes).</td>
</tr>
</tbody>
</table>
<p>In addition to the fields described above, entries in the S3 triggers tab may
also contain fields starting with <code>if_</code> and <code>if_not_</code>. These cause a test
to be applied to the S3 object event, The dispatch is only performed if the test
passes in the case of <code>if_</code> fields, or fails in the case of <code>if_not_</code> fields.
The available <code>if_</code> tests are described below. There is a corresponding
<code>if_not_</code> test for each.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>if_fnmatch</td>
<td>String | List[String]</td>
<td>No</td>
<td>Perform a glob style match against the S3 object key. If a list of patterns is provided, returns true if any of the patterns match the key. The matching rules defined by Python's <a href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch">fnmatch</a> apply.</td>
</tr>
<tr>
<td>if_size_gt</td>
<td>Integer | String</td>
<td>No</td>
<td>Check that the S3 object is larger than the specified size. Values can be specified as an integer or a string in the form <code>nnX</code>, where <code>n</code> is a number and <code>X</code> is an optional unit such as 'K', 'KB', 'KiB', 'MiB' etc. Default for <code>X</code> is bytes.</td>
</tr>
<tr>
<td>if_event_type</td>
<td>String</td>
<td>No</td>
<td>Check that the S3 event type matches the specified value (e.g. <code>ObjectCreated:Put</code>). Glob style patterns are accepted (e.g. <code>ObjectCreated:*</code>).</td>
</tr>
</tbody>
</table>
<h2 id="the-state-table">The State Table<a class="headerlink" href="#the-state-table" title="Permanent link">&para;</a></h2>
<p>The state table for a given <code>&lt;REALM&gt;</code> is named <code>lava.&lt;REALM&gt;.state</code>. It is used
to allow lava jobs to save state information for limited periods of time that
can be accessed by authorised external actors or other lava jobs.</p>
<p>Creation and reading of entries in the state table are managed by the lava
<a href="09-lava-state-manager.html#the-lava-state-manager">state manager</a>. Other tools should not be used for this
purpose.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>state_id</td>
<td>String</td>
<td>Yes</td>
<td>The unique identifier for the state item.</td>
</tr>
<tr>
<td>publisher</td>
<td>String</td>
<td>No</td>
<td>An arbitrary identifier for the entity posting the event item. Not used by lava itself.</td>
</tr>
<tr>
<td>timestamp</td>
<td>String</td>
<td>No</td>
<td>An ISO 8601 format timestamp for the state item creation. Not used by lava itself.</td>
</tr>
<tr>
<td>ttl</td>
<td>Number</td>
<td>Yes</td>
<td>The epoch timestamp when the state record will expire. DynamoDB manages expiry automatically provided the TTL attribute for the table is set to <code>ttl</code>. The default and maximum time-to-live for entries in the table can be controlled by <a href="10-installation-operation.html#lava-worker-configuration">worker configuration parameters</a>.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Yes</td>
<td>The state value type. This tells the lava worker how to decode the value. See <a href="#state-item-types">State Item Types</a>.</td>
</tr>
<tr>
<td>value</td>
<td>*</td>
<td>Yes</td>
<td>The state value. The structure depends on the state type.</td>
</tr>
</tbody>
</table>
<h3 id="state-item-types">State Item Types<a class="headerlink" href="#state-item-types" title="Permanent link">&para;</a></h3>
<p>Each state record has a specified <code>type</code> that tells the worker how to decode the
<code>value</code>.  Within lava itself, this is largely transparent as the worker handles
all the necessary encoding and decoding.</p>
<p>The following types are supported:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>json</td>
<td>The value is stored as a JSON encoded object. This is the default as it provides the most fidelity in the encoding / decoding process. Lava does this automatically within its own universe. External actors should use the <a href="09-lava-state-manager.html#the-lava-state-api">lava state API</a> or the <a href="16-commands-utilities.html#lava-state-utility">lava state utility</a> rather than attempt to reproduce this process natively.</td>
</tr>
<tr>
<td>raw</td>
<td>The value is stored as a DynamoDB object. This can sometimes do unhelpful type conversions on numbers.</td>
</tr>
<tr>
<td>secure</td>
<td>This uses the same value encoding mechanism as <code>json</code> with the addition of KMS encryption. Once again, external actors should use the <a href="09-lava-state-manager.html#the-lava-state-api">lava state API</a> or the <a href="16-commands-utilities.html#lava-state-utility">lava state utility</a> rather than attempt to reproduce this process natively. KMS encryption imposes a maximum size limit of 4096 bytes on the JSON encoded state item value.</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy 2025
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            v8.2.0 (Kilauea)
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy", {"icon": {"repo": "material/github"}}], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>