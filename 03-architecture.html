
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS based distributed scheduler and job runner">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="02-concepts.html">
      
      
        <link rel="next" href="04-dynamodb-tables.html">
      
      
      <link rel="icon" href="img/lava-icons/png/256/lava-icon-256-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Architecture - Lava User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lava-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Lava User Guide" class="md-header__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lava User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Lava User Guide" class="md-nav__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    Lava User Guide
  </label>
  
    <div class="md-nav__source">
      

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-about-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="03-architecture.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lava-s3-locations" class="md-nav__link">
    <span class="md-ellipsis">
      Lava S3 Locations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sqs-queues" class="md-nav__link">
    <span class="md-ellipsis">
      SQS Queues
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-workers" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Workers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dispatchers" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Dispatchers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-components" class="md-nav__link">
    <span class="md-ellipsis">
      Auxiliary Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auxiliary Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iam-roles-and-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      IAM Roles and Permissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-keys" class="md-nav__link">
    <span class="md-ellipsis">
      KMS Keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssm-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      SSM Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sns-topics" class="md-nav__link">
    <span class="md-ellipsis">
      SNS Topics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04-dynamodb-tables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-job-dispatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Dispatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jobs-job-types.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs & Job Types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-connectors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="08-job-actions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-lava-state-manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava State Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-operation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Operation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-lava-job-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava Job Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-developing-lava-jobs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Lava Jobs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="13-jinja-rendering-in-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-enhancing-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancing Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-lava-and-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava and Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="16-commands-utilities.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="17-job-framework-samples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Framework Samples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="18-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="19-cloudformation-templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFormation Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="20-faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="21-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="22-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="23-known-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lava-s3-locations" class="md-nav__link">
    <span class="md-ellipsis">
      Lava S3 Locations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sqs-queues" class="md-nav__link">
    <span class="md-ellipsis">
      SQS Queues
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-workers" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Workers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lava-dispatchers" class="md-nav__link">
    <span class="md-ellipsis">
      Lava Dispatchers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-components" class="md-nav__link">
    <span class="md-ellipsis">
      Auxiliary Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auxiliary Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iam-roles-and-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      IAM Roles and Permissions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kms-keys" class="md-nav__link">
    <span class="md-ellipsis">
      KMS Keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssm-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      SSM Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sns-topics" class="md-nav__link">
    <span class="md-ellipsis">
      SNS Topics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="lava-architecture" x-nav="Architecture">Lava Architecture<a class="headerlink" href="#lava-architecture" title="Permanent link">&para;</a></h1>
<p>Each lava realm has the following components:</p>
<ul>
<li>
<p>A few <a href="04-dynamodb-tables.html#dynamodb-tables">DynamoDB tables</a>.</p>
</li>
<li>
<p><a href="#lava-s3-locations">S3 locations</a> for payloads
    and job outputs.</p>
</li>
<li>
<p>One or more <a href="#sqs-queues">SQS queues</a> to feed jobs to
    workers.</p>
</li>
<li>
<p>One or more <a href="10-installation-operation.html#lava-workers">workers</a>.</p>
</li>
<li>
<p>Zero or more <a href="#lava-dispatchers">dispatchers</a>.</p>
</li>
<li>
<p><a href="#auxiliary-components">Auxiliary components</a>, such as IAM
    roles, SNS topics for notices etc.</p>
</li>
<li>
<p>Optional <a href="05-job-dispatch.html#dispatching-jobs-from-s3-events">Lambda functions</a>
    for triggering jobs from S3 events and assisting external programs to
    request job dispatches.</p>
</li>
<li>
<p>A few other AWS bits and pieces.</p>
</li>
</ul>
<p>Most of these components are created by the CloudFormation templates provided
with lava. See <a href="10-installation-operation.html#lava-installation-and-operation">Installation</a>
for more information.</p>
<p>A typical realm configuration is shown below.</p>
<p><img alt="Lava Architecture" src="img/lava-architecture.png" /></p>
<h2 id="lava-s3-locations">Lava S3 Locations<a class="headerlink" href="#lava-s3-locations" title="Permanent link">&para;</a></h2>
<p>Each lava realm has two designated S3 locations:</p>
<ol>
<li>
<p>The payload area that contains the artefacts required to run a job (scripts
    etc.).  This location is specified by the <code>s3_payloads</code> field in the <a href="04-dynamodb-tables.html#the-realms-table">realms
    table</a>.</p>
</li>
<li>
<p>The temporary area that contains outputs produced during the run of the job.
    This location is specified by the <code>s3_temp</code> field in the <a href="04-dynamodb-tables.html#the-realms-table">realms
    table</a>. This area can be used to transfer
    artefacts from one job to another. It would normally have an S3 lifecycle
    rule to remove objects after a short period of time (e.g. 1 or 2 days).</p>
</li>
</ol>
<p>A bucket for each realm is created by the <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation
templates</a>.</p>
<h2 id="sqs-queues">SQS Queues<a class="headerlink" href="#sqs-queues" title="Permanent link">&para;</a></h2>
<p>Dispatchers place messages for each job run on an SQS queue where it is picked
up by a worker and executed.</p>
<p>For a given <code>&lt;REALM&gt;</code> and <code>&lt;WORKER&gt;</code>, the SQS queue name must be
<code>lava-&lt;REALM&gt;-&lt;WORKER&gt;</code>.</p>
<p>When setting up the queue, it's important to give proper consideration to the
visibility timeout and message retention period properties. The visibility 
timeout must be long enough for workers to process jobs otherwise SQS will
resubmit the message for another run before the run is finished.</p>
<p>An SQS queue for each worker is created by the <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation
templates</a>.</p>
<h2 id="lava-workers">Lava Workers<a class="headerlink" href="#lava-workers" title="Permanent link">&para;</a></h2>
<p>A lava worker is any Linux node running the worker code bundle. The worker
is multi-threaded and can be run interactively, in batch mode or as a daemon.</p>
<p>One Linux instance can run multiple workers from the same or different worker
fleets, if required. While it is possible to run workers from different realms on
the one AWS EC2 instance, this is not recommended as it means the different
realms would be sharing an IAM instance role.</p>
<p>The <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation templates</a>
create a launch template and auto scaling group for each worker fleet based on
the <a href="10-installation-operation.html#the-lava-ec2-ami">lava EC2 AMI</a>. The worker will install the lava code
from S3 and run it on boot.</p>
<h2 id="lava-dispatchers">Lava Dispatchers<a class="headerlink" href="#lava-dispatchers" title="Permanent link">&para;</a></h2>
<p>A lava dispatcher is a Lava worker that runs
<a href="06-jobs-job-types.html#job-type-lavasched">lavasched</a> jobs. Each realm must have at
least one dispatcher if jobs are to run on a schedule. The
<a href="06-jobs-job-types.html#job-type-lavasched">lavasched</a> job causes the crontab on the
node to be rebuilt with the list of jobs and their associated schedules.</p>
<p>While there can be multiple dispatchers in a realm (e.g. for load sharing or for
multiple timezones), each job can only be assigned to a single dispatcher. This
means that a worker that also serves as a dispatcher must be a singleton. It
cannot be part of an auto scaling group which allows more than one node to run.</p>
<h2 id="auxiliary-components">Auxiliary Components<a class="headerlink" href="#auxiliary-components" title="Permanent link">&para;</a></h2>
<h3 id="iam-roles-and-permissions">IAM Roles and Permissions<a class="headerlink" href="#iam-roles-and-permissions" title="Permanent link">&para;</a></h3>
<p>The realm <a href="10-installation-operation.html#building-the-cloudformation-templates">CloudFormation templates</a>
will create a base set of IAM components, both for the lava workers and for
users needing to interact with the lava environment.  See <a href="10-installation-operation.html#lava-iam-components">Lava IAM
Components</a>.</p>
<h3 id="kms-keys">KMS Keys<a class="headerlink" href="#kms-keys" title="Permanent link">&para;</a></h3>
<p>Each realm requires two AWS KMS keys:</p>
<ol>
<li>
<p><code>lava-&lt;REALM&gt;-sys</code>: The system key that should be used for things such as
    credentials when stored in the SSM parameter store. Workers need to be able
    to decrypt using this key.</p>
</li>
<li>
<p><code>lava-&lt;REALM&gt;-user</code>: The user key that should be used for encrypting data in
    the S3 bucket for the realm. Workers need to be able to encrypt and decrypt
    with this key. </p>
</li>
</ol>
<p>These keys are created by the <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation
templates</a>.</p>
<h3 id="ssm-parameters">SSM Parameters<a class="headerlink" href="#ssm-parameters" title="Permanent link">&para;</a></h3>
<p>Lava <a href="07-connectors.html#connectors">connectors</a> that require access to
confidential parameters (e.g. passwords) expect to find those in the AWS SSM
parameter store with names starting with <code>/lava/&lt;REALM&gt;/</code>. Secure string
parameters should use the <code>lava-&lt;REALM&gt;-sys</code> KMS key.</p>
<h3 id="sns-topics">SNS Topics<a class="headerlink" href="#sns-topics" title="Permanent link">&para;</a></h3>
<p>Lava <a href="08-job-actions.html#job-actions">job actions</a> can send SNS messages at the
completion of a job. While the standard worker IAM policy does not prevent
access to other topics, the <a href="10-installation-operation.html#lava-installation-and-operation">CloudFormation
templates</a> create a topic
<code>lava-&lt;REALM&gt;-notices</code> for general purpose notices.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy 2025
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            v8.2.0 (Kilauea)
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy", {"icon": {"repo": "material/github"}}], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>