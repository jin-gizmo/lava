
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS based distributed scheduler and job runner">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="07-connectors.html">
      
      
        <link rel="next" href="09-lava-state-manager.html">
      
      
      <link rel="icon" href="img/lava-icons/png/256/lava-icon-256-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Job Actions - Lava User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#job-actions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Lava User Guide" class="md-header__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lava User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Job Actions
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Lava User Guide" class="md-nav__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    Lava User Guide
  </label>
  
    <div class="md-nav__source">
      

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-about-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03-architecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04-dynamodb-tables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-job-dispatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Dispatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jobs-job-types.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs & Job Types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-connectors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="08-job-actions.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#action-type-dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: dispatch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-email" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: email
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-event" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: event
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-log" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-slack" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: slack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-sns" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: sns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-sqs" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: sqs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-state" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: state
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-lava-state-manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava State Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-operation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Operation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-lava-job-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava Job Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-developing-lava-jobs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Lava Jobs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="13-jinja-rendering-in-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-enhancing-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancing Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-lava-and-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava and Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="16-commands-utilities.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="17-job-framework-samples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Framework Samples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="18-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="19-cloudformation-templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFormation Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="20-faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="21-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="22-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="23-known-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#action-type-dispatch" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: dispatch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-email" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: email
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-event" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: event
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-log" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: log
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-slack" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: slack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-sns" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: sns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-sqs" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: sqs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#action-type-state" class="md-nav__link">
    <span class="md-ellipsis">
      Action type: state
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="job-actions">Job Actions<a class="headerlink" href="#job-actions" title="Permanent link">&para;</a></h1>
<p>Lava can perform specified actions on the completion of a job depending on
whether the job:</p>
<ul>
<li>completed successfully (<code>on_success</code>); or</li>
<li>failed and will be retried (<code>on_retry</code>); or</li>
<li>failed and won't be retried (<code>on_fail</code>).</li>
</ul>
<p>Actions are not executed if the job does not start (e.g. if the job
specification is malformed).</p>
<p>These actions are defined as part of the job specification or can be inherited
from the realm specification. An action specification at the job level will
override one at the realm level.</p>
<p>A typical action specification within a job or realm specification looks like:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-0-1"><span class="p">{</span>
</span><span id="__span-0-2"><span class="w">  </span><span class="nt">&quot;on_fail&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-3"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-4"><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sns&quot;</span><span class="p">,</span>
</span><span id="__span-0-5"><span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{job.job_id}}@{{realm.realm}} ({{job.run_id}}) failed: {{result.error}}&quot;</span><span class="p">,</span>
</span><span id="__span-0-6"><span class="w">      </span><span class="nt">&quot;topic&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:sns:ap-southeast-2:990565496141:lava-proto-notices&quot;</span>
</span><span id="__span-0-7"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-8"><span class="w">  </span><span class="p">],</span>
</span><span id="__span-0-9"><span class="w">  </span><span class="nt">&quot;on_retry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-10"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-11"><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
</span><span id="__span-0-12"><span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Failed on attempt {{ globals.lava.iteration }} but will try again!&quot;</span>
</span><span id="__span-0-13"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-14"><span class="w">  </span><span class="p">],</span>
</span><span id="__span-0-15"><span class="w">  </span><span class="nt">&quot;on_success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-0-16"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-17"><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;log&quot;</span><span class="p">,</span>
</span><span id="__span-0-18"><span class="w">      </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;It worked!&quot;</span>
</span><span id="__span-0-19"><span class="w">    </span><span class="p">},</span>
</span><span id="__span-0-20"><span class="w">    </span><span class="p">{</span>
</span><span id="__span-0-21"><span class="w">      </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dispatch&quot;</span><span class="p">,</span>
</span><span id="__span-0-22"><span class="w">      </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;downstream_job&quot;</span>
</span><span id="__span-0-23"><span class="w">    </span><span class="p">}</span>
</span><span id="__span-0-24"><span class="w">  </span><span class="p">]</span>
</span><span id="__span-0-25"><span class="p">}</span>
</span></code></pre></div>
<p>Actions in an action list are executed in the order specified.</p>
<p>Apart from the mandatory <code>action</code> field, action specification parameters are
dependent on the action type.</p>
<p>Some actions support Jinja rendering of some of the action parameters.</p>
<p>Actions are implemented using a simple plugin mechanism. Adding new actions is
relatively straightforward.</p>
<h2 id="action-type-dispatch">Action type: dispatch<a class="headerlink" href="#action-type-dispatch" title="Permanent link">&para;</a></h2>
<p>The <strong>dispatch</strong> action type dispatches another lava job.</p>
<p>Any globals available in the job that triggers the action will also be passed in
the dispatch request to the job being dispatched.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>dispatch</code>.</td>
</tr>
<tr>
<td>delay</td>
<td>String</td>
<td>No</td>
<td>Dispatch message sending delay in the form <code>nnX</code> where <code>nn</code> is a number and <code>X</code> is <code>s</code> (seconds) or <code>m</code> (minutes). The maximum allowed value is 15 minutes.</td>
</tr>
<tr>
<td>job_id</td>
<td>String</td>
<td>Yes</td>
<td>The job to be dispatched. This is Jinja rendered prior to use.</td>
</tr>
<tr>
<td>parameters</td>
<td>Map[String,*]</td>
<td>No</td>
<td>A map of parameters that will be sent with the dispatch. These are Jinja rendered prior to use. The dispatched job will receive these in the <code>parameters</code> element of its job specification.</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<h2 id="action-type-email">Action type: email<a class="headerlink" href="#action-type-email" title="Permanent link">&para;</a></h2>
<p>The <strong>email</strong> action uses either the <a href="07-connectors.html#connector-type-email">email</a> or a
bare-metal AWS Simple Email Service (SES) default to send an email
message.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>email</code>.</td>
</tr>
<tr>
<td>attachments</td>
<td>List[string]</td>
<td>No</td>
<td>A list of file names to add as attachments. If specified, <code>email_conn</code> must also be specified, as the default bare-metal AWS SES sender does not support attachments. Files can be local or in S3 (<code>s3://...</code>). Each filename is individually Jinja rendered. <strong>Be careful</strong> with this to avoid using untrusted globals in filenames.</td>
</tr>
<tr>
<td>email_conn</td>
<td>String</td>
<td>No</td>
<td>The name of an <a href="07-connectors.html#connector-type-email">email</a> connector to use for sending email. If not specified, then bare-metal AWS SES is used.</td>
</tr>
<tr>
<td>from</td>
<td>String</td>
<td>No</td>
<td>The source email address. If not specified, lava will defer to the <code>email_conn</code> connector if specified, or else look for a value in the realm specification (see below) or construct a default by scanning the SES configuration for validated domains.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>Yes</td>
<td>The message body. If the message text begins with <code>&lt;HTML&gt;</code> (case-insensitive), it is sent as a HTML message body, otherwise as text. This is Jinja rendered prior to use.</td>
</tr>
<tr>
<td>region</td>
<td>String</td>
<td>No</td>
<td>The AWS region name for the SES service. If not specified, lava will look for a value in the realm specification (see below) or use the default of <code>us-east-1</code>. Ignored if <code>email_conn</code> is specified.</td>
</tr>
<tr>
<td>subject</td>
<td>String</td>
<td>Yes</td>
<td>The message subject. This is Jinja rendered prior to use.</td>
</tr>
<tr>
<td>to</td>
<td>String <em>or</em> List[String]</td>
<td>Yes</td>
<td>The destination email address(es).</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<p>Default values for some of the fields required for the <strong>email</strong> action to use
AWS SES can be set in the <a href="04-dynamodb-tables.html#the-realms-table">realms table</a> by setting
entries in the <code>config</code> realm entry, thus:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-1-1"><span class="p">{</span>
</span><span id="__span-1-2"><span class="w">  </span><span class="nt">&quot;...&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;... other realm related elements ...&quot;</span><span class="p">,</span>
</span><span id="__span-1-3"><span class="w">  </span><span class="nt">&quot;config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-4"><span class="w">    </span><span class="nt">&quot;ses_region&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;... SES region name ...&quot;</span><span class="p">,</span>
</span><span id="__span-1-5"><span class="w">    </span><span class="nt">&quot;ses_from&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;... Default source email address&quot;</span>
</span><span id="__span-1-6"><span class="w">  </span><span class="p">}</span>
</span><span id="__span-1-7"><span class="p">}</span>
</span></code></pre></div>
<h2 id="action-type-event">Action type: event<a class="headerlink" href="#action-type-event" title="Permanent link">&para;</a></h2>
<p>The <strong>event</strong> action type sends an event to AWS EventBridge.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>event</code>.</td>
</tr>
<tr>
<td>detail_type</td>
<td>String</td>
<td>No</td>
<td>The event detail type. This is Jinja rendered prior to use. Defaults to <code>Lava Job Action</code>.</td>
</tr>
<tr>
<td>detail</td>
<td>String <em>or</em> Map[String,*]</td>
<td>No</td>
<td>Event detail. The string, or the map values, are Jinja rendered prior to use. Defaults to a map containing realm, worker, job_id, run_id and exit_status.</td>
</tr>
<tr>
<td>event_bus</td>
<td>String</td>
<td>No</td>
<td>The event bus name. This is Jinja rendered prior to use. Defaults to the default event bus.</td>
</tr>
<tr>
<td>resources</td>
<td>List[String]</td>
<td>No</td>
<td>A list of resources. This is Jinja rendered prior to use. Defaults to an empty list.</td>
</tr>
<tr>
<td>source</td>
<td>String</td>
<td>No</td>
<td>The event source. This is Jinja rendered prior to use. Defaults to <code>lava.&lt;REALM&gt;</code>.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>The <a href="10-installation-operation.html#the-lava-realm-cloudformation-template">realm CloudFormation template</a>
only provides workers with permission to put events on the default event bus.</p>
</div>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<p>This is the minimal action specification:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><span class="p">{</span>
</span><span id="__span-2-2"><span class="w">    </span><span class="nt">&quot;on_success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-3"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-2-4"><span class="w">            </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;event&quot;</span>
</span><span id="__span-2-5"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-2-6"><span class="w">    </span><span class="p">]</span>
</span><span id="__span-2-7"><span class="p">}</span>
</span></code></pre></div>
<p>It will produce an event in the default event bus like so:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-3-1"><span class="p">{</span>
</span><span id="__span-3-2"><span class="w">  </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0&quot;</span><span class="p">,</span>
</span><span id="__span-3-3"><span class="w">  </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1bdf1ead-95ef-79fd-1342-8f8ff1e57765&quot;</span><span class="p">,</span>
</span><span id="__span-3-4"><span class="w">  </span><span class="nt">&quot;detail-type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lava Job Action&quot;</span><span class="p">,</span>
</span><span id="__span-3-5"><span class="w">  </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;lava.dev&quot;</span><span class="p">,</span>
</span><span id="__span-3-6"><span class="w">  </span><span class="nt">&quot;account&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;123456789012&quot;</span><span class="p">,</span>
</span><span id="__span-3-7"><span class="w">  </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2021-07-25T05:12:23Z&quot;</span><span class="p">,</span>
</span><span id="__span-3-8"><span class="w">  </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ap-southeast-2&quot;</span><span class="p">,</span>
</span><span id="__span-3-9"><span class="w">  </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span id="__span-3-10"><span class="w">  </span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-11"><span class="w">    </span><span class="nt">&quot;realm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dev&quot;</span><span class="p">,</span>
</span><span id="__span-3-12"><span class="w">    </span><span class="nt">&quot;worker&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;core&quot;</span><span class="p">,</span>
</span><span id="__span-3-13"><span class="w">    </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;action/event/default&quot;</span><span class="p">,</span>
</span><span id="__span-3-14"><span class="w">    </span><span class="nt">&quot;run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;05175b7c-8b0d-40ed-af31-0bc846bbe400&quot;</span><span class="p">,</span>
</span><span id="__span-3-15"><span class="w">    </span><span class="nt">&quot;exit_status&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
</span><span id="__span-3-16"><span class="w">  </span><span class="p">}</span>
</span><span id="__span-3-17"><span class="p">}</span>
</span></code></pre></div>
<p>This is a sample, custom event:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-4-1"><span class="p">{</span>
</span><span id="__span-4-2"><span class="w">    </span><span class="nt">&quot;on_success&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-4-3"><span class="w">        </span><span class="p">{</span>
</span><span id="__span-4-4"><span class="w">            </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;event&quot;</span><span class="p">,</span>
</span><span id="__span-4-5"><span class="w">            </span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-6"><span class="w">                </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ job.job_id }}&quot;</span><span class="p">,</span>
</span><span id="__span-4-7"><span class="w">                </span><span class="nt">&quot;realm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{ realm.realm }}&quot;</span><span class="p">,</span>
</span><span id="__span-4-8"><span class="w">                </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{result | tojson}}&quot;</span><span class="p">,</span>
</span><span id="__span-4-9"><span class="w">                </span><span class="nt">&quot;run_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{{job.run_id }}&quot;</span><span class="p">,</span>
</span><span id="__span-4-10"><span class="w">                </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span>
</span><span id="__span-4-11"><span class="w">            </span><span class="p">}</span>
</span><span id="__span-4-12"><span class="w">        </span><span class="p">}</span>
</span><span id="__span-4-13"><span class="w">    </span><span class="p">]</span>
</span><span id="__span-4-14"><span class="p">}</span>
</span></code></pre></div>
<h2 id="action-type-log">Action type: log<a class="headerlink" href="#action-type-log" title="Permanent link">&para;</a></h2>
<p>The <strong>log</strong> action type writes a message to the logger local to the worker with
log level <code>info</code>. The worker log configuration is specified as command line
arguments so it depends on these where the message ends up.</p>
<p>For more information on worker logging arguments run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1">lava-worker<span class="w"> </span>--help
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>log</code>.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>Yes</td>
<td>The message to log. This is Jinja rendered.</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<h2 id="action-type-slack">Action type: slack<a class="headerlink" href="#action-type-slack" title="Permanent link">&para;</a></h2>
<p>The <strong>slack</strong> action sends a message to a Slack channel. It relies on
the <a href="07-connectors.html#connector-type-slack">slack connector</a> which uses
<a href="https://api.slack.com/messaging/webhooks">Slack webhooks</a>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>slack</code>.</td>
</tr>
<tr>
<td>colour</td>
<td>String</td>
<td>No</td>
<td>As per the <code>colour</code>  field of the <a href="07-connectors.html#connector-type-slack">slack connector</a>. If not specified, the value specified in the connector is used.</td>
</tr>
<tr>
<td>from</td>
<td>String</td>
<td>No</td>
<td>An arbitrary source identifier for display in the Slack message. If not specified, any default value specified in the connector will be used.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td>Yes</td>
<td>The message body. This is Jinja rendered prior to use. Only the first 3,000 characters of the rendered value are used.</td>
</tr>
<tr>
<td>preamble</td>
<td>String</td>
<td>No</td>
<td>As per the <code>preamble</code>  field of the <a href="07-connectors.html#connector-type-slack">slack connector</a>. If not specified, the value specified in the connector is used.</td>
</tr>
<tr>
<td>slack_conn</td>
<td>String</td>
<td>Yes</td>
<td>The name of a <a href="07-connectors.html#connector-type-slack">slack</a> connector to use.</td>
</tr>
<tr>
<td>style</td>
<td>String</td>
<td>No</td>
<td>As per the <code>style</code>  field of the <a href="07-connectors.html#connector-type-slack">slack connector</a>. If not specified, the value specified in the connector is used.</td>
</tr>
<tr>
<td>subject</td>
<td>String</td>
<td>No</td>
<td>The message subject. This is Jinja rendered prior to use. Only the first 250 characters of the rendered value are used.</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<h2 id="action-type-sns">Action type: sns<a class="headerlink" href="#action-type-sns" title="Permanent link">&para;</a></h2>
<p>The <strong>sns</strong> action type sends a message to an SNS topic.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>sns</code>.</td>
</tr>
<tr>
<td>message</td>
<td>String <em>or</em> Map[String,*]</td>
<td>Yes</td>
<td>The message body. This can be either a string or an object. If it is an object it will be JSON encoded before sending. This is Jinja rendered.</td>
</tr>
<tr>
<td>subject</td>
<td>String</td>
<td>No</td>
<td>The message subject. This is Jinja rendered. The rendered value will be truncated to 100 characters.</td>
</tr>
<tr>
<td>topic</td>
<td>String</td>
<td>Yes</td>
<td>The topic ARN.</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<p>This is an example of how a JSON formatted object can be sent:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1">{
</span><span id="__span-6-2">    &quot;on_success&quot; : [
</span><span id="__span-6-3">        {
</span><span id="__span-6-4">            &quot;action&quot;: &quot;sns&quot;,
</span><span id="__span-6-5">            &quot;message&quot;: {
</span><span id="__span-6-6">                &quot;key1&quot;: &quot;Hello world&quot;,
</span><span id="__span-6-7">                &quot;key2&quot;: {
</span><span id="__span-6-8">                    &quot;key2a&quot;: &quot;{{ job.globals.a_global }}&quot;,
</span><span id="__span-6-9">                    &quot;key2b&quot;: 42
</span><span id="__span-6-10">                }
</span><span id="__span-6-11">            },
</span><span id="__span-6-12">            &quot;topic&quot;: &quot;arn:aws:sns:ap-southeast-2:123456789012:mytopic&quot;
</span><span id="__span-6-13">        }
</span><span id="__span-6-14">    ]
</span><span id="__span-6-15">}
</span></code></pre></div>
<h2 id="action-type-sqs">Action type: sqs<a class="headerlink" href="#action-type-sqs" title="Permanent link">&para;</a></h2>
<p>The <strong>sqs</strong> action type sends a message to an SQS queue.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>sqs</code>.</td>
</tr>
<tr>
<td>dedup_id</td>
<td>String</td>
<td>No</td>
<td>The token used for deduplication of sent messages. This parameter applies only to FIFO queues. This is Jinja rendered.</td>
</tr>
<tr>
<td>delay</td>
<td>String</td>
<td>No</td>
<td>Message sending delay in the form <code>nnX</code> where <code>nn</code> is a number and <code>X</code> is <code>s</code> (seconds) or <code>m</code> (minutes). The maximum allowed value is 15 minutes.</td>
</tr>
<tr>
<td>group_id</td>
<td>String</td>
<td>No</td>
<td>The tag that specifies that a message belongs to a specific message group. This parameter applies only to FIFO queues. This is Jinja rendered.</td>
</tr>
<tr>
<td>message</td>
<td>String <em>or</em>  Map[String,*]</td>
<td>Yes</td>
<td>The message body. This can be either a string or an object. If it is an object it will be JSON encoded before sending. This is Jinja rendered.</td>
</tr>
<tr>
<td>queue</td>
<td>String</td>
<td>Yes</td>
<td>The name or URL of the queue (not the ARN!).</td>
</tr>
</tbody>
</table>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>
<p>This is an example of how a JSON formatted object can be sent:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1">{
</span><span id="__span-7-2">    &quot;on_success&quot; : [
</span><span id="__span-7-3">        {
</span><span id="__span-7-4">            &quot;action&quot;: &quot;sqs&quot;,
</span><span id="__span-7-5">            &quot;message&quot;: {
</span><span id="__span-7-6">                &quot;key1&quot;: &quot;Hello world&quot;,
</span><span id="__span-7-7">                &quot;key2&quot;: {
</span><span id="__span-7-8">                    &quot;key2a&quot;: &quot;{{ job.globals.a_global }}&quot;,
</span><span id="__span-7-9">                    &quot;key2b&quot;: 42
</span><span id="__span-7-10">                }
</span><span id="__span-7-11">            },
</span><span id="__span-7-12">            &quot;topic&quot;: &quot;myqueue&quot;
</span><span id="__span-7-13">        }
</span><span id="__span-7-14">    ]
</span><span id="__span-7-15">}
</span></code></pre></div>
<h2 id="action-type-state">Action type: state<a class="headerlink" href="#action-type-state" title="Permanent link">&para;</a></h2>
<p>The <strong>state</strong> action type allows jobs to post <a href="09-lava-state-manager.html#the-lava-state-manager">state items</a>
that can be subsequently retrieved by other jobs or authorised external actors.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>action</td>
<td>String</td>
<td>Yes</td>
<td>The action type: <code>state</code>.</td>
</tr>
<tr>
<td>kms_key</td>
<td>String</td>
<td>No</td>
<td>The <a href="04-dynamodb-tables.html#state-item-types">secure</a> state item type supports KMS encryption of the value. This field specifies the KMS key to use, either as a KMS key ARN or a key alias in the form <code>alias/key-id</code>. Defaults to the <code>sys</code> key for the lava realm. Ignored for other state item types.</td>
</tr>
<tr>
<td>publisher</td>
<td>String</td>
<td>No</td>
<td>An arbitrary identifier for the entity posting the event item. Not used by lava itself. The default is the job ID. This is Jinja rendered prior to use.</td>
</tr>
<tr>
<td>state_id</td>
<td>String</td>
<td>Yes</td>
<td>The state entry ID. This is Jinja rendered prior to use.</td>
</tr>
<tr>
<td>ttl</td>
<td>String</td>
<td>No</td>
<td>Time to live for the state item specified as a duration in the form <code>nnX</code> where <code>nn</code> is a number and <code>X</code> is <code>s</code> (seconds), <code>m</code> (minutes), <code>h</code> (hours) or <code>d</code> (days). If greater than the <a href="10-installation-operation.html#lava-worker-configuration">maximum specified for the realm</a>, it will be silently reduced to that value. A <a href="10-installation-operation.html#lava-worker-configuration">default value</a> is provided by lava which can be overridden at the realm level.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>No</td>
<td>The <a href="04-dynamodb-tables.html#state-item-types">state item type</a>. If not specified, the <code>json</code> type is used.</td>
</tr>
<tr>
<td>value</td>
<td>*</td>
<td>Yes</td>
<td>A JSON encodable object. This is Jinja rendered prior to use.</td>
</tr>
</tbody>
</table>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Do not create state items with a <code>state_id</code> starting with <code>lava</code>.
This prefix is reserved.</p>
</div>
<p>The Jinja rendered action parameters have the following variables injected.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>globals</td>
<td>dict[str,*]</td>
<td>The globals map for the job that triggered the action.</td>
</tr>
<tr>
<td>job</td>
<td>dict[str,*]</td>
<td>The <a href="13-jinja-rendering-in-lava.html#the-augmented-job-specification">augmented job specification</a> for the job that triggered the action.</td>
</tr>
<tr>
<td>realm</td>
<td>dict[str,*]</td>
<td>The realm specification.</td>
</tr>
<tr>
<td>result</td>
<td>dict[str,*]</td>
<td>The result object from the job that triggered the action.</td>
</tr>
<tr>
<td>start</td>
<td>datetime</td>
<td>The local time when the job run started.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>A dictionary of the state items imported into the job, keyed on state_id. The default values are updated at run-time with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ustart</td>
<td>datetime</td>
<td>The UTC time when the job run started.</td>
</tr>
<tr>
<td>utils</td>
<td>dict[str,runnable]</td>
<td>A dictionary of <a href="13-jinja-rendering-in-lava.html#jinja-utility-functions">utility functions</a> that can be used in the Jinja markup.</td>
</tr>
</tbody>
</table>
<p>Refer to <a href="13-jinja-rendering-in-lava.html#jinja-rendering-in-lava">Jinja Rendering in Lava</a>
for more information.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy 2025
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            v8.2.0 (Kilauea)
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy", {"icon": {"repo": "material/github"}}], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>