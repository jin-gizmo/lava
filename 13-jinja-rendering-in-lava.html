
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AWS based distributed scheduler and job runner">
      
      
        <meta name="author" content="Murray Andrews">
      
      
      
        <link rel="prev" href="12-developing-lava-jobs.html">
      
      
        <link rel="next" href="14-enhancing-lava.html">
      
      
      <link rel="icon" href="img/lava-icons/png/256/lava-icon-256-transparent.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Jinja Rendering in Lava - Lava User Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="css/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#jinja-rendering-in-lava" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Lava User Guide" class="md-header__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lava User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Jinja Rendering in Lava
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Lava User Guide" class="md-nav__button md-logo" aria-label="Lava User Guide" data-md-component="logo">
      
  <img src="img/lava-icons/svg/256/lava-icon-256-opaque.svg" alt="logo">

    </a>
    Lava User Guide
  </label>
  
    <div class="md-nav__source">
      

<a href="https://github.com/jin-gizmo/lava" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Lava on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="01-about-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="02-concepts.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="03-architecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="04-dynamodb-tables.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DynamoDB Tables
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="05-job-dispatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Dispatch
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="06-jobs-job-types.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jobs & Job Types
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="07-connectors.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="08-job-actions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Actions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="09-lava-state-manager.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava State Manager
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="10-installation-operation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation & Operation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="11-lava-job-framework.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava Job Framework
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="12-developing-lava-jobs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developing Lava Jobs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="13-jinja-rendering-in-lava.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Jinja Rendering in Lava
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-augmented-job-specification" class="md-nav__link">
    <span class="md-ellipsis">
      The Augmented Job Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-structured-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Structured Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-datetime-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      DateTime Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jinja-utility-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Jinja Utility Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="14-enhancing-lava.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enhancing Lava
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="15-lava-and-docker.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lava and Docker
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="16-commands-utilities.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands & Utilities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="17-job-framework-samples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Job Framework Samples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="18-api.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="19-cloudformation-templates.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CloudFormation Templates
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="20-faq.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="21-release-notes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="22-credits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="23-known-issues.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Known Issues
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-augmented-job-specification" class="md-nav__link">
    <span class="md-ellipsis">
      The Augmented Job Specification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-structured-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      Structured Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-datetime-attributes" class="md-nav__link">
    <span class="md-ellipsis">
      DateTime Attributes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jinja-utility-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Jinja Utility Functions
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="jinja-rendering-in-lava">Jinja Rendering in Lava<a class="headerlink" href="#jinja-rendering-in-lava" title="Permanent link">&para;</a></h1>
<p>Lava uses <a href="http://jinja.pocoo.org/">Jinja</a> extensively to provide flexibility
in the preparation of job payloads, parameters and
<a href="08-job-actions.html#job-actions">post-job actions</a>.</p>
<p>The full range of Jinja syntax is available, including attribute value
substitutions using <code>{{ ... }}</code> delimiters and control structures (loops,
conditionals etc.) using <code>{% ... %}</code> syntax.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Note that the <a href="11-lava-job-framework.html#the-lava-job-framework">lava job framework</a>
deliberately uses <code>&lt;{ ...}&gt;</code>and <code>&lt;% ... %&gt;</code> delimiters to differentiate
between build-time rendering done in the framework and run-time rendering
performed by the lava worker.</p>
</div>
<p>The attributes made available to the renderer vary by job and action type.
Typically they include elements such as:</p>
<ul>
<li>
<p>realm specification details</p>
</li>
<li>
<p><a href="#the-augmented-job-specification">augmented job specification</a>
    details</p>
</li>
<li>
<p>job run details</p>
</li>
<li>
<p>job <a href="05-job-dispatch.html#globals">globals</a>, which includes user defined globals and
    <a href="05-job-dispatch.html#globals-owned-by-lava">globals owned and provided by lava</a></p>
</li>
<li>
<p><a href="09-lava-state-manager.html#the-lava-state-manager">state item</a> values.</p>
</li>
</ul>
<p>Attributes provided to the renderer are typically one of the following types:</p>
<ul>
<li>
<p>Scalar values (strings, integers etc)</p>
</li>
<li>
<p><a href="#working-with-structured-attributes">Structured objects</a></p>
</li>
<li>
<p><a href="#working-with-datetime-attributes">DateTime values</a></p>
</li>
<li>
<p><a href="#jinja-utility-functions">Utility functions</a> provided for
    convenience.</p>
</li>
</ul>
<p>Refer to specific job and action types for details.</p>
<h2 id="the-augmented-job-specification">The Augmented Job Specification<a class="headerlink" href="#the-augmented-job-specification" title="Permanent link">&para;</a></h2>
<p>The job specification passed to the Jinja renderer for jobs and actions
has the same contents as the relevant item from the
<a href="04-dynamodb-tables.html#the-jobs-table">jobs</a> table with the addition of the
following elements:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>realm</td>
<td>str</td>
<td>The realm name.</td>
</tr>
<tr>
<td>run_id</td>
<td>str</td>
<td>The run ID.</td>
</tr>
<tr>
<td>state</td>
<td>dict[str,*]</td>
<td>The state map from the <a href="04-dynamodb-tables.html#the-jobs-table">job</a> specification, updated to replace the default values from the map with any current values obtainable from the <a href="04-dynamodb-tables.html#the-state-table">state</a> table.</td>
</tr>
<tr>
<td>ts_dispatch</td>
<td>datetime</td>
<td>The timezone aware datetime when the job was dispatched.</td>
</tr>
<tr>
<td>ts_start</td>
<td>datetime</td>
<td>The timezone aware local datetime when the job started.</td>
</tr>
<tr>
<td>ts_ustart</td>
<td>datetime</td>
<td>The timezone aware UTC datetime when the job started.</td>
</tr>
</tbody>
</table>
<h2 id="working-with-structured-attributes">Working with Structured Attributes<a class="headerlink" href="#working-with-structured-attributes" title="Permanent link">&para;</a></h2>
<p>Some of the attributes passed to the Jinja renderer are structured objects.</p>
<p>For example, the <code>realm</code> attribute is the DynamoDB map object from the
<a href="04-dynamodb-tables.html#the-realms-table">realms</a> table for the realm. This is
converted to a Python dictionary and passed in that form to the Jinja renderer.
Elements of this object can be referenced using standard Jinja object
references.  For example, the realm name can be injected as either
<code>{{ realm.realm }}</code> or <code>{{ realm["realm"] }}</code>.</p>
<h2 id="working-with-datetime-attributes">Working with DateTime Attributes<a class="headerlink" href="#working-with-datetime-attributes" title="Permanent link">&para;</a></h2>
<p>Some of the attributes passed to the Jinja renderer are DateTime attributes.
These include the <code>start</code> and <code>ustart</code> attributes that capture the job start
time in local and UTC time respectively.</p>
<p>Within Jinja, these become standard Python
<a href="https://docs.python.org/3/library/datetime.html">datetime.datetime</a> objects.
Jinja thus provides access to all the methods associated with a Python
datetime. The
<a href="https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior">strptime()</a>
method is particularly useful. For example:</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-0-1"><span class="c">{# Get the job start date in local time #}</span>
</span><span id="__span-0-2"><span class="cp">{{</span> <span class="nv">start.strptime</span><span class="o">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-0-3">
</span><span id="__span-0-4"><span class="c">{# Get the job start time in UTC as an ISOO 8601 format timestamp #}</span>
</span><span id="__span-0-5"><span class="cp">{{</span> <span class="nv">ustart.isoformat</span><span class="o">()</span> <span class="cp">}}</span>
</span></code></pre></div>
<p>It is even possible to do some elementary date calculations, although this can
be accomplished more easily since lava version 4.3.0 (Volc√°n Wolf) using the
provided <a href="#jinja-utility-functions">utility functions</a>.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-1-1"><span class="c">{# Calculate yesterday&#39;s date #}</span>
</span><span id="__span-1-2"><span class="cp">{{</span> <span class="o">(</span><span class="nv">start.fromtimestamp</span><span class="o">(</span><span class="nv">start.timestamp</span><span class="o">()-</span><span class="m">86400</span><span class="o">))</span><span class="nv">.date</span><span class="o">()</span> <span class="cp">}}</span>
</span></code></pre></div>
<h2 id="jinja-utility-functions">Jinja Utility Functions<a class="headerlink" href="#jinja-utility-functions" title="Permanent link">&para;</a></h2>
<p>Lava also provides a number of utilities to the Jinja renderer as
Python runnable objects in the <code>utils</code> attribute.</p>
<h4 id="date">date<a class="headerlink" href="#date" title="Permanent link">&para;</a></h4>
<p>This is the standard Python
<a href="https://docs.python.org/3/library/datetime.html#datetime.date">datetime.date</a>
class.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-2-1"><span class="c">{# The epoch #}</span>
</span><span id="__span-2-2"><span class="cp">{{</span> <span class="nv">utils.date</span><span class="o">(</span><span class="nv">year</span><span class="o">=</span><span class="m">1970</span><span class="o">,</span> <span class="nv">month</span><span class="o">=</span><span class="m">1</span><span class="o">,</span> <span class="nv">day</span><span class="o">=</span><span class="m">1</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-2-3">
</span><span id="__span-2-4"><span class="c">{# What day of the week is next year&#39;s ANZAC day? #}</span>
</span><span id="__span-2-5"><span class="cp">{{</span> <span class="nv">utils.date</span><span class="o">(</span><span class="nv">year</span><span class="o">=</span><span class="nv">ustart.year</span> <span class="o">+</span> <span class="m">1</span><span class="o">,</span> <span class="nv">month</span><span class="o">=</span><span class="m">4</span><span class="o">,</span> <span class="nv">day</span><span class="o">=</span><span class="m">25</span><span class="o">)</span><span class="nv">.strftime</span><span class="o">(</span><span class="s1">&#39;%A&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="datetime">datetime<a class="headerlink" href="#datetime" title="Permanent link">&para;</a></h4>
<p>This is the standard Python
<a href="https://docs.python.org/3/library/datetime.html#datetime.datetime">datetime.datetime</a>
class.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-3-1"><span class="c">{# Next new year&#39;s day #}</span>
</span><span id="__span-3-2"><span class="cp">{{</span> <span class="nv">utils.datetime</span><span class="o">(</span><span class="nv">year</span><span class="o">=</span><span class="nv">ustart.year</span> <span class="o">+</span> <span class="m">1</span><span class="o">,</span> <span class="nv">month</span><span class="o">=</span><span class="m">1</span><span class="o">,</span> <span class="nv">day</span><span class="o">=</span><span class="m">1</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-3-3">
</span><span id="__span-3-4"><span class="c">{# What day of the week is that? #}</span>
</span><span id="__span-3-5"><span class="cp">{{</span> <span class="nv">utils.datetime</span><span class="o">(</span><span class="nv">year</span><span class="o">=</span><span class="nv">ustart.year</span> <span class="o">+</span> <span class="m">1</span><span class="o">,</span> <span class="nv">month</span><span class="o">=</span><span class="m">1</span><span class="o">,</span> <span class="nv">day</span><span class="o">=</span><span class="m">1</span><span class="o">)</span><span class="nv">.strftime</span><span class="o">(</span><span class="s1">&#39;%A&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="dateutil">dateutil<a class="headerlink" href="#dateutil" title="Permanent link">&para;</a></h4>
<p>This is the <a href="https://dateutil.readthedocs.io/en/stable/index.html">dateutil</a>
Python module.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-4-1"><span class="c">{# Get the date 6 months from now #}</span>
</span><span id="__span-4-2"><span class="cp">{{</span> <span class="nv">ustart</span> <span class="o">+</span> <span class="nv">utils.dateutil.relativedelta.relativedelta</span><span class="o">(</span><span class="nv">months</span><span class="o">=</span><span class="m">6</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<p>If the long module path gets too painful ...</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-5-1"><span class="cp">{%</span> <span class="k">set</span> <span class="nv">relativedelta</span> <span class="o">=</span> <span class="nv">utils.dateutil.relativedelta.relativedelta</span> <span class="cp">%}</span>
</span><span id="__span-5-2"><span class="cp">{{</span> <span class="nv">ustart</span> <span class="o">+</span> <span class="nv">relativedelta</span><span class="o">(</span><span class="nv">months</span><span class="o">=</span><span class="m">6</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="parsedate">parsedate<a class="headerlink" href="#parsedate" title="Permanent link">&para;</a></h4>
<p>This is the
<a href="https://dateutil.readthedocs.io/en/stable/parser.html#dateutil.parser">dateutil.parser</a>
module. It is useful for parsing strings into dates.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-6-1"><span class="c">{# Convert a string back to a datetime #}</span>
</span><span id="__span-6-2"><span class="cp">{{</span> <span class="nv">utils.parsedate.isoparse</span><span class="o">(</span><span class="s1">&#39;2020-02-11T09:30:00+11:00&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a legacy feature but is still supported. The
alternative is <code>utils.dateutil.parser</code>.</p>
</div>
<h4 id="path">path<a class="headerlink" href="#path" title="Permanent link">&para;</a></h4>
<p>This is the standard Python <a href="https://docs.python.org/3/library/os.path.html">os.path</a>
module.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-7-1"><span class="c">{# &quot;s3://bucket.xyzzy.com/an/s3/key&quot; --&gt; &quot;key&quot; #}</span>
</span><span id="__span-7-2"><span class="cp">{{</span> <span class="nv">utils.path.basename</span><span class="o">(</span><span class="s1">&#39;s3://bucket.xyzzy.com/an/s3/key&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-7-3">
</span><span id="__span-7-4"><span class="c">{# Get the last component of the lava temp bucket prefix #}</span>
</span><span id="__span-7-5"><span class="cp">{{</span> <span class="nv">utils.path.basename</span><span class="o">(</span><span class="nv">realm.s3_temp</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="re">re<a class="headerlink" href="#re" title="Permanent link">&para;</a></h4>
<p>This is the standard Python <a href="https://docs.python.org/3/library/re.html">re</a>
(regex) module. It is useful for extracting selected components of other render
variables.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-8-1"><span class="c">{# &quot;s3://bucket.xyzzy.com/an/s3/key&quot; --&gt; &quot;bucket&quot; #}</span>
</span><span id="__span-8-2"><span class="cp">{{</span> <span class="nv">utils.re.search</span><span class="o">(</span><span class="s1">&#39;s3://([^.]*)&#39;</span><span class="o">,</span> <span class="s1">&#39;s3://bucket.xyzzy.com/an/s3/key)&#39;</span><span class="nv">.group</span><span class="o">(</span><span class="m">1</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="s3bucket">s3bucket<a class="headerlink" href="#s3bucket" title="Permanent link">&para;</a></h4>
<p>Extract the S3 bucket name component from a string.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-9-1"><span class="c">{# &quot;s3://bucket.xyzzy.com/an/s3/key&quot; --&gt; &quot;bucket.xyzzy.com&quot; #}</span>
</span><span id="__span-9-2"><span class="cp">{{</span> <span class="nv">utils.s3bucket</span><span class="o">(</span><span class="s1">&#39;s3://bucket.xyzzy.com/an/s3/key&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-9-3">
</span><span id="__span-9-4"><span class="c">{# Get the lava temp bucket name #}</span>
</span><span id="__span-9-5"><span class="cp">{{</span> <span class="nv">utils.s3bucket</span><span class="o">(</span><span class="nv">realm.s3_temp</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="s3key">s3key<a class="headerlink" href="#s3key" title="Permanent link">&para;</a></h4>
<p>Extract the S3 key name component from a string.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-10-1"><span class="c">{# &quot;s3://bucket.xyzzy.com/an/s3/key&quot; --&gt; &quot;an/s3/key&quot; #}</span>
</span><span id="__span-10-2"><span class="cp">{{</span> <span class="nv">utils.s3key</span><span class="o">(</span><span class="s1">&#39;s3://bucket.xyzzy.com/an/s3/key&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</span><span id="__span-10-3">
</span><span id="__span-10-4"><span class="c">{# Get the lava temp bucket prefix #}</span>
</span><span id="__span-10-5"><span class="cp">{{</span> <span class="nv">utils.s3key</span><span class="o">(</span><span class="nv">realm.s3_temp</span><span class="o">)</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="time">time<a class="headerlink" href="#time" title="Permanent link">&para;</a></h4>
<p>This is the standard Python
<a href="https://docs.python.org/3/library/datetime.html#datetime.time">datetime.time</a>
class.</p>
<h4 id="timedelta">timedelta<a class="headerlink" href="#timedelta" title="Permanent link">&para;</a></h4>
<p>This is the standard Python
<a href="https://docs.python.org/3/library/datetime.html#datetime.timedelta">datetime.timedelta</a>
class.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-11-1"><span class="c">{# Calculate yesterday&#39;s date #}</span>
</span><span id="__span-11-2"><span class="cp">{{</span> <span class="o">(</span><span class="nv">start</span> <span class="o">-</span> <span class="nv">utils.timedelta</span><span class="o">(</span><span class="nv">days</span><span class="o">=</span><span class="m">1</span><span class="o">))</span><span class="nv">.date</span><span class="o">()</span> <span class="cp">}}</span>
</span></code></pre></div>
<h4 id="uuid">uuid<a class="headerlink" href="#uuid" title="Permanent link">&para;</a></h4>
<p>Generate a random UUID.</p>
<div class="language-jinja highlight"><pre><span></span><code><span id="__span-12-1"><span class="c">{# Generate a random S3 object name #}</span>
</span><span id="__span-12-2"><span class="x">s3://bucket/some/prefix/</span><span class="cp">{{</span> <span class="nv">utils.uuid</span><span class="o">()</span> <span class="cp">}}</span><span class="x">.csv</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; Origin Energy 2025
    </div>
  
</div>
      <div class="md-footer-social">
        <div class="md-copyright">
          <div class="md-copyright__highlight">
            v8.2.0 (Kilauea)
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "content.code.copy", {"icon": {"repo": "material/github"}}], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>